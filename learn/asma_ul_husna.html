<!DOCTYPE html>
<html lang="sv" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุณูุงุก ุงููู ุงูุญุณูู - Guds Vackraste Namn</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/games.css">
    <link rel="stylesheet" href="../assets/css/mobile-enhancements.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tajawal:wght@300;400;500;700&family=Amiri:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/title-styles.css">
    <link rel="stylesheet" href="../assets/css/asma_ul_husna.css">
</head>


<body class="memory-game-page">

    <!-- Islamic Background Layer -->
    <div class="islamic-bg-layer"></div>

    <!-- Golden Particles Container -->
    <div class="particles-container" id="particlesContainer"></div>

    <!-- Navigation Bar with Search -->
    <div class="asma-nav-bar">
        <!-- Navigation Buttons (First Row) -->
        <!-- Navigation Buttons (First Row) -->
        <div class="nav-buttons-row">
            <!-- Back Button -->
            <button class="asma-nav-btn" onclick="window.location.href='../learn/learn.html'" aria-label="Back"
                title="ุฑุฌูุน">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </button>
            <!-- Mobile Toggle -->
            <button id="mobileToggle" class="asma-nav-btn" onclick="toggleMobileView()" aria-label="Mobile View"
                title="ุนุฑุถ ุงูุฌูุงู">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                    <line x1="12" y1="18" x2="12.01" y2="18"></line>
                </svg>
            </button>
            <!-- Stats Button -->
            <button class="asma-nav-btn" onclick="openStats()" aria-label="Stats" title="ุฅุญุตุงุฆูุงุชู">
                <span style="font-size: 1.2rem;">๐</span>
            </button>
            <!-- Language Toggle -->
            <button id="langToggle" class="asma-nav-btn" onclick="toggleLang()" aria-label="Language"
                title="ุชุจุฏูู ุงููุบุฉ">
                <span style="font-size: 14px; font-weight: bold;" id="langLabel">ุน</span>
            </button>
            <!-- Theme Toggle -->
            <button id="themeToggle" class="asma-nav-btn" onclick="toggleTheme()" aria-label="Theme"
                title="ุชุบููุฑ ุงูุซูู">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
            <!-- Audio Player Button (Kept in Menu) -->
            <button class="asma-nav-btn feature-btn" id="audioBtn" onclick="togglePlay()" aria-label="ุชุดุบูู ุตูุชู"
                title="ุชุดุบูู / ุฅููุงู">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <polygon points="5 3 19 12 5 21 5 3"></polygon>
                </svg>
            </button>
        </div>

        <!-- Mode Selection Bar (New) -->
        <div class="mode-selection-bar" id="modeSelectionBar">
            <span class="mode-indicator" id="modeIndicator"></span>
            <button class="mode-btn active" onclick="switchMode('browse')" id="btn-browse" title="Blรคddra / ุชุตูุญ">
                <span class="mode-icon">๐</span>
            </button>
            <button class="mode-btn" onclick="switchMode('quiz')" id="btn-quiz" title="Quiz / ุงุฎุชุจุงุฑ">
                <span class="mode-icon">โ</span>
            </button>
            <button class="mode-btn" onclick="switchMode('flashcard')" id="btn-flashcard" title="Flashcards / ุจุทุงูุงุช">
                <span class="mode-icon">๐</span>
            </button>
            <button class="mode-btn" onclick="switchMode('quiz-fill')" id="btn-quiz-fill"
                title="Fill Quiz / ุฃููู ุงููุฑุงุบ">
                <span class="mode-icon">โ๏ธ</span>
            </button>
        </div>


    </div>


    <!-- Main Container -->
    <div class="asma-container">

        <!-- ==================== BROWSE VIEW ==================== -->
        <div id="browseView" class="view-section active">
            <!-- Header -->
            <div class="asma-header">
                <div class="asma-title-ar">ุฃูุณูููุงุกู ุงูููููู ุงููุญูุณูููู</div>
                <div class="asma-title-sv">Guds Vackraste Namn</div>
            </div>

            <!-- Search & Filters -->
            <div class="nav-search-wrapper" style="margin: 20px auto; width: 90%; max-width: 600px;">
                <input type="text" id="asmaModeSearch" class="nav-search-input" placeholder="๐ ุงุจุญุซ..."
                    oninput="filterNames()">
                <button class="asma-nav-btn" onclick="toggleFilters()" aria-label="Filters" title="ุชุตููุฉ ุงูุฃุณูุงุก">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="4" y1="21" x2="4" y2="14"></line>
                        <line x1="4" y1="10" x2="4" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12" y2="3"></line>
                        <line x1="20" y1="21" x2="20" y2="16"></line>
                        <line x1="20" y1="12" x2="20" y2="3"></line>
                        <line x1="1" y1="14" x2="7" y2="14"></line>
                        <line x1="9" y1="8" x2="15" y2="8"></line>
                        <line x1="17" y1="16" x2="23" y2="16"></line>
                    </svg>
                </button>
            </div>

            <!-- Filter Buttons -->
            <div class="asma-filter-bar" id="filterBar">
                <button class="asma-filter-btn active" data-filter="all" onclick="setFilter('all')">ุงููู</button>
                <button class="asma-filter-btn" data-filter="favorites" onclick="setFilter('favorites')">โค๏ธ</button>
                <button class="asma-filter-btn" data-filter="memorized" onclick="setFilter('memorized')">โ</button>
                <button class="asma-filter-btn filter-btn--jalal" data-filter="jalal"
                    onclick="setFilter('jalal')">ุงูุฌูุงู</button>
                <button class="asma-filter-btn filter-btn--jamal" data-filter="jamal"
                    onclick="setFilter('jamal')">ุงูุฌูุงู</button>
                <button class="asma-filter-btn filter-btn--kamal" data-filter="kamal"
                    onclick="setFilter('kamal')">ุงูููุงู</button>
            </div>

            <!-- Stats -->
            <div class="asma-stats" id="asmaStats">Visar 99 namn</div>

            <!-- Cards Grid -->
            <!-- Loading Indicator -->
            <div class="loading-indicator" id="loadingIndicator">
                <div class="loading-content">
                    <div class="loading-spinner">โณ</div>
                    <div class="loading-text">ุฌุงุฑู ุชุญููู ุงูุฃุณูุงุก...</div>
                    <div class="loading-bar">
                        <div class="loading-progress" id="loadingProgress"></div>
                    </div>
                    <div class="loading-percent" id="loadingPercent">0%</div>
                </div>
            </div>
            <div class="asma-cards-grid" id="asmaCardsGrid">
                <!-- Cards will be generated by JavaScript -->
            </div>
        </div>

        <!-- ==================== QUIZ VIEW ==================== -->
        <div id="quizView" class="view-section hidden">


            <div class="quiz-container">
                <div class="quiz-header">
                    <div class="quiz-progress">
                        <div class="quiz-progress-bar">
                            <div class="quiz-progress-fill" id="quizProgressFill" style="width: 0%"></div>
                        </div>
                        <div class="quiz-score" id="quizScore">0/10</div>
                    </div>
                </div>

                <div class="quiz-content" id="quizContent">
                    <!-- Quiz questions will be generated here -->
                </div>
            </div>
        </div>

        <!-- ==================== FILL QUIZ VIEW ==================== -->
        <div id="quizFillView" class="view-section hidden">
            <div class="quiz-fill-container">
                <div class="quiz-fill-header">
                    <div class="quiz-fill-progress">
                        <span class="fill-progress-text">
                            ุณุคุงู <span id="fillCurrentQ">1</span> / <span id="fillTotalQ">10</span>
                        </span>
                    </div>
                    <div class="quiz-fill-score">
                        ุงูููุงุท: <span id="fillScore">0</span>
                    </div>
                </div>

                <!-- Initial State: Question Card -->
                <div class="quiz-fill-card" id="fillQuestionCard">
                    <div class="fill-question-section">
                        <div class="fill-ayah-arabic" id="fillAyahArabic"></div>
                        <div class="fill-ayah-translation" id="fillAyahTranslation"></div>
                    </div>



                    <div class="fill-options-grid" id="fillOptions">
                        <!-- Options generated by JS -->
                    </div>

                    <div class="quiz-fill-feedback" id="fillFeedback" style="display: none;">
                        <div class="feedback-content"></div>
                    </div>
                </div>

                <!-- Results State -->
                <div class="quiz-fill-results" id="fillResults" style="display: none;">
                    <div class="results-icon">๐</div>
                    <h3>ุงูุชูู ุงูุงุฎุชุจุงุฑ!</h3>
                    <div class="results-score">
                        ุงููุชูุฌุฉ: <span id="fillFinalScore">0</span> / <span id="fillFinalTotal">10</span>
                    </div>
                    <div class="results-percentage" id="fillPercentage">0%</div>
                    <div class="results-actions">
                        <button class="mode-btn" onclick="retryFillQuiz()">
                            <span>๐</span> ุฅุนุงุฏุฉ ุงููุญุงููุฉ
                        </button>
                        <button class="mode-btn" onclick="switchMode('browse')">
                            <span>๐</span> ุงูุนูุฏุฉ ูููุงุฆูุฉ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== FLASHCARD VIEW ==================== -->
        <div id="flashcardView" class="view-section hidden">


            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipFlashcard()">
                    <div class="flashcard-face flashcard-front">
                        <div class="flashcard-number" id="flashcardNumber">1</div>
                        <div class="flashcard-name" id="flashcardName">ุงูุฑููุญููููู</div>
                        <div class="flashcard-hint">ุงุถุบุท ูููุดู ุนู ุงููุนูู</div>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <div class="flashcard-number" id="flashcardNumberBack">1</div>
                        <div class="flashcard-meaning">
                            <div class="flashcard-meaning-ar" id="flashcardMeaningAr">ุฐูู ุงูุฑููุญูููุฉู ุงูุดููุงููููุฉู</div>
                            <div class="flashcard-meaning-sv" id="flashcardMeaningSv">Den Nรฅderike</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flashcard-controls">
                <button class="flashcard-btn dont-know" onclick="flashcardDontKnow()">
                    <span>โ</span>
                    <span>ูุง ุฃุนุฑู</span>
                </button>
                <button class="flashcard-btn" onclick="speakCurrentFlashcard()">
                    <span>๐</span>
                    <span>ุงุณุชูุน</span>
                </button>
                <button class="flashcard-btn know" onclick="flashcardKnow()">
                    <span>โ</span>
                    <span>ุฃุนุฑููุง</span>
                </button>
            </div>

            <div class="flashcard-progress" id="flashcardProgress">1 / 99</div>
        </div>
    </div>


    <!-- Dashboard Button -->


    <!-- Stats Modal -->
    <div class="stats-modal" id="statsModal" onclick="if(event.target === this) closeStats()">
        <div class="stats-container">
            <button class="quiz-close-btn" onclick="closeStats()">ร</button>

            <div class="stats-header">
                <div class="stats-title">ุฅุญุตุงุฆูุงุช ุงูุญูุธ</div>
                <div class="streak-counter" id="streakCounter">๐ฅ 0 ููู ูุชูุงุตู</div>
            </div>

            <div class="progress-rings">
                <div class="progress-card">
                    <div class="progress-circle">
                        <svg>
                            <circle class="progress-bg" cx="50" cy="50" r="40"></circle>
                            <circle class="progress-bar" id="ringMemorized" cx="50" cy="50" r="40"></circle>
                        </svg>
                        <div class="progress-text" id="textMemorized">0%</div>
                    </div>
                    <div class="progress-label">ุงูุฃุณูุงุก ุงููุญููุธุฉ</div>
                </div>

                <div class="progress-card">
                    <div class="progress-circle">
                        <svg>
                            <circle class="progress-bg" cx="50" cy="50" r="40"></circle>
                            <circle class="progress-bar stroke-red" id="ringFavorites" cx="50" cy="50" r="40"></circle>
                        </svg>
                        <div class="progress-text" id="textFavorites">0</div>
                    </div>
                    <div class="progress-label">ุงูุฃุณูุงุก ุงูููุถูุฉ</div>
                </div>
            </div>

            <div class="badges-section">
                <div class="badges-title">ุงูุฅูุฌุงุฒุงุช ูุงูุดุงุฑุงุช</div>
                <div class="badges-grid" id="badgesGrid">
                    <!-- Badges generated by JS -->
                </div>
            </div>

            <div class="stats-actions stats-actions-layout">
                <button class="asma-mode-btn btn-compact" onclick="shareStats()">
                    <span>๐ค</span>
                    <span>ูุดุงุฑูุฉ ุฅูุฌุงุฒู</span>
                </button>
                <button class="asma-mode-btn btn-compact" onclick="exportMemorizedList()">
                    <span>๐</span>
                    <span>ูุณุฎ ูุงุฆูุฉ ุงูุญูุธ</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Audio Player Bar -->
    <div class="audio-player-bar hidden" id="audioPlayer">
        <!-- Close Button -->
        <button class="player-close-btn" onclick="closeAudioPlayer()" title="ุฅุบูุงู ุงููุดุบู">ร</button>

        <div class="audio-info">
            <div class="audio-names-row">
                <div class="audio-name-sv" id="playerTitleSv">Den Nรฅderike</div>
                <div class="audio-name-ar" id="playerTitleAr">ุงูุฑุญูู</div>
            </div>
        </div>

        <div class="audio-controls">
            <button class="audio-btn" onclick="togglePlayerRepeat()" id="playerRepeatBtn" title="ุนุฏุฏ ุงูุชูุฑุงุฑ">โป
                1x</button>
            <button class="audio-btn" onclick="toggleLoop()" id="loopBtn" title="ุชูุฑุงุฑ ุงููุงุฆูุฉ">๐</button>
            <button class="audio-btn prev" onclick="playPrev()" title="ุงูุณุงุจู">โฎ๏ธ</button>
            <button class="audio-btn play-pause" onclick="togglePlay()" id="playPauseBtn">โถ๏ธ</button>
            <button class="audio-btn next" onclick="playNext()" title="ุงูุชุงูู">โญ๏ธ</button>
            <div class="speed-control">
                <button class="audio-btn speed-btn" onclick="toggleSpeed()" id="speedBtn">1x</button>
            </div>
        </div>
    </div>

    <script type="module" src="/src/loader.ts"></script>
    <script type="module" src="/src/learn/asmaUlHusna.ts"></script>
</body>

</html>