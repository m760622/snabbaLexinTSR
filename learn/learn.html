<!DOCTYPE html>
<html lang="sv" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LÃ¤r dig Svenska Grammatik | ØªØ¹Ù„Ù… Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³ÙˆÙŠØ¯ÙŠØ© - SnabbaLexin</title>
    <meta name="description"
        content="LÃ¤r dig svensk grammatik: ordfÃ¶ljd, verb, pronomen, adjektiv med quiz och Ã¶vningar. Anpassat fÃ¶r arabisktalande.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Tajawal:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="../assets/images/icon.svg">
    <link rel="apple-touch-icon" href="../assets/images/icon.png">
    <link rel="stylesheet" href="../assets/css/style.css?v=tajawal">
    <link rel="stylesheet" href="../assets/css/learn.css">
    <link rel="stylesheet" href="../assets/css/games.css">
    <!-- Twemoji for cross-platform emoji support -->
    <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <!-- Styles moved to assets/css/learn.css -->
</head>

<body class="memory-game-page">
    <!-- Animated Background -->
    <div class="learn-bg-layer"></div>
    <div class="particles-container" id="particlesContainer"></div>

    <header>
        <button class="back-btn" onclick="window.location.href='../index.html'" aria-label="Tillbaka / Ø±Ø¬ÙˆØ¹"
            title="Tillbaka / Ø±Ø¬ÙˆØ¹">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        </button>
        <button id="mobileToggle" class="mobile-toggle-btn" onclick="toggleMobileView()" class="ml-sm">ğŸ“±</button>
        <h1><span class="sv-text">LÃ¤r dig Svenska</span><span class="ar-text">ØªØ¹Ù„Ù… Ø§Ù„Ø³ÙˆÙŠØ¯ÙŠØ©</span></h1>

        <div class="flex-1"></div>

        <button class="mobile-toggle-btn" onclick="window.location.href='../profile.html'"
            title="Profil / Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ">
            ğŸ‘¤
        </button>
    </header>

    <!-- Quick Access Row (Separate Line) -->
    <div class="quick-access-row">
        <button class="quick-btn" onclick="window.location.href='quran.html'" title="Koranord / ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†">
            <span class="quick-icon">ğŸ“–</span>
            <span class="quick-label sv-text">Koranord</span>
            <span class="quick-label ar-text">ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†</span>
        </button>
        <button class="quick-btn" onclick="window.location.href='asma_ul_husna.html'"
            title="Guds 99 Namn / Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø³Ù†Ù‰">
            <span class="quick-icon">ğŸ“¿</span>
            <span class="quick-label sv-text">99 Namn</span>
            <span class="quick-label ar-text">Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡</span>
        </button>
        <button class="quick-btn" onclick="window.location.href='ordsprak.html'"
            title="Svenska OrdsprÃ¥k / Ø§Ù„Ø£Ù…Ø«Ø§Ù„ Ø§Ù„Ø³ÙˆÙŠØ¯ÙŠØ©">
            <span class="quick-icon">ğŸ“œ</span>
            <span class="quick-label sv-text">OrdsprÃ¥k</span>
            <span class="quick-label ar-text">Ø§Ù„Ø£Ù…Ø«Ø§Ù„</span>
        </button>
        <button class="quick-btn" onclick="window.location.href='cognates.html'" title="Liknande Ord / Ø§Ù„Ù…ØªØ´Ø§Ø¨Ù‡Ø§Øª">
            <span class="quick-icon">ğŸ”¤</span>
            <span class="quick-label sv-text">Liknande</span>
            <span class="quick-label ar-text">Ù…ØªØ´Ø§Ø¨Ù‡Ø§Øª</span>
        </button>
        <button class="quick-btn" onclick="openRandomQuiz()" title="SlumpmÃ¤ssig Quiz / Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ">
            <span class="quick-icon">ğŸ²</span>
            <span class="quick-label sv-text">Quiz</span>
            <span class="quick-label ar-text">Ø§Ø®ØªØ¨Ø§Ø±</span>
        </button>
    </div>

    <!-- Search & Filters (Right after Quick Access) -->
    <div class="search-filter-section">
        <div class="search-container">
            <input type="text" id="lessonSearchInput" placeholder="SÃ¶k lektioner / Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¯Ø±Ø³..."
                data-i18n-placeholder="learn.searchPlaceholder">
            <button id="filterToggleBtn" class="filter-toggle-btn" aria-label="Toggle Filters">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                </svg>
            </button>
        </div>
        <div class="filter-scroll-container">
            <button class="filter-chip active" data-filter="all"><span class="sv-text">Alla</span><span
                    class="ar-text">Ø§Ù„ÙƒÙ„</span></button>
            <button class="filter-chip filter-beginner" data-filter="beginner"><span
                    class="sv-text">NybÃ¶rjare</span><span class="ar-text">Ù…Ø¨ØªØ¯Ø¦</span></button>
            <button class="filter-chip filter-intermediate" data-filter="intermediate"><span
                    class="sv-text">Medel</span><span class="ar-text">Ù…ØªÙˆØ³Ø·</span></button>
            <button class="filter-chip filter-advanced" data-filter="advanced"><span
                    class="sv-text">Avancerad</span><span class="ar-text">Ù…ØªÙ‚Ø¯Ù…</span></button>
        </div>
    </div>



    <!-- Review Banner -->
    <div class="review-banner hidden" id="reviewBanner" onclick="openReviewSession()">
        <div class="review-icon">ğŸ”„</div>
        <div class="review-content">
            <div class="review-title"><span class="sv-text">Dags fÃ¶r repetition!</span><span class="ar-text">ÙˆÙ‚Øª
                    Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©!</span></div>
            <div class="review-subtitle"><span id="reviewCount">0</span> <span class="sv-text">ord att
                    repetera</span><span class="ar-text">ÙƒÙ„Ù…Ø§Øª Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span></div>
        </div>
    </div>

    <main>

        <!-- Daily Challenge Card (Compact) -->
        <div class="daily-challenge compact" id="dailyChallenge" onclick="openDailyChallenge()">
            <div class="challenge-header">
                <div class="challenge-icon">ğŸ¯</div>
                <div class="challenge-info">
                    <div class="challenge-title">
                        <span class="sv-text">Dagens Utmaning</span><span class="ar-text">ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…</span>
                    </div>
                    <div class="challenge-desc" id="challengeDesc">
                        <span class="sv-text">SlutfÃ¶r 3 lektioner!</span>
                        <span class="ar-text">Ø£ÙƒÙ…Ù„ 3 Ø¯Ø±ÙˆØ³!</span>
                    </div>
                </div>
                <div class="challenge-reward">
                    <div class="reward-value">+50</div>
                    <div class="reward-label">XP</div>
                </div>
            </div>
        </div>

        <!-- Lessons Section -->
        <div class="section-title" class="section-title-padded">ğŸ“š <span class="sv-text">Lektioner</span><span
                class="ar-text">Ø§Ù„Ø¯Ø±ÙˆØ³</span></div>
        <div class="lessons-grid" id="lessonsGrid">
            <!-- Dynamic -->
        </div>

        <!-- Collapsible Extra Sections -->
        <details class="collapsible-section" id="extraSectionsToggle">
            <summary class="expand-toggle">
                <span class="sv-text">ğŸ“Œ Visa mer (Dagens ord, Aktivitet...)</span>
                <span class="ar-text">ğŸ“Œ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯ (ÙƒÙ„Ù…Ø© Ø§Ù„ÙŠÙˆÙ…ØŒ Ø§Ù„Ù†Ø´Ø§Ø·...)</span>
            </summary>

            <!-- Word of the Day Section -->
            <div class="word-of-day-section" id="wordOfDaySection">
                <div class="section-title">ğŸ“ <span class="sv-text">Dagens Ord</span><span class="ar-text">ÙƒÙ„Ù…Ø©
                        Ø§Ù„ÙŠÙˆÙ…</span>
                </div>
                <div class="wod-card" onclick="speakWordOfDay()">
                    <div class="wod-header">
                        <span class="wod-date" id="wodDate"></span>
                        <button class="wod-speak-btn">ğŸ”Š</button>
                    </div>
                    <div class="wod-content">
                        <div class="wod-word" id="wodWord">vÃ¤lkommen</div>
                        <div class="wod-translation" id="wodTranslation">Ù…Ø±Ø­Ø¨Ø§Ù‹</div>
                        <div class="wod-example">
                            <div class="wod-example-swe" id="wodExampleSwe">VÃ¤lkommen till Sverige!</div>
                            <div class="wod-example-arb" id="wodExampleArb">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø³ÙˆÙŠØ¯!</div>
                        </div>
                    </div>
                    <div class="wod-footer">
                        <span class="wod-category">ğŸ·ï¸ hÃ¤lsning</span>
                    </div>
                </div>
            </div>

            <!-- Learning Paths Section -->
            <div class="learning-paths-section">
                <div class="section-title">ğŸ›¤ï¸ <span class="sv-text">LÃ¤rstigar</span><span class="ar-text">Ù…Ø³Ø§Ø±Ø§Øª
                        Ø§Ù„ØªØ¹Ù„Ù…</span></div>
                <div class="paths-container">
                    <div class="learning-path beginner-path" onclick="setPathFilter('beginner')">
                        <div class="path-icon">ğŸŒ±</div>
                        <div class="path-info">
                            <div class="path-name"><span class="sv-text">NybÃ¶rjare</span><span
                                    class="ar-text">Ù…Ø¨ØªØ¯Ø¦</span>
                            </div>
                            <div class="path-desc"><span class="sv-text">GrundlÃ¤ggande grammatik</span><span
                                    class="ar-text">Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯</span></div>
                            <div class="path-progress">
                                <div class="path-progress-fill" id="beginnerProgress"></div>
                            </div>
                            <div class="path-stats"><span id="beginnerCompleted">0</span>/6</div>
                        </div>
                        <div class="path-arrow">â†’</div>
                    </div>
                    <div class="learning-path intermediate-path" onclick="setPathFilter('intermediate')">
                        <div class="path-icon">ğŸ“ˆ</div>
                        <div class="path-info">
                            <div class="path-name"><span class="sv-text">Medel</span><span class="ar-text">Ù…ØªÙˆØ³Ø·</span>
                            </div>
                            <div class="path-desc"><span class="sv-text">Verb & tempus</span><span
                                    class="ar-text">Ø§Ù„Ø£ÙØ¹Ø§Ù„
                                    ÙˆØ§Ù„Ø£Ø²Ù…Ù†Ø©</span></div>
                            <div class="path-progress">
                                <div class="path-progress-fill" id="intermediateProgress"></div>
                            </div>
                            <div class="path-stats"><span id="intermediateCompleted">0</span>/6</div>
                        </div>
                        <div class="path-arrow">â†’</div>
                    </div>
                    <div class="learning-path advanced-path" onclick="setPathFilter('advanced')">
                        <div class="path-icon">ğŸ“</div>
                        <div class="path-info">
                            <div class="path-name"><span class="sv-text">Avancerad</span><span
                                    class="ar-text">Ù…ØªÙ‚Ø¯Ù…</span>
                            </div>
                            <div class="path-desc"><span class="sv-text">Idiom & vardagsfraser</span><span
                                    class="ar-text">Ø§Ù„ØªØ¹Ø¨ÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª</span></div>
                            <div class="path-progress">
                                <div class="path-progress-fill" id="advancedProgress"></div>
                            </div>
                            <div class="path-stats"><span id="advancedCompleted">0</span>/5</div>
                        </div>
                        <div class="path-arrow">â†’</div>
                    </div>
                </div>
            </div>

            <!-- Weekly Activity Chart -->
            <div class="activity-section">
                <div class="section-title">ğŸ“Š <span class="sv-text">Veckoaktivitet</span><span class="ar-text">Ù†Ø´Ø§Ø·
                        Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</span></div>
                <div class="activity-chart" id="activityChart">
                    <div class="activity-bar" data-day="0">
                        <div class="bar-fill"></div><span class="day-label">MÃ¥n</span>
                    </div>
                    <div class="activity-bar" data-day="1">
                        <div class="bar-fill"></div><span class="day-label">Tis</span>
                    </div>
                    <div class="activity-bar" data-day="2">
                        <div class="bar-fill"></div><span class="day-label">Ons</span>
                    </div>
                    <div class="activity-bar" data-day="3">
                        <div class="bar-fill"></div><span class="day-label">Tor</span>
                    </div>
                    <div class="activity-bar" data-day="4">
                        <div class="bar-fill"></div><span class="day-label">Fre</span>
                    </div>
                    <div class="activity-bar" data-day="5">
                        <div class="bar-fill"></div><span class="day-label">LÃ¶r</span>
                    </div>
                    <div class="activity-bar today" data-day="6">
                        <div class="bar-fill" style="height: 60%"></div><span class="day-label">SÃ¶n</span>
                    </div>
                </div>
                <div class="activity-summary">
                    <div class="activity-stat">
                        <span class="stat-value" id="weekLessons">0</span>
                        <span class="stat-label"><span class="sv-text">Lektioner</span><span
                                class="ar-text">Ø¯Ø±ÙˆØ³</span></span>
                    </div>
                    <div class="activity-stat">
                        <span class="stat-value" id="weekMinutes">0</span>
                        <span class="stat-label"><span class="sv-text">minuter</span><span
                                class="ar-text">Ø¯Ù‚ÙŠÙ‚Ø©</span></span>
                    </div>
                    <div class="activity-stat">
                        <span class="stat-value" id="weekXP">0</span>
                        <span class="stat-label">XP</span>
                    </div>
                </div>
            </div>
        </details>
    </main>

    <!-- Lesson Modal -->
    <div id="lessonModal" class="lesson-modal">
        <div class="modal-header">
            <button class="close-lesson" onclick="closeLessonModal()">Ã—</button>
            <h2 id="modalTitle">Lektion</h2>
            <div class="w-44"></div>
        </div>

        <div id="lessonContent" class="lesson-content"></div>
    </div>

    <!-- Particles Script -->
    <script>
        // Create floating particles
        function createParticles() {
            const container = document.getElementById('particlesContainer');
            if (!container) return;

            const colors = ['blue', 'green', 'gold'];
            const particleCount = 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = `learn-particle ${colors[i % 3]}`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 15}s`;
                particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                container.appendChild(particle);
            }
        }

        // Mobile view toggle
        function toggleMobileView() {
            const isMobile = document.body.classList.toggle('iphone-view');
            localStorage.setItem('learnMobileView', isMobile.toString());
        }

        // Load mobile view preference
        function loadMobileView() {
            const saved = localStorage.getItem('learnMobileView') === 'true';
            if (saved) document.body.classList.add('iphone-view');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            createParticles();
            loadMobileView();
            // Parse emojis using Twemoji for cross-platform support
            if (typeof twemoji !== 'undefined') {
                twemoji.parse(document.body, {
                    folder: 'svg',
                    ext: '.svg'
                });
            }
        });
    </script>

    <script type="module" src="/src/learn-app.ts"></script>
    <script type="module" src="/src/pwa.ts"></script>
</body>

</html>