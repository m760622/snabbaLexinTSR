<!DOCTYPE html>
<html lang="sv" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BokstavlÃ¤nk / Ø±Ø¨Ø· Ø§Ù„Ø­Ø±ÙˆÙ - SnabbaLexin</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/games.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Tajawal:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/focus-mode.css">
</head>

<body class="wc-cyber-theme mobile-view-mode">

    <!-- Animated Cyber Background -->
    <div class="wc-cyber-bg">
        <div class="wc-grid-overlay"></div>
        <!-- Floating Particles -->
        <div class="wc-particles" id="wcParticles"></div>
    </div>

    <!-- Premium HUD - Top Row -->
    <div class="memory-hud wc-hud">
        <div class="hud-nav">
            <button class="hud-btn" onclick="window.location.href='games.html'" aria-label="Tillbaks / Ø±Ø¬ÙˆØ¹">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="19" y1="12" x2="5" y2="12"></line>
                    <polyline points="12 19 5 12 12 5"></polyline>
                </svg>
            </button>
            <button id="themeToggle" class="hud-btn" onclick="toggleTheme()" aria-label="Toggle Theme / ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø³Ù…Ø©">
                ğŸŒ™
            </button>
            <button id="mobileToggle" class="hud-btn" onclick="toggleMobileView()" aria-label="Mobile View">
                ğŸ“±
            </button>
            <button id="focusModeToggle" class="hud-btn" onclick="toggleFocusMode()"
                aria-label="Focus Mode / ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ²" title="ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² / Focus Mode">
                ğŸ‘ï¸
            </button>
            <!-- Title moved here, next to mobile button -->
            <span class="hud-title-inline">âœ¨ <span class="sv-text">BokstavlÃ¤nk</span><span class="ar-text">Ø±Ø¨Ø·
                    Ø§Ù„Ø­Ø±ÙˆÙ</span></span>
        </div>
    </div>

    <!-- Stats Row - Separate -->
    <div class="wc-stats-row">

        <!-- Info Group: Numbers -->
        <div class="wc-info-group">
            <div class="stat-pill moves wc-level-btn" title="NivÃ¥ / Ø§Ù„Ù…Ø³ØªÙˆÙ‰ - Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø±Ø­Ù„Ø©"
                onclick="openLevelSelect()">
                <span class="stat-pill-icon">ğŸ“¶</span>
                <span class="stat-pill-value" id="wcLevelTitle">1-1</span>
                <span class="stat-pill-arrow">â–¼</span>
            </div>

            <!-- Streak Counter -->
            <div class="stat-pill wc-streak-pill" title="Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª / Svit">
                <span class="stat-pill-icon">ğŸ”¥</span>
                <span class="stat-pill-value" id="wcStreakCount">0</span>
            </div>

            <div class="stat-pill score" title="Mynt / Ø§Ù„Ø¹Ù…Ù„Ø§Øª">
                <span class="stat-pill-icon">ğŸ’</span>
                <span class="stat-pill-value" id="wcCoinCount">0</span>
            </div>
        </div>

        <!-- Action Group: Buttons -->
        <div class="wc-actions-group">
            <div class="stat-pill wc-clickable-pill wc-stats-btn" title="Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª / Statistik"
                onclick="showStatsModal()">
                <span class="stat-pill-icon">ğŸ“Š</span>
            </div>
            <div class="stat-pill wc-clickable-pill wc-achievements-btn" title="Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª / Prestationer"
                onclick="showAchievementsModal()">
                <span class="stat-pill-icon">ğŸ†</span>
            </div>
            <!-- Sound Toggle -->
            <div class="stat-pill wc-clickable-pill wc-sound-toggle" title="ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª" onclick="toggleSound()">
                <span class="stat-pill-icon" id="wcSoundIcon">ğŸ”Š</span>
            </div>
        </div>
    </div>

    <!-- Game Container -->
    <div class="wc-game-container" id="wcGameContainer">

        <!-- Word Slots Area -->
        <div class="wc-slots-area" id="wcGridContainer">
            <!-- JS injects rows here -->
        </div>

        <!-- Translation Display -->
        <div id="wcTranslationDisplay" class="wc-translation-display"></div>

        <!-- Current Input Preview (ABOVE wheel) -->
        <div class="wc-input-preview" id="wcPreviewText"></div>

        <!-- Wheel Interaction Area -->
        <div class="wc-wheel-container" id="wcWheelContainer">
            <!-- Canvas Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø¶ÙŠØ¡ -->
            <canvas id="wcDragTrailCanvas" class="wc-drag-trail-canvas"></canvas>
            <!-- Pulsing Rings Behind Wheel -->
            <div class="wc-wheel-ring wc-ring-outer"></div>
            <div class="wc-wheel-ring wc-ring-inner"></div>
            <div class="wc-wheel-glow"></div>

            <!-- Hint Button in Center -->
            <div class="wc-wheel-center-btn premium-glow-btn" onclick="useHint()" title="ØªÙ„Ù…ÙŠØ­ / LedtrÃ¥d (âˆ’10 ğŸ’)">
                <span class="wc-center-icon">ğŸ’¡</span>
            </div>

            <!-- Wheel (Letter Orbs) -->
            <div class="wc-letters" id="wcWheel">
                <!-- JS injects letters here -->
            </div>

            <!-- ØªÙ„Ù…ÙŠØ­ Ø§Ù„ÙŠØ¯ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† -->
            <div class="wc-hand-tutorial" id="wcHandTutorial">
                <span class="wc-hand-icon">ğŸ‘†</span>
            </div>
        </div>

        <!-- Controls removed per user request -->

    </div>

    <!-- Level Complete Modal -->
    <div id="wcLevelCompleteModal" class="wc-modal-overlay hidden">
        <div class="wc-modal-content">
            <div class="wc-celebrate-emoji">ğŸ‰</div>
            <div class="wc-celebrate-title">Bra jobbat!</div>
            <div class="wc-celebrate-subtitle">Ø£Ø­Ø³Ù†Øª!</div>
            <div class="wc-modal-actions">
                <button class="wc-btn wc-btn-secondary" onclick="window.location.href='games.html'">
                    ğŸ  <span class="sv-text">Meny</span><span class="ar-text">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span>
                </button>
                <button class="wc-btn wc-btn-primary" onclick="nextLevel()">
                    <span class="sv-text">NÃ¤sta</span><span class="ar-text">Ø§Ù„ØªØ§Ù„ÙŠ</span> âœ
                </button>
            </div>
        </div>
    </div>
    <!-- Level Select Modal -->
    <div id="wcLevelSelectModal" class="wc-modal-overlay hidden">
        <div class="wc-modal-content wc-level-select-content">
            <div class="wc-modal-header">
                <h2>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±Ø­Ù„Ø©</h2>
                <button class="wc-modal-close" onclick="closeLevelSelect()">âœ•</button>
            </div>
            <div class="wc-level-grid" id="wcLevelGrid">
                <!-- JS will populate levels here -->
            </div>
        </div>
    </div>

    <div id="wcLibraryModal" class="wc-modal-hidden"></div>
    <div id="celebration-container"></div>

    <!-- Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© -->
    <div id="wcDailyWheelModal" class="wc-modal-overlay hidden">
        <div class="wc-modal-content wc-daily-wheel-content">
            <div class="wc-daily-wheel-header">
                <span class="wc-daily-wheel-title">ğŸ° Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</span>
                <span class="wc-daily-wheel-subtitle">Dagligt Lyckohjul</span>
            </div>
            <div class="wc-daily-wheel-container">
                <div class="wc-daily-wheel" id="wcDailyWheel">
                    <div class="wc-wheel-segment" data-prize="10">ğŸ’° 10</div>
                    <div class="wc-wheel-segment" data-prize="25">ğŸ’ 25</div>
                    <div class="wc-wheel-segment" data-prize="5">ğŸª™ 5</div>
                    <div class="wc-wheel-segment" data-prize="50">ğŸŒŸ 50</div>
                    <div class="wc-wheel-segment" data-prize="15">ğŸ’° 15</div>
                    <div class="wc-wheel-segment" data-prize="100">ğŸ 100</div>
                </div>
                <div class="wc-wheel-pointer">â–¼</div>
            </div>
            <button class="wc-btn wc-btn-primary wc-spin-btn" id="wcSpinBtn" onclick="spinDailyWheel()">
                ğŸ² Ø¯ÙˆÙ‘Ø± Ø§Ù„Ø¹Ø¬Ù„Ø© / Snurra
            </button>
            <button class="wc-btn wc-btn-secondary wc-close-wheel-btn" onclick="closeDailyWheel()">
                Ø¥ØºÙ„Ø§Ù‚
            </button>
        </div>
    </div>


    <script type="module" src="../src/games/wordConnectGame.ts"></script>
    <script type="module" src="/src/games/games-utils.ts"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Wait for module to load and expose initWordConnect
            const checkInit = () => {
                if (typeof initWordConnect === 'function') {
                    initWordConnect();
                } else {
                    setTimeout(checkInit, 100);
                }
            };
            checkInit();
        });
    </script>

    <script type="module" src="/src/pwa.ts"></script>
</body>

</html>