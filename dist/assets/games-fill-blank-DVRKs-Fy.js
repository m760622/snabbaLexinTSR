import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./loader-CqI2jdYk.js";import"./pwa-Bn3RWWLO.js";import"./config-CfHoVMbv.js";import"./db-bEbbjtoI.js";const v=10,f=2,B=3,w=7;let g=[],c=0,u=0,p=0,m=!1;const r={sentence:()=>document.getElementById("sentence"),translation:()=>document.getElementById("translation"),options:()=>document.getElementById("options"),current:()=>document.getElementById("current"),progressFill:()=>document.getElementById("progressFill"),scoreEl:()=>document.getElementById("score"),errorsEl:()=>document.getElementById("errors"),blank:()=>document.getElementById("blank"),feedback:()=>document.getElementById("feedback"),resultOverlay:()=>document.getElementById("resultOverlay"),resultEmoji:()=>document.getElementById("resultEmoji"),resultText:()=>document.getElementById("resultText"),resultStats:()=>document.getElementById("resultStats")};function b(){return dictionaryData.filter(t=>{const n=t[w],e=t[f];return n&&e&&n.toLowerCase().includes(e.toLowerCase())})}function C(){const t=b();g=t.sort(()=>Math.random()-.5).slice(0,v).map(e=>{const o=e[f],a=e[B],s=e[w],i=new RegExp(o,"i"),l=s.replace(i,"____"),T=t.filter(E=>E[f]!==o).sort(()=>Math.random()-.5).slice(0,3).map(E=>E[f]),h=[o,...T].sort(()=>Math.random()-.5);return{word:o,arabic:a,sentence:l,example:s,options:h}})}function x(){if(c>=g.length){M();return}const t=g[c],n=r.sentence(),e=r.translation(),o=r.options(),a=r.current(),s=r.progressFill();n&&(n.innerHTML=t.sentence.replace("____",'<span class="blank" id="blank">?</span>')),e&&(e.textContent=t.arabic),o&&(o.innerHTML="",t.options.forEach(i=>{const l=document.createElement("button");l.className="option-btn",l.textContent=i,l.onclick=()=>k(i,l),o.appendChild(l)})),a&&(a.textContent=String(c+1)),s&&(s.style.width=`${c/v*100}%`)}function k(t,n){if(m)return;m=!0;const e=g[c],o=r.blank(),a=document.querySelectorAll(".option-btn");if(o&&(o.textContent=t),t===e.word){u++;const s=r.scoreEl();s&&(s.textContent=String(u)),n.classList.add("correct"),o==null||o.classList.add("correct"),L("âœ…");try{typeof TTSManager<"u"&&(TTSManager!=null&&TTSManager.speak)&&TTSManager.speak(e.word,"sv")}catch(i){console.warn("[FillBlank] TTS not available:",i)}}else{p++;const s=r.errorsEl();s&&(s.textContent=String(p)),n.classList.add("wrong"),o==null||o.classList.add("wrong"),L("âŒ"),a.forEach(i=>{i.textContent===e.word&&i.classList.add("correct")}),navigator.vibrate&&navigator.vibrate(100)}a.forEach(s=>s.classList.add("disabled")),setTimeout(()=>{c++,m=!1,x()},2e3)}function L(t){const n=r.feedback();n&&(n.textContent=t,n.classList.add("visible"),setTimeout(()=>n.classList.remove("visible"),500))}function M(){const t=Math.round(u/v*100),n=r.resultOverlay(),e=r.resultEmoji(),o=r.resultText(),a=r.resultStats();e&&(e.textContent=t>=80?"ğŸ†":t>=50?"ğŸ‘":"ğŸ“š"),o&&(o.textContent=`${t}% rÃ¤tt! / ØµØ­ÙŠØ­!`),a&&(a.innerHTML=`âœ… ${u} | âŒ ${p}`),n==null||n.classList.add("visible"),typeof ProgressManager<"u"&&ProgressManager.trackGame()}function I(){var o;(o=r.resultOverlay())==null||o.classList.remove("visible"),c=0,u=0,p=0,m=!1;const t=r.scoreEl(),n=r.errorsEl(),e=r.progressFill();t&&(t.textContent="0"),n&&(n.textContent="0"),e&&(e.style.width="0%"),C(),x()}function y(){typeof ThemeManager<"u"&&ThemeManager.init(),I()}window.startNewGame=I;let d=!1;function S(){if(d)return;if(typeof dictionaryData<"u"&&dictionaryData.length>0){console.log("[FillBlank] Data already available, starting game..."),d=!0,y();return}let t=0;const n=50,e=setInterval(()=>{if(d){clearInterval(e);return}t++,typeof dictionaryData<"u"&&dictionaryData.length>0?(console.log("[FillBlank] Data found via polling, starting game..."),clearInterval(e),d=!0,y()):t>=n&&(console.error("[FillBlank] Timeout waiting for dictionary data"),clearInterval(e))},100);console.log("[FillBlank] Waiting for dictionaryLoaded event..."),window.addEventListener("dictionaryLoaded",()=>{d||(console.log("[FillBlank] dictionaryLoaded event received, starting game..."),clearInterval(e),d=!0,y())},{once:!0})}document.addEventListener("DOMContentLoaded",S);
