const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/db-CUAitF01.js","assets/config-8gd_ljfe.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{_ as N}from"./preload-helper-D7HrI6pR.js";import{T as V}from"./toast-manager-DdtDDR9Z.js";import{t as a,L as M}from"./i18n-Dq4jSOyT.js";const l={defaults:{darkMode:!0,colorTheme:"default",fontSize:"medium",animations:!0,soundEffects:!0,ttsSpeed:85,reminderEnabled:!1,reminderTime:"18:00",dailyGoal:10,autoPlay:!1,showExamples:!0,focusMode:!1,eyeCare:!1,avatar:"ğŸ‘¤",ttsVoicePreference:"natural",autoTraining:!0,showContextInCards:!0,geminiApiKey:""},updateCompletionProgress:()=>{},get(){const e=localStorage.getItem("userSettings");return e?{...this.defaults,...JSON.parse(e)}:{...this.defaults}},save(e){localStorage.setItem("userSettings",JSON.stringify(e))},update(e,o){const c=this.get();c[e]=o,this.save(c),this.updateCompletionProgress()}},O={get(){const e=localStorage.getItem("userProgress");return e?JSON.parse(e):{xp:0,level:1,streak:0,gamesPlayed:0,totalScore:0,wordsLearned:0}},getXPForLevel(e){return Math.floor(100*Math.pow(1.5,e-1))}},_={init(){this.loadSettings(),this.loadProgress(),this.setupEventListeners(),this.setupRecommendations(),this.calculateStorageUsage(),this.populateAvatarGrid(),l.updateCompletionProgress=()=>this.updateCompletionProgress()},loadSettings(){const e=l.get(),o=document.getElementById("darkModeToggle");o&&(o.checked=e.darkMode,document.body.classList.toggle("dark-mode",e.darkMode)),document.querySelectorAll(".color-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-theme")===e.colorTheme)}),document.querySelectorAll(".font-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-size")===e.fontSize)});const i=document.getElementById("animationsToggle");i&&(i.checked=e.animations);const d=document.getElementById("soundEffectsToggle");d&&(d.checked=e.soundEffects);const g=document.getElementById("ttsSpeedSlider"),m=document.getElementById("ttsSpeedValue");g&&(g.value=String(e.ttsSpeed),m&&(m.textContent=`${e.ttsSpeed}%`));const f=document.getElementById("reminderToggle"),y=document.getElementById("reminderTimeItem"),p=document.getElementById("reminderTime");f&&(f.checked=e.reminderEnabled,y&&(y.style.display=e.reminderEnabled?"flex":"none")),p&&(p.value=e.reminderTime),document.querySelectorAll(".goal-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-goal")===String(e.dailyGoal))});const v=document.getElementById("autoPlayToggle");v&&(v.checked=e.autoPlay);const h=document.getElementById("showExamplesToggle");h&&(h.checked=e.showExamples);const S=document.getElementById("focusModeToggle");S&&(S.checked=e.focusMode),document.body.classList.toggle("focus-mode",e.focusMode);const I=document.getElementById("eyeCareToggle");I&&(I.checked=e.eyeCare),document.body.classList.toggle("eye-care-mode",e.eyeCare);const L=document.querySelector(".avatar-emoji");L&&(L.textContent=e.avatar),document.querySelectorAll(".voice-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-voice")===e.ttsVoicePreference)});const x=document.getElementById("autoTrainingToggle");x&&(x.checked=e.autoTraining);const B=document.getElementById("showContextToggle");B&&(B.checked=e.showContextInCards);const n=document.getElementById("geminiApiKey");n&&(n.value=e.geminiApiKey||""),this.updateTrainingWordsCount(),this.updateCompletionProgress()},loadProgress(){const e=O.get(),o=O.getXPForLevel(e.level),c=Math.min(100,e.xp/o*100),s=document.getElementById("userLevel"),i=document.getElementById("userXP"),d=document.getElementById("nextLevel"),g=document.getElementById("progressPercent"),m=document.getElementById("levelProgress"),f=document.getElementById("totalWords"),y=document.getElementById("currentStreak"),p=document.getElementById("gamesPlayed");s&&(s.textContent=String(e.level)),i&&(i.textContent=String(e.xp)),d&&(d.textContent=String(e.level+1)),g&&(g.textContent=`${Math.round(c)}%`),m&&(m.style.width=`${c}%`),f&&(f.textContent=String(e.wordsLearned)),y&&(y.textContent=String(e.streak)),p&&(p.textContent=String(e.gamesPlayed))},setupEventListeners(){var c,s,i,d,g,m,f,y,p,E,v,h,S,I,L,A,x,B;window.toggleSection=n=>{const t=document.querySelector(`[data-section="${n}"]`);t&&t.classList.toggle("expanded")},(c=document.getElementById("darkModeToggle"))==null||c.addEventListener("change",n=>{const t=n.target.checked;l.update("darkMode",t),document.body.classList.toggle("dark-mode",t),document.documentElement.classList.toggle("dark-mode",t),localStorage.setItem("darkMode",String(t)),t?(document.documentElement.style.setProperty("--settings-bg","#0d1117"),document.documentElement.style.setProperty("--settings-text","#e6edf3")):(document.documentElement.style.setProperty("--settings-bg","#f8fafc"),document.documentElement.style.setProperty("--settings-text","#1e293b")),r(t?"ğŸŒ™ "+a("toast.darkModeOn"):"â˜€ï¸ "+a("toast.darkModeOff"))}),(s=document.getElementById("mobileViewToggle"))==null||s.addEventListener("change",n=>{const t=n.target.checked;document.body.classList.toggle("mobile-view",t),localStorage.setItem("mobileView",String(t)),r(t?"ğŸ“± "+a("toast.mobileOn"):"ğŸ–¥ï¸ "+a("toast.mobileOff"))}),document.querySelectorAll(".color-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".color-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-theme")||"default";l.update("colorTheme",t),document.body.setAttribute("data-theme",t),r(`ğŸ¨ ${a("settings.themeChanged")} ${t}`)})}),document.querySelectorAll(".font-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".font-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-size")||"medium";l.update("fontSize",t),document.documentElement.style.fontSize=t==="small"?"14px":t==="large"?"18px":"16px",r("ğŸ”¤ "+a("toast.fontChanged"))})}),(i=document.getElementById("animationsToggle"))==null||i.addEventListener("change",n=>{const t=n.target.checked;l.update("animations",t),document.body.classList.toggle("reduce-motion",!t),r(t?"âœ¨ "+a("toast.animationsOn"):"âœ¨ "+a("toast.animationsOff"))});const e=document.querySelectorAll(".lang-card-premium");e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(w=>w.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-lang");M.setLanguage(t);const u={sv:"ğŸ‡¸ğŸ‡ª "+a("toast.langSv"),ar:"ğŸ‡¸ğŸ‡¦ "+a("toast.langAr"),both:"ğŸŒ "+a("toast.langBoth")};r(u[t])})});const o=M.getLanguage();e.forEach(n=>{n.getAttribute("data-lang")===o?n.classList.add("active"):n.classList.remove("active")}),(d=document.getElementById("soundEffectsToggle"))==null||d.addEventListener("change",n=>{const t=n.target.checked;l.update("soundEffects",t),localStorage.setItem("soundEnabled",String(t)),r(t?"ğŸ”Š "+a("toast.soundOn"):"ğŸ”‡ "+a("toast.soundOff"))}),(g=document.getElementById("ttsSpeedSlider"))==null||g.addEventListener("input",n=>{const t=parseInt(n.target.value);l.update("ttsSpeed",t);const u=document.getElementById("ttsSpeedValue");u&&(u.textContent=`${t}%`),localStorage.setItem("ttsSpeed",String(t))}),document.querySelectorAll(".voice-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".voice-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-voice");l.update("ttsVoicePreference",t),localStorage.setItem("ttsVoicePreference",t),r(`ğŸ—£ï¸ ${a("settings.voiceChanged")||"RÃ¶sttyp Ã¤ndrad"}`)})}),(m=document.getElementById("testTTSBtn"))==null||m.addEventListener("click",()=>{const n=l.get();if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance("Hej, vÃ¤lkommen till SnabbaLexin!");t.lang="sv-SE",t.rate=n.ttsSpeed/100,speechSynthesis.speak(t)}}),(f=document.getElementById("reminderToggle"))==null||f.addEventListener("change",n=>{const t=n.target.checked;l.update("reminderEnabled",t);const u=document.getElementById("reminderTimeItem");u&&(u.style.display=t?"flex":"none"),r(t?"â° "+a("settings.reminderOn"):"â° "+a("settings.reminderOff"))}),(y=document.getElementById("reminderTime"))==null||y.addEventListener("change",n=>{const t=n.target.value;l.update("reminderTime",t),r(`â° ${a("settings.reminderTimeSet")} ${t}`)}),document.querySelectorAll(".goal-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".goal-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=parseInt(n.getAttribute("data-goal")||"10");l.update("dailyGoal",t),r(`ğŸ¯ ${a("settings.dailyGoalSet")} ${t} ${a("settings.words")}`)})}),(p=document.getElementById("autoPlayToggle"))==null||p.addEventListener("change",n=>{const t=n.target.checked;l.update("autoPlay",t),r(t?"â–¶ï¸ "+a("settings.autoPlayOn"):"â–¶ï¸ "+a("settings.autoPlayOff"))}),(E=document.getElementById("showExamplesToggle"))==null||E.addEventListener("change",n=>{const t=n.target.checked;l.update("showExamples",t),r(t?"ğŸ’¬ "+a("settings.examplesOn"):"ğŸ’¬ "+a("settings.examplesOff"))}),(v=document.getElementById("focusModeToggle"))==null||v.addEventListener("change",n=>{const t=n.target.checked;l.update("focusMode",t),document.body.classList.toggle("focus-mode",t),localStorage.setItem("focusMode",String(t)),r(t?"ğŸ§˜ "+a("settings.focusOn"):"ğŸ§˜ "+a("settings.focusOff"))}),(h=document.getElementById("eyeCareToggle"))==null||h.addEventListener("change",n=>{const t=n.target.checked;l.update("eyeCare",t),document.body.classList.toggle("eye-care-mode",t),localStorage.setItem("eyeCareMode",String(t)),r(t?"ğŸ‘ï¸ "+a("settings.eyeCareOn"):"ğŸ‘ï¸ "+a("settings.eyeCareOff"))}),(S=document.getElementById("autoTrainingToggle"))==null||S.addEventListener("change",n=>{const t=n.target.checked;l.update("autoTraining",t),localStorage.setItem("autoTraining",String(t)),r(t?"ğŸ”„ Auto-trÃ¤ning Ã¤r pÃ¥ / Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…ÙØ¹Ù‘Ù„Ø©":"ğŸ”„ Auto-trÃ¤ning Ã¤r av / Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…ÙˆÙ‚ÙØ©")}),(I=document.getElementById("showContextToggle"))==null||I.addEventListener("change",n=>{const t=n.target.checked;l.update("showContextInCards",t),localStorage.setItem("showContextInCards",String(t)),r(t?"ğŸ“ Kontext visas / Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ù‚":"ğŸ“ Kontext dold / Ø§Ù„Ø³ÙŠØ§Ù‚ Ù…Ø®ÙÙŠ")}),(L=document.getElementById("geminiApiKey"))==null||L.addEventListener("input",n=>{const t=n.target.value;l.update("geminiApiKey",t),t.trim().length>0&&r("ğŸ”‘ "+a("settings.geminiApiSaved"))}),(A=document.getElementById("changeAvatarBtn"))==null||A.addEventListener("click",()=>{const n=document.getElementById("avatarModal");n&&n.classList.remove("hidden")}),(x=document.getElementById("resetAllBtn"))==null||x.addEventListener("click",()=>{k("âš ï¸",a("settings.resetTitle"),a("settings.resetMsg"),()=>{l.save(l.defaults),location.reload()})}),(B=document.getElementById("importFile"))==null||B.addEventListener("change",n=>{var u;const t=(u=n.target.files)==null?void 0:u[0];if(t){const w=new FileReader;w.onload=q=>{var P;try{const T=JSON.parse((P=q.target)==null?void 0:P.result);T.favorites&&localStorage.setItem("favorites",JSON.stringify(T.favorites)),T.progress&&localStorage.setItem("userProgress",JSON.stringify(T.progress)),r("âœ… "+a("settings.dataImported")),setTimeout(()=>location.reload(),1e3)}catch{r("âŒ "+a("settings.importError"),"error")}},w.readAsText(t)}})},setupRecommendations(){const e=l.get(),o=[];e.soundEffects||o.push({icon:"ğŸ”Š",textSv:"Aktivera ljud fÃ¶r bÃ¤ttre inlÃ¤rning",textAr:"ÙØ¹Ù‘Ù„ Ø§Ù„ØµÙˆØª Ù„ØªØ¹Ù„Ù… Ø£ÙØ¶Ù„",actionSv:"Aktivera",actionAr:"ØªÙØ¹ÙŠÙ„"}),e.reminderEnabled||o.push({icon:"â°",textSv:"SÃ¤tt en daglig pÃ¥minnelse",textAr:"Ø¶Ø¨Ø· ØªØ°ÙƒÙŠØ± ÙŠÙˆÙ…ÙŠ",actionSv:"Aktivera",actionAr:"ØªÙØ¹ÙŠÙ„"}),e.dailyGoal<10&&o.push({icon:"ğŸ¯",textSv:"Ã–ka ditt dagliga mÃ¥l fÃ¶r snabbare framsteg",textAr:"Ø²ÙŠØ§Ø¯Ø© Ù‡Ø¯ÙÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„ØªÙ‚Ø¯Ù… Ø£Ø³Ø±Ø¹",actionSv:"Ã„ndra",actionAr:"ØªØºÙŠÙŠØ±"});const c=document.getElementById("recommendationsList"),s=document.getElementById("recommendationsSection");if(o.length===0&&s){s.style.display="none";return}c&&(c.innerHTML="",o.forEach(i=>{const d=document.createElement("div");d.className="recommendation-item";const g=document.createElement("div");g.className="rec-item-icon",g.textContent=i.icon;const m=document.createElement("div");m.className="rec-item-text";const f=document.createElement("span");f.className="sv-text",f.textContent=i.textSv;const y=document.createElement("span");y.className="ar-text",y.textContent=i.textAr,m.appendChild(f),m.appendChild(y);const p=document.createElement("span");p.className="rec-item-action";const E=document.createElement("span");E.className="sv-text",E.textContent=i.actionSv;const v=document.createElement("span");v.className="ar-text",v.textContent=i.actionAr,p.appendChild(E),p.appendChild(v),d.appendChild(g),d.appendChild(m),d.appendChild(p),c.appendChild(d)}))},calculateStorageUsage(){let e=0;for(let g in localStorage)localStorage.hasOwnProperty(g)&&(e+=localStorage[g].length*2);const o=(e/1024).toFixed(1),s=Math.min(100,e/1024/5e3*100),i=document.getElementById("storageUsed"),d=document.getElementById("storageBar");i&&(i.textContent=`${o} KB`),d&&(d.style.width=`${s}%`)},populateAvatarGrid(){const e=["ğŸ‘¤","ğŸ§‘","ğŸ‘©","ğŸ‘¨","ğŸ§‘â€ğŸ¦±","ğŸ‘©â€ğŸ¦°","ğŸ§”","ğŸ‘§","ğŸ‘¦","ğŸ§’","ğŸ˜Š","ğŸ˜","ğŸ¤“","ğŸ¦Š","ğŸ±","ğŸ¶","ğŸ¦","ğŸ»","ğŸ¼","ğŸ¦‰","ğŸŒŸ","â­","ğŸ”¥","ğŸ’","ğŸ¯"],o=document.getElementById("avatarGrid"),c=l.get();o&&(o.innerHTML="",e.forEach(s=>{const i=document.createElement("button");i.className=`avatar-option ${s===c.avatar?"selected":""}`,i.dataset.avatar=s,i.textContent=s,i.addEventListener("click",()=>{const d=i.dataset.avatar||"ğŸ‘¤";l.update("avatar",d);const g=document.querySelector(".avatar-emoji");g&&(g.textContent=d),o.querySelectorAll(".avatar-option").forEach(m=>m.classList.remove("selected")),i.classList.add("selected"),$(),r("âœ… "+a("settings.avatarChanged"))}),o.appendChild(i)}))},updateCompletionProgress(){const e=l.get();let o=0;const c=10;e.darkMode!==void 0&&o++,e.colorTheme!=="default"&&o++,e.soundEffects&&o++,e.reminderEnabled&&o++,e.dailyGoal>5&&o++,e.ttsSpeed!==85&&o++,e.avatar!=="ğŸ‘¤"&&o++,e.showExamples&&o++,e.animations&&o++,o++;const s=Math.round(o/c*100),i=document.getElementById("completionPercent"),d=document.getElementById("completionProgress");i&&(i.textContent=`${s}%`),d&&(d.style.width=`${s}%`)},async updateTrainingWordsCount(){try{const{DictionaryDB:e}=await N(async()=>{const{DictionaryDB:s}=await import("./db-CUAitF01.js");return{DictionaryDB:s}},__vite__mapDeps([0,1]));await e.init();const o=await e.getTrainingWords(),c=document.getElementById("trainingWordsCount");c&&(c.textContent=String(o.length))}catch(e){console.error("[Settings] Failed to get training words count:",e)}}};function r(e,o="success"){V.show(e,{type:o})}function $(){const e=document.getElementById("avatarModal");e&&e.classList.add("hidden")}function b(){const e=document.getElementById("confirmModal");e&&e.classList.add("hidden")}function k(e,o,c,s){const i=document.getElementById("confirmModal"),d=document.getElementById("confirmIcon"),g=document.getElementById("confirmTitle"),m=document.getElementById("confirmMessage"),f=document.getElementById("confirmBtn");i&&d&&g&&m&&f&&(d.textContent=e,g.textContent=o,m.textContent=c,f.onclick=()=>{b(),s()},i.classList.remove("hidden"))}function F(){const e={favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),progress:JSON.parse(localStorage.getItem("userProgress")||"{}"),settings:JSON.parse(localStorage.getItem("userSettings")||"{}"),exportDate:new Date().toISOString()},o=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),c=URL.createObjectURL(o),s=document.createElement("a");s.href=c,s.download=`snabbalexin-backup-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(c),r("âœ… "+a("settings.dataExported"))}function K(){k("ğŸ—‘ï¸",a("settings.clearFavTitle"),a("settings.clearFavMsg"),()=>{localStorage.removeItem("favorites"),r("âœ… "+a("settings.favoritesCleared"))})}function W(){k("âš ï¸",a("settings.clearAllTitle"),a("settings.clearAllMsg"),()=>{localStorage.clear(),r("âœ… "+a("settings.allDataCleared")),setTimeout(()=>location.reload(),1e3)})}async function j(){k("ğŸ—‘ï¸","Rensa trÃ¤ningslistan / Ù…Ø³Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨","Vill du ta bort alla ord frÃ¥n trÃ¤ningslistan? / Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŸ",async()=>{try{const{DictionaryDB:e}=await N(async()=>{const{DictionaryDB:s}=await import("./db-CUAitF01.js");return{DictionaryDB:s}},__vite__mapDeps([0,1]));await e.init();const o=await e.getTrainingWords();for(const s of o){const i=Array.isArray(s)?s[0]:s.id;await e.updateTrainingStatus(i,!1)}const c=document.getElementById("trainingWordsCount");c&&(c.textContent="0"),r("âœ… TrÃ¤ningslistan Ã¤r rensad / ØªÙ… Ù…Ø³Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨")}catch(e){console.error("[Settings] Failed to clear training words:",e),r("âŒ Fel vid rensning / Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø³Ø­","error")}})}window.toggleSection=e=>{const o=document.querySelector(`[data-section="${e}"]`);o&&o.classList.toggle("expanded")};window.closeAvatarModal=$;window.closeConfirmModal=b;window.exportData=F;window.clearFavorites=K;window.clearAllData=W;window.clearTrainingWords=j;document.addEventListener("DOMContentLoaded",()=>{_.init();const e=document.querySelector(".settings-section");e&&e.classList.add("expanded"),R()});let C=null;function R(){const e=document.getElementById("installAppItem");if(!e)return;const o=/iPad|iPhone|iPod/.test(navigator.userAgent);if(window.matchMedia("(display-mode: standalone)").matches||navigator.standalone){e.style.display="none";return}if(o){e.style.display="flex",e.addEventListener("click",()=>{D()});return}window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),C=s,e.style.display="flex"}),e.addEventListener("click",async()=>{if(C){C.prompt();const{outcome:s}=await C.userChoice;s==="accepted"&&(r("âœ… Appen installeras! / ÙŠØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!"),e.style.display="none"),C=null}else o&&D()})}function D(){k("ğŸ“²","Installera SnabbaLexin / ØªØ«Ø¨ÙŠØª Ø³Ù†Ø§Ø¨Ø§ Ù„ÙƒØ³ÙŠÙ†",`1. Tryck pÃ¥ dela-knappen (â–¡â†‘) / Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
2. VÃ¤lj "LÃ¤gg till pÃ¥ hemskÃ¤rmen" / Ø§Ø®ØªØ± "Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
3. Tryck "LÃ¤gg till" / Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ©"`,()=>{b()})}
