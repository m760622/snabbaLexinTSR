var b=Object.defineProperty;var y=(s,e,t)=>e in s?b(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var l=(s,e,t)=>y(s,typeof e!="symbol"?e+"":e,t);const x={progressInterval:null,hide(){const s=document.getElementById("splashScreen");s&&(s.classList.add("hidden"),setTimeout(()=>s.remove(),600)),this.progressInterval&&clearInterval(this.progressInterval)},updateProgress(s){const e=document.getElementById("splashProgressBar"),t=document.getElementById("splashProgressText");e&&(e.style.animation="none",e.style.width=`${s}%`,e.style.transition="width 0.2s linear"),t&&(t.textContent=`${Math.round(s)}%`)},showUntilReady(s=800){const e=Date.now();let t=0;this.progressInterval=window.setInterval(()=>{const o=Math.random()*(t>80?1:4);t=Math.min(98,t+o),this.updateProgress(t)},100);const i=()=>{const o=Date.now()-e,a=Math.max(0,s-o);this.progressInterval&&clearInterval(this.progressInterval),this.updateProgress(100),setTimeout(()=>this.hide(),a)};document.readyState==="complete"?i():window.addEventListener("load",i)}};typeof window<"u"&&x.showUntilReady(1e3);const m={isSupported(){return"vibrate"in navigator},light(){this.isSupported()&&navigator.vibrate(10)},medium(){this.isSupported()&&navigator.vibrate(25)},success(){this.isSupported()&&navigator.vibrate([15,50,15])},error(){this.isSupported()&&navigator.vibrate([50,30,50,30,50])},selection(){this.isSupported()&&navigator.vibrate(5)}},w={createCardSkeleton(){const s=document.createElement("div");return s.className="skeleton-game-card",s.innerHTML=`
            <div class="skeleton-icon"></div>
            <div class="skeleton-title"></div>
            <div class="skeleton-subtitle"></div>
        `,s},showInContainer(s,e=6){s.innerHTML="";for(let t=0;t<e;t++){const i=this.createCardSkeleton();i.style.animationDelay=`${t*.1}s`,s.appendChild(i)}},hide(s){s.querySelectorAll(".skeleton-game-card").forEach((t,i)=>{setTimeout(()=>{t.classList.add("skeleton-fade-out"),setTimeout(()=>t.remove(),300)},i*50)})}},C={confetti(s={}){const t={...{particleCount:100,spread:70,origin:{x:.5,y:.6}},...s};typeof window.confetti=="function"?window.confetti(t):this.cssConfetti()},cssConfetti(){const s=document.createElement("div");s.className="confetti-container",s.innerHTML="";const e=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#dfe6e9","#fd79a8","#a29bfe"];for(let t=0;t<50;t++){const i=document.createElement("div");i.className="confetti-piece",i.style.cssText=`
                left: ${Math.random()*100}%;
                background: ${e[Math.floor(Math.random()*e.length)]};
                animation-delay: ${Math.random()*.5}s;
                animation-duration: ${2+Math.random()}s;
            `,s.appendChild(i)}document.body.appendChild(s),setTimeout(()=>s.remove(),3e3)},starBurst(s){const e=s.getBoundingClientRect(),t=e.left+e.width/2,i=e.top+e.height/2;for(let o=0;o<8;o++){const a=document.createElement("div");a.className="star-particle",a.textContent="‚≠ê",a.style.cssText=`
                left: ${t}px;
                top: ${i}px;
                --angle: ${o*45}deg;
            `,document.body.appendChild(a),setTimeout(()=>a.remove(),800)}},showSuccess(s="Bra jobbat!"){const e=document.createElement("div");e.className="success-overlay",e.innerHTML=`
            <div class="success-content">
                <div class="success-checkmark">
                    <svg viewBox="0 0 52 52">
                        <circle cx="26" cy="26" r="25" fill="none" stroke="#4ade80" stroke-width="2"/>
                        <path fill="none" stroke="#4ade80" stroke-width="3" d="M14 27l7 7 16-16"/>
                    </svg>
                </div>
                <p class="success-message">${s}</p>
            </div>
        `,document.body.appendChild(e),m.success(),setTimeout(()=>{e.classList.add("fade-out"),setTimeout(()=>e.remove(),300)},1500)},levelUp(s){const e=document.createElement("div");e.className="level-up-overlay",e.innerHTML=`
            <div class="level-up-content">
                <div class="level-up-icon">üéâ</div>
                <h2 class="level-up-title">Niv√• ${s}!</h2>
                <p class="level-up-subtitle">Du har g√•tt upp en niv√•!</p>
            </div>
        `,document.body.appendChild(e),this.confetti({particleCount:150,spread:100}),m.success(),setTimeout(()=>{e.classList.add("fade-out"),setTimeout(()=>e.remove(),500)},2500)},streakCelebration(s){const e=document.createElement("div");e.className="streak-overlay",e.innerHTML=`
            <div class="streak-content">
                <div class="streak-fire">üî•</div>
                <h2 class="streak-days">${s} dagar!</h2>
                <p class="streak-text">Din streak forts√§tter!</p>
            </div>
        `,document.body.appendChild(e),m.medium(),setTimeout(()=>{e.classList.add("fade-out"),setTimeout(()=>e.remove(),300)},2e3)}},f={steps:[{element:".games-header h1",title:"V√§lkommen! ŸÖÿ±ÿ≠ÿ®ÿßŸã!",text:"H√§r hittar du roliga spel f√∂r att l√§ra dig svenska.",position:"bottom"},{element:".stats-hero",title:"Din statistik",text:"F√∂lj dina framsteg: spelade spel, streak och po√§ng.",position:"bottom"},{element:".category-chips",title:"Kategorier",text:"Filtrera spel efter typ: ordf√∂rr√•d, grammatik, uttal...",position:"bottom"},{element:".game-card-item",title:"V√§lj ett spel",text:"Tryck p√• ett spel f√∂r att b√∂rja l√§ra dig!",position:"top"}],currentStep:0,overlay:null,shouldShow(){return localStorage.getItem("onboardingCompleted")!=="true"},start(){this.shouldShow()&&(this.currentStep=0,this.showStep())},showStep(){var n,r;const s=this.steps[this.currentStep];if(!s){this.complete();return}const e=document.querySelector(s.element);if(!e){this.nextStep();return}this.overlay&&this.overlay.remove(),this.overlay=document.createElement("div"),this.overlay.className="tour-overlay";const t=e.getBoundingClientRect(),i=document.createElement("div");i.className="tour-spotlight",i.style.cssText=`
            top: ${t.top-8}px;
            left: ${t.left-8}px;
            width: ${t.width+16}px;
            height: ${t.height+16}px;
        `;const o=document.createElement("div");o.className=`tour-tooltip tour-${s.position}`,o.innerHTML=`
            <h3>${s.title}</h3>
            <p>${s.text}</p>
            <div class="tour-actions">
                <button class="tour-skip">Hoppa √∂ver</button>
                <button class="tour-next">${this.currentStep<this.steps.length-1?"N√§sta":"Klar!"}</button>
            </div>
            <div class="tour-progress">
                ${this.steps.map((d,p)=>`<span class="tour-dot ${p===this.currentStep?"active":""}"></span>`).join("")}
            </div>
        `;const a=s.position==="bottom"?t.bottom+20:t.top-160;o.style.cssText=`
            top: ${a}px;
            left: ${Math.max(20,t.left+t.width/2-150)}px;
        `,this.overlay.appendChild(i),this.overlay.appendChild(o),document.body.appendChild(this.overlay),(n=o.querySelector(".tour-next"))==null||n.addEventListener("click",()=>{m.light(),this.nextStep()}),(r=o.querySelector(".tour-skip"))==null||r.addEventListener("click",()=>{this.complete()}),m.selection()},nextStep(){this.currentStep++,this.showStep()},complete(){this.overlay&&(this.overlay.classList.add("fade-out"),setTimeout(()=>{var s;return(s=this.overlay)==null?void 0:s.remove()},300)),localStorage.setItem("onboardingCompleted","true")},reset(){localStorage.removeItem("onboardingCompleted")}},g={addRipple(s){s.addEventListener("click",e=>{const t=s.getBoundingClientRect(),i=e.clientX-t.left,o=e.clientY-t.top,a=document.createElement("span");a.className="ripple-effect",a.style.cssText=`left: ${i}px; top: ${o}px;`,s.appendChild(a),m.light(),setTimeout(()=>a.remove(),600)})},addPressEffect(s){s.addEventListener("touchstart",()=>{s.style.transform="scale(0.95)",m.selection()},{passive:!0}),s.addEventListener("touchend",()=>{s.style.transform=""},{passive:!0})},init(){document.querySelectorAll(".game-card-item").forEach(s=>{this.addRipple(s),this.addPressEffect(s)}),document.querySelectorAll("button, .btn, .back-btn").forEach(s=>{this.addPressEffect(s)})}},T={isEnabled:!1,startY:0,isPulling:!1,init(s,e){if(this.isEnabled)return;this.isEnabled=!0;let t=null;s.addEventListener("touchstart",i=>{s.scrollTop===0&&(this.startY=i.touches[0].clientY,this.isPulling=!0)},{passive:!0}),s.addEventListener("touchmove",i=>{if(!this.isPulling)return;const a=i.touches[0].clientY-this.startY;a>0&&a<150&&(t||(t=document.createElement("div"),t.className="pull-refresh-indicator",t.innerHTML='<div class="pull-spinner"></div>',s.prepend(t)),t.style.height=`${a}px`,t.style.opacity=String(Math.min(a/80,1)))},{passive:!0}),s.addEventListener("touchend",async()=>{t&&t.offsetHeight>=80&&(t.classList.add("refreshing"),m.medium(),await e()),t&&(t.style.height="0",setTimeout(()=>{t==null||t.remove(),t=null},300)),this.isPulling=!1},{passive:!0})}};class S{constructor(e,t="#7dd3fc"){l(this,"canvas");l(this,"ctx");l(this,"animationId",null);l(this,"bars",[]);l(this,"barCount",48);l(this,"isActive",!1);l(this,"color","#7dd3fc");l(this,"secondaryColor","#4ade80");l(this,"mode","liquid");l(this,"analyser",null);l(this,"dataArray",null);l(this,"phase",0);const i=document.getElementById(e);if(!i)throw new Error("Visualizer container not found");this.canvas=document.createElement("canvas"),this.canvas.className="audio-visualizer-canvas",i.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.color=t,this.initBars(),this.resize(),window.addEventListener("resize",()=>this.resize())}initBars(){this.bars=Array(this.barCount).fill(0).map(()=>Math.random()*5+2)}resize(){const e=window.devicePixelRatio||1,t=this.canvas.parentElement.getBoundingClientRect(),i=t.width>0?t.width:300,o=t.height>0?t.height:60;this.canvas.width=i*e,this.canvas.height=o*e,this.ctx.scale(e,e),this.canvas.style.width=`${i}px`,this.canvas.style.height=`${o}px`}setMode(e){this.mode=e}connectAnalyser(e){this.analyser=e,this.dataArray=new Uint8Array(e.frequencyBinCount)}start(){this.isActive||(this.isActive=!0,this.animate())}stop(){this.isActive=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.initBars(),this.draw()}animate(){this.isActive&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.updateBars(),this.draw(),this.phase+=.05,this.animationId=requestAnimationFrame(()=>this.animate()))}updateBars(){if(this.analyser&&this.dataArray){this.analyser.getByteFrequencyData(this.dataArray);const e=Math.floor(this.dataArray.length/this.barCount);for(let t=0;t<this.barCount;t++){const i=this.dataArray[t*e]/255;this.bars[t]+=(i*40-this.bars[t])*.3}}else for(let e=0;e<this.barCount;e++){const t=Math.random()*25+5;this.bars[e]+=(t-this.bars[e])*.2}}draw(){const e=this.canvas.width/(window.devicePixelRatio||1),t=this.canvas.height/(window.devicePixelRatio||1);this.mode==="liquid"?this.drawLiquidWave(e,t):this.mode==="circle"?this.drawCircleWave(e,t):this.drawBars(e,t)}drawLiquidWave(e,t){const i=t/2,o=this.ctx.createLinearGradient(0,0,e,0);o.addColorStop(0,this.color),o.addColorStop(.5,this.secondaryColor),o.addColorStop(1,this.color),this.ctx.fillStyle=o,this.ctx.beginPath(),this.ctx.moveTo(0,i);for(let a=0;a<=this.barCount;a++){const n=a/this.barCount*e,r=this.isActive?this.bars[a%this.barCount]:3,d=i-r-Math.sin(this.phase+a*.3)*5;a===0?this.ctx.moveTo(n,d):this.ctx.quadraticCurveTo(n-e/this.barCount/2,d-3,n,d)}this.ctx.lineTo(e,i),this.ctx.lineTo(0,i),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(0,i);for(let a=0;a<=this.barCount;a++){const n=a/this.barCount*e,r=this.isActive?this.bars[a%this.barCount]:3,d=i+r+Math.sin(this.phase+a*.3)*5;a===0?this.ctx.moveTo(n,d):this.ctx.quadraticCurveTo(n-e/this.barCount/2,d+3,n,d)}this.ctx.lineTo(e,i),this.ctx.lineTo(0,i),this.ctx.closePath(),this.ctx.fill()}drawCircleWave(e,t){const i=e/2,o=t/2,a=Math.min(e,t)/4,n=this.ctx.createRadialGradient(i,o,0,i,o,a*2);n.addColorStop(0,this.secondaryColor),n.addColorStop(1,this.color),this.ctx.strokeStyle=n,this.ctx.lineWidth=3,this.ctx.beginPath();for(let r=0;r<this.barCount;r++){const d=r/this.barCount*Math.PI*2,p=this.isActive?this.bars[r]:5,c=a+p+Math.sin(this.phase+r*.2)*3,h=i+Math.cos(d)*c,u=o+Math.sin(d)*c;r===0?this.ctx.moveTo(h,u):this.ctx.lineTo(h,u)}this.ctx.closePath(),this.ctx.stroke()}drawBars(e,t){const i=this.barCount,o=3,a=(e-o*(i-1))/i,n=t-10;for(let r=0;r<i;r++){const d=this.isActive?this.bars[r]:3,p=Math.min(d*2.5,n),c=r*(a+o),h=t-p,u=this.ctx.createLinearGradient(c,t,c,h);u.addColorStop(0,"#22c55e"),u.addColorStop(.5,"#facc15"),u.addColorStop(1,"#ef4444"),this.ctx.fillStyle=u,this.ctx.beginPath();const v=a/2;this.ctx.moveTo(c,t),this.ctx.lineTo(c,h+v),this.ctx.arcTo(c,h,c+v,h,v),this.ctx.arcTo(c+a,h,c+a,h+v,v),this.ctx.lineTo(c+a,t),this.ctx.closePath(),this.ctx.fill(),p>n*.5&&(this.ctx.shadowColor="#22c55e",this.ctx.shadowBlur=10,this.ctx.fill(),this.ctx.shadowBlur=0)}this.ctx.globalAlpha=.15;for(let r=0;r<i;r++){const d=this.isActive?this.bars[r]:3,p=Math.min(d*.8,20),c=r*(a+o),h=t,u=this.ctx.createLinearGradient(c,t,c,t+p);u.addColorStop(0,"#22c55e"),u.addColorStop(1,"transparent"),this.ctx.fillStyle=u,this.ctx.fillRect(c,h,a,p)}this.ctx.globalAlpha=1}roundRect(e,t,i,o,a,n){o<2*n&&(n=o/2),a<2*n&&(n=a/2),e.beginPath(),e.moveTo(t+n,i),e.arcTo(t+o,i,t+o,i+a,n),e.arcTo(t+o,i+a,t,i+a,n),e.arcTo(t,i+a,t,i,n),e.arcTo(t,i,t+o,i,n),e.closePath()}}const M={levels:[{name:"bronze",minScore:50,label:"ü•â Bronze / ÿ®ÿ±ŸàŸÜÿ≤Ÿä",color:"#cd7f32"},{name:"silver",minScore:70,label:"ü•à Silver / ŸÅÿ∂Ÿä",color:"#c0c0c0"},{name:"gold",minScore:85,label:"ü•á Gold / ÿ∞Ÿáÿ®Ÿä",color:"#ffd700"},{name:"platinum",minScore:95,label:"üíé Platinum / ÿ®ŸÑÿßÿ™ŸäŸÜŸä",color:"#e5e4e2"}],getBadge(s){for(let e=this.levels.length-1;e>=0;e--)if(s>=this.levels[e].minScore)return this.levels[e];return null},renderBadge(s,e){const t=this.getBadge(s);if(!t)return;const i=document.createElement("div");i.className=`mastery-badge mastery-${t.name}`,i.style.cssText=`
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: linear-gradient(135deg, ${t.color}22, ${t.color}44);
            border: 2px solid ${t.color};
            color: ${t.color};
            font-weight: 700;
            animation: badge-pop 0.5s ease-out;
        `,i.innerHTML=t.label,e.appendChild(i);const o=document.createElement("style");o.textContent=`
            @keyframes badge-pop {
                0% { transform: scale(0); opacity: 0; }
                50% { transform: scale(1.2); }
                100% { transform: scale(1); opacity: 1; }
            }
        `,document.head.appendChild(o)}};class k{constructor(){l(this,"mediaRecorder",null);l(this,"audioChunks",[]);l(this,"isRecording",!1)}async start(){if(!this.isRecording)try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(e),this.audioChunks=[],this.mediaRecorder.ondataavailable=t=>{this.audioChunks.push(t.data)},this.mediaRecorder.start(),this.isRecording=!0,window.dispatchEvent(new CustomEvent("recorder-start"))}catch(e){console.error("Recording failed:",e);const t=window.showToast;t&&t('‚ùå <span class="sv-text">Mikrofon√•tkomst nekad</span><span class="ar-text">ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿßŸÑŸàÿµŸàŸÑ ŸÑŸÑŸÖŸäŸÉÿ±ŸàŸÅŸàŸÜ</span>',{type:"error"})}}stop(){return new Promise(e=>{!this.mediaRecorder||!this.isRecording||(this.mediaRecorder.onstop=()=>{const t=new Blob(this.audioChunks,{type:"audio/wav"});this.isRecording=!1,window.dispatchEvent(new CustomEvent("recorder-stop",{detail:{blob:t}})),e(t)},this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(t=>t.stop()))})}static async playBlob(e){const t=URL.createObjectURL(e);await new Audio(t).play()}}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{g.init()},500),setTimeout(()=>{f.start()},1e3)});typeof window<"u"&&(window.HapticFeedback=m,window.SkeletonLoader=w,window.Celebrations=C,window.OnboardingTour=f,window.MicroInteractions=g,window.PullToRefresh=T,window.AudioVisualizer=S,window.PronunciationRecorder=k);export{S as A,C,m as H,M,k as P};
