import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              *//* empty css              */import"./loader-DOLU1NFP.js";import"./games-utils-CmJc8SbM.js";import"./config-8gd_ljfe.js";import"./db-D9nATt-F.js";import"./i18n-BpwFYk4h.js";import"./toast-manager-DdtDDR9Z.js";console.log("wordleGame.ts LOADED");let g="",w=[],u="",C=!1,B=parseInt(localStorage.getItem("wordleStreak")||"0");function b(){localStorage.setItem("wordleStreak",B.toString())}window.wordleStreak=B;function L(s=0){if(typeof dictionaryData>"u"||dictionaryData.length===0){s<10?(console.warn(`Data not ready for Wordle. Retrying (${s+1}/10)...`),typeof showToast=="function"&&showToast("Laddar speldata... / Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...","info"),setTimeout(()=>L(s+1),500)):(console.error("Critical: Data failed to load for Wordle."),typeof showToast=="function"&&showToast("Kunde inte ladda data. Uppdatera sidan. / ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.","error"));return}const m=document.getElementById("wordleGrid"),d=document.getElementById("wordleKeyboard"),t=document.getElementById("wordleMessage"),r=document.getElementById("nextWordleBtn"),y=document.getElementById("wordleTypeFilter"),e=document.getElementById("wordleDifficulty"),n=(y==null?void 0:y.value)||"all",a=(e==null?void 0:e.value)||"medium";let l=5,p=5;a==="easy"?(l=4,p=4):a==="medium"?(l=5,p=5):a==="hard"&&(l=6,p=6),w=[],u="",C=!1,t&&(t.textContent=""),r&&(r.style.display="none"),m&&(m.innerHTML=""),d&&(d.innerHTML="");let E=null,S=0;for(;!E&&S<500;){const o=dictionaryData[Math.floor(Math.random()*dictionaryData.length)];o&&o[COL_SWE]&&o[COL_SWE].length>=l&&o[COL_SWE].length<=p&&!o[COL_SWE].includes(" ")&&!o[COL_SWE].includes("-")&&/^[a-zA-ZÃ¥Ã¤Ã¶Ã…Ã„Ã–]+$/.test(o[COL_SWE])&&(n!=="all"?o[COL_TYPE]&&o[COL_TYPE].toLowerCase().includes(n)&&(E=o):E=o),S++}if(!E){t&&(t.textContent="Kunde inte hitta ett ord. FÃ¶rsÃ¶k igen.");return}if(g=E[COL_SWE].toUpperCase(),console.log("Wordle Target:",g,"Difficulty:",a),m)for(let o=0;o<30;o++){const c=document.createElement("div");c.className="wordle-tile",m.appendChild(c)}d&&["QWERTYUIOPÃ…","ASDFGHJKLÃ–Ã„","ZXCVBNM"].forEach(o=>{const c=document.createElement("div");if(c.className="keyboard-row",o.split("").forEach(i=>{const f=document.createElement("button");f.className="key-btn",f.textContent=i,f.onclick=()=>h(i),f.dataset.key=i,c.appendChild(f)}),o==="ZXCVBNM"){const i=document.createElement("button");i.className="key-btn wide",i.textContent="ENTER",i.onclick=k,c.appendChild(i);const f=document.createElement("button");f.className="key-btn wide",f.textContent="âŒ«",f.onclick=()=>h("BACKSPACE"),c.prepend(f)}d.appendChild(c)}),document.onkeydown=o=>{const c=document.getElementById("wordleGame");if(!c||c.style.display==="none")return;const i=o.key.toUpperCase();i==="ENTER"?k():i==="BACKSPACE"?h("BACKSPACE"):/^[A-ZÃ…Ã„Ã–]$/.test(i)&&h(i)}}function h(s){C||(s==="BACKSPACE"?u=u.slice(0,-1):u.length<5&&(u+=s),T())}function T(){const s=document.getElementById("wordleGrid");if(!s)return;const d=w.length*5;for(let t=0;t<5;t++){const r=s.children[d+t];r&&(r.textContent="",r.classList.remove("typing"))}for(let t=0;t<u.length;t++){const r=s.children[d+t];r&&(r.textContent=u[t],r.classList.add("typing"))}}function k(){if(C)return;if(u.length!==5){typeof showToast=="function"&&showToast("Ordet mÃ¥ste ha 5 bokstÃ¤ver");return}const s=u;w.push(s);const m=(w.length-1)*5,d=document.getElementById("wordleGrid");if(!d)return;const t=g.split(""),r=s.split(""),y=Array(5).fill("absent");r.forEach((e,n)=>{e===t[n]&&(y[n]="correct",t[n]=null,r[n]=null)}),r.forEach((e,n)=>{if(e&&t.includes(e)){y[n]="present";const a=t.indexOf(e);t[a]=null}}),y.forEach((e,n)=>{const a=d.children[m+n];a&&setTimeout(()=>{a.classList.add(e);const l=document.querySelector(`.key-btn[data-key="${s[n]}"]`);if(l){const p=l.classList.contains("correct")?"correct":l.classList.contains("present")?"present":"absent";e==="correct"?l.className="key-btn correct":e==="present"&&p!=="correct"?l.className="key-btn present":e==="absent"&&p==="absent"?l.className="key-btn absent":e==="absent"&&!l.classList.contains("correct")&&!l.classList.contains("present")&&l.classList.add("absent")}},n*100)}),s===g?(C=!0,setTimeout(()=>{typeof showToast=="function"&&showToast("Grattis! Du gissade ordet! ðŸŽ‰ / ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!","success"),typeof playSuccessSound=="function"&&playSuccessSound(),typeof triggerConfetti=="function"&&triggerConfetti();const e=document.getElementById("wordleMessage");e&&(e.textContent="Du vann! / ÙØ²Øª!");const n=document.getElementById("nextWordleBtn");if(n&&(n.style.display="block"),B++,b(),typeof saveScore=="function"){const a=(6-w.length+1)*10;saveScore("wordle",a)}},1500)):w.length>=6?(C=!0,setTimeout(()=>{typeof showToast=="function"&&showToast(`TyvÃ¤rr! Ordet var ${g}`,"error");const e=document.getElementById("wordleMessage");e&&(e.textContent=`RÃ¤tt svar: ${g}`);const n=document.getElementById("nextWordleBtn");n&&(n.style.display="block"),B=0,b()},1500)):u=""}window.startWordleGame=L;window.handleWordleInput=h;window.updateWordleGrid=T;window.submitWordleGuess=k;
