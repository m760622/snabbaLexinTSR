var X=Object.defineProperty;var D=(t,e,n)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var v=(t,e,n)=>D(t,typeof e!="symbol"?e+"":e,n);import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./loader-DOLU1NFP.js";import{A as y}from"./config-8gd_ljfe.js";import"./pwa-Bn3RWWLO.js";import"./db-D9nATt-F.js";const L=y.COLUMNS.SWEDISH,B=y.COLUMNS.ARABIC,U=y.COLUMNS.TYPE,F=y.COLUMNS.EXAMPLE_SWE,Y=y.COLUMNS.EXAMPLE_ARB;let O=[],r=[],h=null,c=null;window.addEventListener("resize",()=>{c=null,h=null});let C=0,E=0,u=0,m=null,f=0,g=!1,x="all",p=0,T=0,b="easy",k=[];const P=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",P);P==="dark"&&document.body.classList.add("dark-mode");function H(){return new Promise(t=>{const e=()=>{typeof dictionaryData<"u"&&Array.isArray(dictionaryData)&&dictionaryData.length>0?t(dictionaryData):setTimeout(e,100)};e()})}async function _(){try{k=await H();const e=()=>{l.init(),l.resume(),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("click",e),document.addEventListener("touchstart",e),S()}catch(t){console.error("Error initializing memory game:",t)}}function S(){q(),J(),nt()}function q(){O=[],r=[],C=0,E=0,u=0,u=0,g=!1,f=0,p=0,T=0,m&&(clearInterval(m),m=null),w()}function z(){let t=k.filter(n=>n[L]&&n[B]);x!=="all"&&(t=t.filter(n=>(n[U]||"").toLowerCase().includes(x)));const e=b==="hard"?12:6;return G(t).slice(0,e)}function G(t){const e=[...t];for(let n=e.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[e[n],e[s]]=[e[s],e[n]]}return e}function J(){const t=document.getElementById("memoryGrid");if(!t)return;t.innerHTML="",t.style.gridTemplateColumns="repeat(4, 1fr)";const e=z(),n=[];e.forEach((o,a)=>{n.push({text:o[L],pairId:a,isArabic:!1,wordData:o}),n.push({text:o[B],pairId:a,isArabic:!0,wordData:o})}),G(n).forEach((o,a)=>{const i=document.createElement("div");i.className="card",i.dataset.pairId=String(o.pairId),i.dataset.index=String(a),i.style.animationDelay=`${a*.05}s`,i.style.animation="cardEntrance 0.5s ease-out forwards",i.addEventListener("animationend",()=>{i.style.animation=""});const d=o.isArabic&&o.text.length<7;i.innerHTML=`
            <div class="face front"></div>
            <div class="face back ${o.isArabic?"arabic":""} ${d?"is-short":""}">
                <div class="card-content">${o.text}</div>
            </div>
        `,i.addEventListener("click",()=>K(i,o)),i.addEventListener("mouseenter",()=>{c=i.getBoundingClientRect(),h=i}),i.addEventListener("mousemove",I=>{if(h!==i||i.classList.contains("flipped")||i.classList.contains("matched")||!c)return;const W=I.clientX-c.left,R=I.clientY-c.top;requestAnimationFrame(()=>{const M=c.width/2,A=c.height/2,V=(R-A)/A*-10,$=(W-M)/M*10;i.style.transform=`perspective(1000px) rotateX(${V}deg) rotateY(${$}deg) scale(1.05)`})}),i.addEventListener("mouseleave",()=>{h===i&&(h=null,c=null),!i.classList.contains("flipped")&&!i.classList.contains("matched")&&(i.style.transform="")}),t.appendChild(i),O.push(i)})}function j(t,e){if(typeof window.confetti=="function"){const n=t/window.innerWidth,s=e/window.innerHeight;window.confetti({particleCount:30,spread:40,startVelocity:20,origin:{x:n,y:s},colors:["#34d399","#22d3ee","#fbbf24"]})}}function K(t,e){if(!(g||t.classList.contains("flipped")||t.classList.contains("matched"))&&(t.style.transform="",t.classList.add("flipped"),r.push(t),l.playFlip(),r.length===2)){g=!0,E++,w();const[n,s]=r,o=n.dataset.pairId,a=s.dataset.pairId;o===a?Q(e.wordData):Z()}}function Q(t){const e=Date.now();e-T<5e3?p++:p=1,T=e,setTimeout(()=>{r.forEach(a=>{a.classList.add("matched");const i=a.getBoundingClientRect();j(i.left+i.width/2,i.top+i.height/2)}),C++;const n=100+Math.max(0,50-E*2),s=(p-1)*50;u+=n+s,tt(t,p),l.playMatch(),l.speak(t[L]),r=[],g=!1,w(),C===(b==="hard"?12:6)&&et()},500)}function Z(){setTimeout(()=>{r.forEach(t=>{t.classList.add("shake"),setTimeout(()=>{t.classList.remove("shake","flipped")},500)}),l.playWrong(),r=[],g=!1},1e3)}function tt(t,e=0){const n=document.getElementById("feedbackToast"),s=document.getElementById("ftWord"),o=document.getElementById("ftSentenceSwe"),a=document.getElementById("ftSentenceArb");if(n&&s&&o&&a){let i=t[L];e>1&&(i+=` (COMBO x${e}!)`),s.textContent=i,o.textContent=t[F]||"",a.textContent=t[Y]||"",n.classList.add("visible"),setTimeout(()=>{n.classList.remove("visible")},2500)}}function et(){m&&(clearInterval(m),m=null);const t=document.getElementById("gameOverModal"),e=document.getElementById("finalScore"),n=document.getElementById("finalMoves"),s=document.getElementById("finalTime");t&&e&&n&&s&&(e.textContent=String(u),n.textContent=String(E),s.textContent=N(f),t.classList.add("visible"),st(),l.playWin()),ot()}function nt(){m=setInterval(()=>{f++,w()},1e3)}function N(t){const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`}function w(){const t=document.getElementById("scoreValue"),e=document.getElementById("movesValue"),n=document.getElementById("timerValue");t&&(t.textContent=String(u)),e&&(e.textContent=String(E)),n&&(n.textContent=N(f))}class it{constructor(){v(this,"ctx",null);v(this,"enabled",!0);v(this,"synthesis");this.synthesis=window.speechSynthesis,this.enabled=localStorage.getItem("memory_sound_enabled")!=="false"}init(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext)),this.ctx.state==="suspended"&&this.ctx.resume(),this.updateMuteIcon()}resume(){this.ctx&&this.ctx.state==="suspended"&&this.ctx.resume()}toggle(){this.enabled=!this.enabled,localStorage.setItem("memory_sound_enabled",String(this.enabled)),this.updateMuteIcon()}updateMuteIcon(){const e=document.getElementById("soundToggleBtn");e&&(e.innerHTML=this.enabled?"ðŸ”Š":"ðŸ”‡",e.classList.toggle("muted",!this.enabled))}playFlip(){!this.enabled||!this.ctx||(this.playTone(400,"sine",.1,0,.05),this.playTone(600,"triangle",.05,.05,.02))}playMatch(){!this.enabled||!this.ctx||(this.playTone(523.25,"sine",.4,0,.1),this.playTone(659.25,"sine",.4,.1,.1),this.playTone(783.99,"sine",.6,.2,.1),this.playTone(1046.5,"sine",.8,.3,.05))}playWrong(){!this.enabled||!this.ctx||(this.playTone(300,"sawtooth",.3,0,.05),this.playTone(280,"sawtooth",.3,.1,.05))}playWin(){if(!this.enabled||!this.ctx)return;[523.25,659.25,783.99,1046.5,1318.51,1567.98].forEach((n,s)=>{this.playTone(n,"sine",.6,s*.15,.1)})}playTone(e,n,s,o,a){if(!this.ctx)return;const i=this.ctx.createOscillator(),d=this.ctx.createGain();i.type=n,i.frequency.setValueAtTime(e,this.ctx.currentTime+o),d.gain.setValueAtTime(0,this.ctx.currentTime+o),d.gain.linearRampToValueAtTime(a,this.ctx.currentTime+o+.02),d.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+o+s),i.connect(d),d.connect(this.ctx.destination),i.start(this.ctx.currentTime+o),i.stop(this.ctx.currentTime+o+s+.1)}speak(e,n="sv-SE"){if(!this.enabled)return;this.synthesis.cancel();const s=new SpeechSynthesisUtterance(e);s.lang=n,s.rate=.9,s.pitch=1;const a=this.synthesis.getVoices().find(i=>i.lang.includes(n));a&&(s.voice=a),this.synthesis.speak(s)}}const l=new it;window.toggleSound=()=>l.toggle();function st(){typeof window.confetti=="function"&&window.confetti({particleCount:150,spread:70,origin:{y:.6}})}function ot(){try{const t=JSON.parse(localStorage.getItem("memoryGameStats")||"{}");t.gamesPlayed=(t.gamesPlayed||0)+1,t.bestScore=Math.max(t.bestScore||0,u),t.bestTime=t.bestTime?Math.min(t.bestTime,f):f,localStorage.setItem("memoryGameStats",JSON.stringify(t))}catch(t){console.error("Error saving stats:",t)}}function at(t,e){x=t,document.querySelectorAll("#categorySelector .pill").forEach(n=>n.classList.remove("active")),e.classList.add("active"),S()}function ct(t,e){b=t,document.querySelectorAll("#difficultySelector .pill").forEach(n=>n.classList.remove("active")),e.classList.add("active"),S()}function rt(){const t=document.getElementById("gameOverModal");t&&t.classList.remove("visible"),S()}window.selectCategory=at;window.setDifficulty=ct;window.restartGame=rt;document.addEventListener("DOMContentLoaded",_);window.addEventListener("dictionaryLoaded",_);
