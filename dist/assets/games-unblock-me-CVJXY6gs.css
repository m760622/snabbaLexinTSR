:root{--bg-color: #5d4037;--board-bg: #8d6e63;--block-normal: #deb887;--block-target: #e53935;--block-fixed: #3e2723;--border-color: #3e2723;--text-color: #efebe9;--shadow: 0 4px 6px rgba(0, 0, 0, .3);--cell-size: 55px;--gap: 4px;--header-bg: rgba(62, 39, 35, .9);--header-border: #a1887f}body.night-mode{--bg-color: #0f0c29;--board-bg: rgba(255, 255, 255, .05);--block-normal: #263238;--block-target: #ff4081;--block-fixed: #000000;--border-color: #7b1fa2;--text-color: #e1bee7;--shadow: 0 0 20px rgba(123, 31, 162, .6);--header-bg: rgba(15, 12, 41, .9);--header-border: #7b1fa2}body.night-mode{background-image:radial-gradient(white,rgba(255,255,255,.2) 2px,transparent 3px),radial-gradient(white,rgba(255,255,255,.15) 1px,transparent 2px),radial-gradient(white,rgba(255,255,255,.1) 2px,transparent 3px),linear-gradient(to bottom,#0f0c29,#302b63,#24243e);background-size:550px 550px,350px 350px,250px 250px,100% 100%;background-position:0 0,40px 60px,130px 270px,0 0}body.night-mode #board{background-image:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid rgba(255,255,255,.1);box-shadow:0 0 30px #00ffff1a,inset 0 0 20px #00000080}body.night-mode .block{box-shadow:0 0 5px #00e5ff,inset 0 0 10px #000c;border:1px solid #00e5ff;background-image:none}body.night-mode .block.target{box-shadow:0 0 15px #ff4081,inset 0 0 10px #00000080;border:1px solid #ff4081;background-image:none}body.night-mode .block.fixed{box-shadow:inset 0 0 15px red;border:1px solid #b71c1c;background-image:repeating-linear-gradient(45deg,#000 0,#000 10px,#1a1a1a 10px,#1a1a1a 20px)}body.night-mode .exit-arrow{text-shadow:0 0 10px #fff,0 0 20px #00e5ff}body.night-mode .btn{background:#7b1fa2cc;box-shadow:0 0 10px #7b1fa2;border:1px solid #e1bee7}body.night-mode .btn:active{box-shadow:0 0 5px #7b1fa2}body.night-mode .info-bar{background:#00000080;border:1px solid rgba(255,255,255,.1)}*{box-sizing:border-box;-webkit-user-select:none;user-select:none;touch-action:none}body{margin:0;padding:0;background-color:var(--bg-color);color:var(--text-color);font-family:Inter,Tajawal,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;overflow:hidden;background-image:url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%238d6e63' fill-opacity='0.1' fill-rule='evenodd'%3E%3Cpath d='M0 40L40 0H20L0 20M40 40V20L20 40'/%3E%3C/g%3E%3C/svg%3E")}body.iphone-view{max-width:393px;margin:2rem auto;border:12px solid #333;border-radius:50px;min-height:calc(100vh - 4rem);box-shadow:0 0 50px #00000080;overflow-x:hidden;position:relative}body.iphone-view:before{content:"";position:absolute;top:12px;left:50%;transform:translate(-50%);width:120px;height:35px;background-color:#000;border-bottom-left-radius:20px;border-bottom-right-radius:20px;z-index:1000;pointer-events:none}header{width:100%;max-width:400px;display:flex;justify-content:space-between;align-items:center;padding:15px;background:var(--header-bg);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border-bottom:2px solid var(--header-border);box-shadow:var(--shadow);position:fixed;top:0;z-index:2001}h1{margin:0;font-size:1.2rem;color:#fff;text-shadow:1px 1px 2px #000}.icon-btn{background:none;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:5px}#game-container{margin-top:60px;position:relative;padding:10px;background:#4e342e;border-radius:8px;box-shadow:inset 0 0 10px #00000080,0 10px 20px #0006;border:4px solid #3e2723}#board{width:calc(6 * var(--cell-size) + 7 * var(--gap));height:calc(6 * var(--cell-size) + 7 * var(--gap));background:var(--board-bg);position:relative;border-radius:4px;background-image:repeating-linear-gradient(45deg,rgba(255,255,255,.05) 0px,rgba(255,255,255,.05) 2px,transparent 2px,transparent 10px)}.block{position:absolute;background:var(--block-normal);border-radius:4px;box-shadow:inset 2px 2px 5px #fff6,inset -2px -2px 5px #0003,2px 2px 4px #0000004d;border:1px solid rgba(0,0,0,.2);transition:transform .1s;cursor:grab;display:flex;justify-content:center;align-items:center}.block:after{content:"";position:absolute;width:60%;height:60%;border:1px solid rgba(0,0,0,.1);border-radius:2px}.block.target{background-color:var(--block-target);background-image:repeating-linear-gradient(45deg,rgba(0,0,0,.1) 0px,rgba(0,0,0,.1) 2px,transparent 2px,transparent 8px)}.block.horizontal{background-image:repeating-linear-gradient(0deg,rgba(0,0,0,.05) 0px,rgba(0,0,0,.05) 1px,transparent 1px,transparent 8px)}.block.vertical{background-image:repeating-linear-gradient(90deg,rgba(0,0,0,.05) 0px,rgba(0,0,0,.05) 1px,transparent 1px,transparent 8px)}.block.fixed{background-color:var(--block-fixed);cursor:default;box-shadow:inset 0 0 10px #00000080;background-image:radial-gradient(circle at center,rgba(255,255,255,.05) 0%,transparent 50%)}.block.fixed:before{content:"Ã—";color:#fff3;font-size:20px}.block:active:not(.fixed){cursor:grabbing;transform:scale(.98)}.exit-gate{position:absolute;right:-14px;top:calc(2 * var(--cell-size) + 3 * var(--gap));width:14px;height:calc(1 * var(--cell-size));background:#0000004d;border-top:2px solid #3e2723;border-bottom:2px solid #3e2723}.exit-arrow{position:absolute;right:-30px;top:calc(2 * var(--cell-size) + 3 * var(--gap) + var(--cell-size)/2 - 10px);color:#fff;font-size:20px;animation:pulse 1s infinite}@keyframes pulse{0%{transform:translate(0)}50%{transform:translate(5px)}to{transform:translate(0)}}.info-bar{display:flex;justify-content:space-between;width:100%;max-width:350px;margin-top:15px;padding:10px;background:#0003;border-radius:10px}.info-item{text-align:center}.info-label{font-size:.8rem;color:#bcaaa4;text-transform:uppercase}.info-value{font-size:1.2rem;font-weight:700;color:#fff}.stars{color:gold;letter-spacing:2px}.controls{margin-top:20px;display:flex;gap:15px}.btn{background:#6d4c41;color:#fff;border:none;padding:10px 20px;border-radius:20px;font-size:1rem;font-weight:700;box-shadow:0 4px #3e2723;cursor:pointer;transition:transform .1s,box-shadow .1s;display:flex;align-items:center;gap:8px}.btn:active{transform:translateY(4px);box-shadow:0 0 #3e2723}.btn.undo-btn{background:#ff9800}.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity .3s}.modal-overlay.active{opacity:1;pointer-events:auto}.modal-content{background:#fff;color:#333;padding:30px;border-radius:15px;text-align:center;width:90%;max-width:320px;box-shadow:0 10px 25px #00000080;transform:scale(.8);transition:transform .3s}.modal-overlay.active .modal-content{transform:scale(1)}.modal-title{font-size:1.5rem;margin-bottom:10px;color:#2e7d32}.level-complete-stars{font-size:2rem;color:gold;margin:10px 0}#start-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:#3e2723f2;z-index:2000;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:opacity .5s}#start-screen.hidden{opacity:0;pointer-events:none}.mode-card{background:#5d4037;border:2px solid #8d6e63;border-radius:15px;padding:20px;margin:10px;width:280px;text-align:center;cursor:pointer;transition:transform .2s,border-color .2s;box-shadow:0 5px 15px #0000004d}.mode-card:hover{transform:scale(1.05);border-color:#d7ccc8}.mode-title{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:5px}.mode-desc{color:#bcaaa4;font-size:.9rem}.block.ice-theme{background-color:#b3e5fc!important;border-color:#81d4fa!important}.block.ice-theme.target{background-color:#e53935!important}.block.ice-theme:after{background:linear-gradient(135deg,rgba(255,255,255,.4) 0%,transparent 100%);opacity:.5}body.night-mode #start-screen{background:#0f0c29f2}body.night-mode .mode-card{background:#1e1e2899;border-color:#7b1fa2;box-shadow:0 0 15px #7b1fa266}body.night-mode .mode-card:hover{border-color:#00e5ff;box-shadow:0 0 20px #00e5ff99}body.night-mode .mode-title{color:#e1bee7;text-shadow:0 0 5px #7b1fa2}.start-title{font-size:2.5rem;margin-bottom:30px;text-shadow:0 4px 10px rgba(0,0,0,.5)}.next-level-btn{margin:15px auto 0}.mobile-toggle-btn,#mobileToggle{background:linear-gradient(145deg,#1e1e2f,#151525)!important;border:none!important;border-radius:12px!important;width:44px!important;height:44px!important;display:flex!important;align-items:center!important;justify-content:center!important;cursor:pointer!important;color:#ffffffb3!important;padding:0!important;font-size:20px!important;box-shadow:5px 5px 10px #00000080,-2px -2px 6px #ffffff0d,inset 0 0 0 1px #ffffff0d!important;transition:all .15s ease!important;position:relative!important;margin-left:.5rem!important}.mobile-toggle-btn:hover,#mobileToggle:hover{color:#fff!important;transform:translateY(-1px)!important;box-shadow:6px 6px 12px #0009,-2px -2px 8px #ffffff14!important}.mobile-toggle-btn.active,#mobileToggle.active{background:linear-gradient(145deg,#151525,#1e1e2f)!important;color:#4ade80!important;box-shadow:inset 5px 5px 10px #0009,inset -2px -2px 6px #ffffff0d!important;transform:translateY(2px)!important}.mobile-toggle-btn svg,#mobileToggle svg{width:24px!important;height:24px!important;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));transition:transform .3s ease}.mobile-toggle-btn.active svg,#mobileToggle.active svg{filter:drop-shadow(0 1px 2px rgba(0,0,0,.5));transform:scale(.95)}body.focus-mode{background:#3e2723!important;background-image:none!important}body.focus-mode #game-container{box-shadow:0 4px 12px #0000004d!important}body.focus-mode #board{background-image:none!important}body.focus-mode .exit-arrow{animation:none!important}body.focus-mode .block{background-image:none!important;box-shadow:0 2px 4px #0003!important}body.focus-mode .block.target{background:#d32f2f!important;box-shadow:none!important}@media (prefers-reduced-motion: reduce){.block,.exit-arrow,.modal-content,#start-screen{transition:none!important;animation:none!important}}@media (max-width: 414px){:root{--cell-size: 50px}.btn{min-height:48px;padding:12px 24px}header{padding:12px 10px}h1{font-size:1rem}}.block:focus-visible,.btn:focus-visible{outline:3px solid #fff;outline-offset:2px}
