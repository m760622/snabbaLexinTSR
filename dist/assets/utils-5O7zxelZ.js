import{T as w}from"./toast-manager-DdtDDR9Z.js";const b={recognition:null,isListening:!1,onResult:null,isSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window},init(e){if(!this.isSupported())return console.warn("Voice search not supported in this browser"),!1;const s=window.SpeechRecognition||window.webkitSpeechRecognition;return this.recognition=new s,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.recognition.lang="sv-SE",this.onResult=e,this.recognition.onresult=r=>{const t=r.results.length-1,a=r.results[t][0].transcript,n=r.results[t].isFinal;this.onResult&&this.onResult(a,n)},this.recognition.onend=()=>{this.isListening=!1,this.updateUI(!1)},this.recognition.onerror=r=>{console.error("Voice search error:",r.error),this.isListening=!1,this.updateUI(!1),r.error==="not-allowed"?c("Mikrofon nekad / Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø±ÙÙˆØ¶ ðŸŽ¤âŒ"):r.error==="no-speech"&&c("Inget tal detekterat / Ù„Ù… ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù ØµÙˆØª ðŸ”‡")},!0},start(e="sv-SE"){if(!(!this.recognition&&!this.init(this.onResult))){this.recognition.lang=e;try{this.recognition.start(),this.isListening=!0,this.updateUI(!0)}catch(s){console.error("Voice start error:",s)}}},stop(){this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1,this.updateUI(!1))},toggle(e="sv-SE"){this.isListening?this.stop():this.start(e)},updateUI(e){const s=document.getElementById("voiceSearchBtn");s&&(s.classList.toggle("listening",e),s.setAttribute("aria-pressed",e.toString()))}};function y(e,s,r,t,a,n){const i=(e||"").trim(),o=(n||"").toLowerCase().replace(".",""),l=a?a.replace(/[\.,]$/g,"").trim():"";if(r&&r.length>10)return{s:r,a:t||s};if(l&&l.length>3&&!l.toLowerCase().startsWith("se "))return{s:`${l.charAt(0).toUpperCase()+l.slice(1)} (${i}).`,a:s};let d="";return o.includes("verb")?d=`Att ${i.toLowerCase()} betyder att man gÃ¶r nÃ¥got.`:o.includes("subst")?d=`En ${i} Ã¤r en sak, person eller plats.`:o.includes("adj")?d=`${i} beskriver hur nÃ¥got Ã¤r eller ser ut.`:d="Ordet anvÃ¤nds i svenskan.",{s:d,a:s}}function k(e){return e?e.replace(/[\u064B-\u065F\u0670]/g,""):""}function c(e,s=1500){let r=1500,t="success";typeof s=="number"?r=s:typeof s=="object"&&(r=s.duration||1500,t=s.type||"success"),w.show(e,{type:t==="default"?"success":t,duration:r})}const h={apply(e,s,r=1,t=1.6){if(!e||!s)return;e.style.fontSize="",e.style.display="inline-block",e.style.width="auto";const a=e.parentElement;if(!a)return;const n=a.offsetWidth||a.clientWidth;if(n===0)return;let i=t;const o=.7,l=.05;if(r===1)for(e.style.whiteSpace="nowrap",e.style.fontSize=`${i}rem`;e.offsetWidth>n&&i>o;)i-=l,e.style.fontSize=`${i}rem`;else for(e.style.whiteSpace="normal",e.style.width="100%",e.style.display="block",e.style.fontSize=`${i}rem`,e.style.lineHeight="1.4";i>o;){const f=i*16*1.4*r+5;if(e.offsetHeight<=f)break;i-=l,e.style.fontSize=`${i}rem`}r===1&&(e.style.whiteSpace="",e.style.display="",e.style.width=""),e.style.lineHeight=i<1.1?"1.2":"1.4"},autoApply(){document.querySelectorAll("[data-auto-size]").forEach(e=>{const s=parseInt(e.dataset.maxLines||"1");this.apply(e,e.textContent||"",s)})},applyToContainer(e){if(!e)return;(e instanceof DocumentFragment?Array.from(e.querySelectorAll("[data-auto-size]")):e.querySelectorAll("[data-auto-size]")).forEach(r=>{const t=parseInt(r.dataset.maxLines||"1");this.apply(r,r.textContent||"",t)})}};if(typeof window<"u"){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>h.autoApply(),200)})}const m={init(){const e=localStorage.getItem("theme")||"dark";e==="auto"?this.applyAutoTheme(!1):(document.documentElement.setAttribute("data-theme",e),e==="dark"?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"));const s=localStorage.getItem("colorTheme")||"default";this.setColorTheme(s,!1)},isNightTime(){const e=new Date().getHours();return e>=18||e<7},applyAutoTheme(e=!0){const s=this.isNightTime(),r=s?"dark":"light";return document.documentElement.setAttribute("data-theme",r),s?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),e&&c(s?"Automatiskt mÃ¶rkt lÃ¤ge ðŸŒ™":"Automatiskt ljust lÃ¤ge â˜€ï¸"),r},toggle(){const s=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";return document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),s==="dark"?(document.body.classList.add("dark-mode"),c("MÃ¶rkt lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ðŸŒ™")):(document.body.classList.remove("dark-mode"),c("Ljust lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ â˜€ï¸")),s},setColorTheme(e,s=!0){e==="default"?document.documentElement.removeAttribute("data-color-theme"):document.documentElement.setAttribute("data-color-theme",e),localStorage.setItem("colorTheme",e),s&&c(e)}},u={init(){const e=localStorage.getItem("mobileView"),s=e===null?!0:e==="true";this.apply(s)},apply(e){e?(document.documentElement.classList.add("iphone-mode"),document.body.classList.add("iphone-view")):(document.documentElement.classList.remove("iphone-mode"),document.body.classList.remove("iphone-view"));const s=document.getElementById("mobileToggle")||document.getElementById("mobileViewToggle");s&&s.classList.toggle("active",e),localStorage.setItem("mobileView",e?"true":"false")},toggle(){const e=!document.body.classList.contains("iphone-view");return this.apply(e),c(e?"Mobilvy aktiverad / ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ðŸ“±":"Standardvy aktiverad / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ðŸ’»"),e}},g={ett:["rum","kar","hus","tak","golv","bord","berg","land","ljus","block","kort","slag","spel","verk","djur","krig","krÃ¶n","prov","test","tryck","vatten","fÃ¶nster","papper","system","arbete","centrum","museum","program","dokument","drÃ¥p","brott","mord","skap","Ã¤ktenskap","partnerskap"],en:["gÃ¥rd","vÃ¤g","gata","plats","dÃ¶rr","bil","maskin","station","ventil","motor","pump","kabel","tid","dag","natt","stad","ning","tion","sion","het","else","ande","ende","ment","itet","dom","ism","ist","are","ler","rer","nar","mark","feber","handel","misshandel","konvention","habilitering","akut","queen","plikt","hiss","nad","sjukdom"]},S={getBadge(e,s,r){const t=(s||"").toLowerCase(),a=(r||"").toLowerCase(),n=(e||"").toLowerCase().replace(".","").replace(" ","");if(t.match(/\w+ar[,\s]/)&&t.match(/\w+ade[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 1</span>';if(t.match(/\w+er[,\s]/)&&(t.match(/\w+de[,\s]/)||t.match(/\w+te[,\s]/)))return'<span class="grammar-badge grammar-verb">Gr. 2</span>';if(t.match(/\w+dde[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 3</span>';if(t.match(/\w+(it|its|ats|ett)[,\s]/)||t.match(/\w+(it|its|ats|ett)$/)||a.endsWith("as")&&t.match(/\w+ades[,\s]|\w+des[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 4</span>';if(n.includes("adj"))return'<span class="grammar-badge grammar-adj">Adj</span>';if(n.includes("adverb")||n==="adv")return'<span class="grammar-badge grammar-adv">Adv</span>';const i=t.split(",").map(o=>o.trim());if(i.length>=2){const o=i[1];if((o.endsWith("en")||o.endsWith("an"))&&!o.endsWith("et"))return'<span class="grammar-badge grammar-en">En</span>';if(o.endsWith("et"))return'<span class="grammar-badge grammar-ett">Ett</span>'}return t.startsWith("en ")||t.match(/\ben\s+/)?'<span class="grammar-badge grammar-en">En</span>':t.startsWith("ett ")||t.match(/\bett\s+/)?'<span class="grammar-badge grammar-ett">Ett</span>':n.includes("verb")?'<span class="grammar-badge grammar-verb">Verb</span>':n.includes("subst")?'<span class="grammar-badge grammar-en">Subst</span>':n.includes("prep")?'<span class="grammar-badge">Prep</span>':n.includes("konj")?'<span class="grammar-badge">Konj</span>':n.includes("pron")?'<span class="grammar-badge">Pron</span>':e&&e.length>0&&e.length<10?`<span class="grammar-badge">${e}</span>`:""}},L={getCategory(e,s="",r=""){const t=(e||"").toLowerCase().replace(".",""),a=(s||"").toLowerCase(),n=(r||"").toLowerCase();return n.match(/\w+ar[,\s]/)&&n.match(/\w+ade[,\s]/)||n.match(/\w+er[,\s]/)&&(n.match(/\w+de[,\s]/)||n.match(/\w+te[,\s]/))||n.match(/\w+dde[,\s]/)||n.match(/\w+(it|its|ats|ett)[,\s]/)||n.match(/\w+(it|its|ats|ett)$/)||a.endsWith("as")&&n.match(/\w+ades[,\s]|\w+des[,\s]/)?"verb":t.includes("verbmn")||t.includes("verb")&&s.includes(" ")?"phrasal":t==="verb"||t.includes("verb")?"verb":t.includes("subst")?"noun":t==="adj"||t.includes("adjektiv")?"adj":t==="adv"||t.includes("adverb")?"adv":t.includes("prep")?"prep":t.includes("konj")?"conj":t.includes("pron")?"pronoun":g.ett.some(i=>a.endsWith(i))||g.en.some(i=>a.endsWith(i))?"noun":"other"}};typeof window<"u"&&(window.VoiceSearchManager=b,window.showToast=c,window.TextSizeManager=h,window.ThemeManager=m,window.MobileViewManager=u,window.generateEducationalSentence=y,m.init(),u.init());function T(e,s){if(e.length===0)return s.length;if(s.length===0)return e.length;const r=[];for(let t=0;t<=s.length;t++)r[t]=[t];for(let t=0;t<=e.length;t++)r[0][t]=t;for(let t=1;t<=s.length;t++)for(let a=1;a<=e.length;a++)s.charAt(t-1)===e.charAt(a-1)?r[t][a]=r[t-1][a-1]:r[t][a]=Math.min(r[t-1][a-1]+1,Math.min(r[t][a-1]+1,r[t-1][a]+1));return r[s.length][e.length]}export{L as CategoryHelper,S as GrammarHelper,u as MobileViewManager,h as TextSizeManager,m as ThemeManager,b as VoiceSearchManager,y as generateEducationalSentence,g as learnedSuffixes,T as levenshteinDistance,k as normalizeArabic,c as showToast};
