const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/db-D9nATt-F.js","assets/config-8gd_ljfe.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{_ as D}from"./preload-helper-D7HrI6pR.js";import{T as q}from"./toast-manager-DdtDDR9Z.js";import{t as a,L as P}from"./i18n-BpwFYk4h.js";const l={defaults:{darkMode:!0,colorTheme:"default",fontSize:"medium",animations:!0,soundEffects:!0,ttsSpeed:85,reminderEnabled:!1,reminderTime:"18:00",dailyGoal:10,autoPlay:!1,showExamples:!0,focusMode:!1,eyeCare:!1,avatar:"ğŸ‘¤",ttsVoicePreference:"natural",autoTraining:!0,showContextInCards:!0},updateCompletionProgress:()=>{},get(){const e=localStorage.getItem("userSettings");return e?{...this.defaults,...JSON.parse(e)}:{...this.defaults}},save(e){localStorage.setItem("userSettings",JSON.stringify(e))},update(e,o){const i=this.get();i[e]=o,this.save(i),this.updateCompletionProgress()}},M={get(){const e=localStorage.getItem("userProgress");return e?JSON.parse(e):{xp:0,level:1,streak:0,gamesPlayed:0,totalScore:0,wordsLearned:0}},getXPForLevel(e){return Math.floor(100*Math.pow(1.5,e-1))}},V={init(){this.loadSettings(),this.loadProgress(),this.setupEventListeners(),this.setupRecommendations(),this.calculateStorageUsage(),this.populateAvatarGrid(),l.updateCompletionProgress=()=>this.updateCompletionProgress()},loadSettings(){const e=l.get(),o=document.getElementById("darkModeToggle");o&&(o.checked=e.darkMode,document.body.classList.toggle("dark-mode",e.darkMode)),document.querySelectorAll(".color-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-theme")===e.colorTheme)}),document.querySelectorAll(".font-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-size")===e.fontSize)});const c=document.getElementById("animationsToggle");c&&(c.checked=e.animations);const r=document.getElementById("soundEffectsToggle");r&&(r.checked=e.soundEffects);const g=document.getElementById("ttsSpeedSlider"),m=document.getElementById("ttsSpeedValue");g&&(g.value=String(e.ttsSpeed),m&&(m.textContent=`${e.ttsSpeed}%`));const f=document.getElementById("reminderToggle"),y=document.getElementById("reminderTimeItem"),p=document.getElementById("reminderTime");f&&(f.checked=e.reminderEnabled,y&&(y.style.display=e.reminderEnabled?"flex":"none")),p&&(p.value=e.reminderTime),document.querySelectorAll(".goal-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-goal")===String(e.dailyGoal))});const v=document.getElementById("autoPlayToggle");v&&(v.checked=e.autoPlay);const h=document.getElementById("showExamplesToggle");h&&(h.checked=e.showExamples);const S=document.getElementById("focusModeToggle");S&&(S.checked=e.focusMode),document.body.classList.toggle("focus-mode",e.focusMode);const I=document.getElementById("eyeCareToggle");I&&(I.checked=e.eyeCare),document.body.classList.toggle("eye-care-mode",e.eyeCare);const L=document.querySelector(".avatar-emoji");L&&(L.textContent=e.avatar),document.querySelectorAll(".voice-btn").forEach(t=>{t.classList.toggle("active",t.getAttribute("data-voice")===e.ttsVoicePreference)});const x=document.getElementById("autoTrainingToggle");x&&(x.checked=e.autoTraining);const n=document.getElementById("showContextToggle");n&&(n.checked=e.showContextInCards),this.updateTrainingWordsCount(),this.updateCompletionProgress()},loadProgress(){const e=M.get(),o=M.getXPForLevel(e.level),i=Math.min(100,e.xp/o*100),s=document.getElementById("userLevel"),c=document.getElementById("userXP"),r=document.getElementById("nextLevel"),g=document.getElementById("progressPercent"),m=document.getElementById("levelProgress"),f=document.getElementById("totalWords"),y=document.getElementById("currentStreak"),p=document.getElementById("gamesPlayed");s&&(s.textContent=String(e.level)),c&&(c.textContent=String(e.xp)),r&&(r.textContent=String(e.level+1)),g&&(g.textContent=`${Math.round(i)}%`),m&&(m.style.width=`${i}%`),f&&(f.textContent=String(e.wordsLearned)),y&&(y.textContent=String(e.streak)),p&&(p.textContent=String(e.gamesPlayed))},setupEventListeners(){var i,s,c,r,g,m,f,y,p,E,v,h,S,I,L,w,x;window.toggleSection=n=>{const t=document.querySelector(`[data-section="${n}"]`);t&&t.classList.toggle("expanded")},(i=document.getElementById("darkModeToggle"))==null||i.addEventListener("change",n=>{const t=n.target.checked;l.update("darkMode",t),document.body.classList.toggle("dark-mode",t),document.documentElement.classList.toggle("dark-mode",t),localStorage.setItem("darkMode",String(t)),t?(document.documentElement.style.setProperty("--settings-bg","#0d1117"),document.documentElement.style.setProperty("--settings-text","#e6edf3")):(document.documentElement.style.setProperty("--settings-bg","#f8fafc"),document.documentElement.style.setProperty("--settings-text","#1e293b")),d(t?"ğŸŒ™ "+a("toast.darkModeOn"):"â˜€ï¸ "+a("toast.darkModeOff"))}),(s=document.getElementById("mobileViewToggle"))==null||s.addEventListener("change",n=>{const t=n.target.checked;document.body.classList.toggle("mobile-view",t),localStorage.setItem("mobileView",String(t)),d(t?"ğŸ“± "+a("toast.mobileOn"):"ğŸ–¥ï¸ "+a("toast.mobileOff"))}),document.querySelectorAll(".color-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".color-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-theme")||"default";l.update("colorTheme",t),document.body.setAttribute("data-theme",t),d(`ğŸ¨ ${a("settings.themeChanged")} ${t}`)})}),document.querySelectorAll(".font-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".font-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-size")||"medium";l.update("fontSize",t),document.documentElement.style.fontSize=t==="small"?"14px":t==="large"?"18px":"16px",d("ğŸ”¤ "+a("toast.fontChanged"))})}),(c=document.getElementById("animationsToggle"))==null||c.addEventListener("change",n=>{const t=n.target.checked;l.update("animations",t),document.body.classList.toggle("reduce-motion",!t),d(t?"âœ¨ "+a("toast.animationsOn"):"âœ¨ "+a("toast.animationsOff"))});const e=document.querySelectorAll(".lang-card-premium");e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(k=>k.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-lang");P.setLanguage(t);const u={sv:"ğŸ‡¸ğŸ‡ª "+a("toast.langSv"),ar:"ğŸ‡¸ğŸ‡¦ "+a("toast.langAr"),both:"ğŸŒ "+a("toast.langBoth")};d(u[t])})});const o=P.getLanguage();e.forEach(n=>{n.getAttribute("data-lang")===o?n.classList.add("active"):n.classList.remove("active")}),(r=document.getElementById("soundEffectsToggle"))==null||r.addEventListener("change",n=>{const t=n.target.checked;l.update("soundEffects",t),localStorage.setItem("soundEnabled",String(t)),d(t?"ğŸ”Š "+a("toast.soundOn"):"ğŸ”‡ "+a("toast.soundOff"))}),(g=document.getElementById("ttsSpeedSlider"))==null||g.addEventListener("input",n=>{const t=parseInt(n.target.value);l.update("ttsSpeed",t);const u=document.getElementById("ttsSpeedValue");u&&(u.textContent=`${t}%`),localStorage.setItem("ttsSpeed",String(t))}),document.querySelectorAll(".voice-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".voice-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=n.getAttribute("data-voice");l.update("ttsVoicePreference",t),localStorage.setItem("ttsVoicePreference",t),d(`ğŸ—£ï¸ ${a("settings.voiceChanged")||"RÃ¶sttyp Ã¤ndrad"}`)})}),(m=document.getElementById("testTTSBtn"))==null||m.addEventListener("click",()=>{const n=l.get();if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance("Hej, vÃ¤lkommen till SnabbaLexin!");t.lang="sv-SE",t.rate=n.ttsSpeed/100,speechSynthesis.speak(t)}}),(f=document.getElementById("reminderToggle"))==null||f.addEventListener("change",n=>{const t=n.target.checked;l.update("reminderEnabled",t);const u=document.getElementById("reminderTimeItem");u&&(u.style.display=t?"flex":"none"),d(t?"â° "+a("settings.reminderOn"):"â° "+a("settings.reminderOff"))}),(y=document.getElementById("reminderTime"))==null||y.addEventListener("change",n=>{const t=n.target.value;l.update("reminderTime",t),d(`â° ${a("settings.reminderTimeSet")} ${t}`)}),document.querySelectorAll(".goal-btn").forEach(n=>{n.addEventListener("click",()=>{document.querySelectorAll(".goal-btn").forEach(u=>u.classList.remove("active")),n.classList.add("active");const t=parseInt(n.getAttribute("data-goal")||"10");l.update("dailyGoal",t),d(`ğŸ¯ ${a("settings.dailyGoalSet")} ${t} ${a("settings.words")}`)})}),(p=document.getElementById("autoPlayToggle"))==null||p.addEventListener("change",n=>{const t=n.target.checked;l.update("autoPlay",t),d(t?"â–¶ï¸ "+a("settings.autoPlayOn"):"â–¶ï¸ "+a("settings.autoPlayOff"))}),(E=document.getElementById("showExamplesToggle"))==null||E.addEventListener("change",n=>{const t=n.target.checked;l.update("showExamples",t),d(t?"ğŸ’¬ "+a("settings.examplesOn"):"ğŸ’¬ "+a("settings.examplesOff"))}),(v=document.getElementById("focusModeToggle"))==null||v.addEventListener("change",n=>{const t=n.target.checked;l.update("focusMode",t),document.body.classList.toggle("focus-mode",t),localStorage.setItem("focusMode",String(t)),d(t?"ğŸ§˜ "+a("settings.focusOn"):"ğŸ§˜ "+a("settings.focusOff"))}),(h=document.getElementById("eyeCareToggle"))==null||h.addEventListener("change",n=>{const t=n.target.checked;l.update("eyeCare",t),document.body.classList.toggle("eye-care-mode",t),localStorage.setItem("eyeCareMode",String(t)),d(t?"ğŸ‘ï¸ "+a("settings.eyeCareOn"):"ğŸ‘ï¸ "+a("settings.eyeCareOff"))}),(S=document.getElementById("autoTrainingToggle"))==null||S.addEventListener("change",n=>{const t=n.target.checked;l.update("autoTraining",t),localStorage.setItem("autoTraining",String(t)),d(t?"ğŸ”„ Auto-trÃ¤ning Ã¤r pÃ¥ / Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…ÙØ¹Ù‘Ù„Ø©":"ğŸ”„ Auto-trÃ¤ning Ã¤r av / Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…ÙˆÙ‚ÙØ©")}),(I=document.getElementById("showContextToggle"))==null||I.addEventListener("change",n=>{const t=n.target.checked;l.update("showContextInCards",t),localStorage.setItem("showContextInCards",String(t)),d(t?"ğŸ“ Kontext visas / Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ù‚":"ğŸ“ Kontext dold / Ø§Ù„Ø³ÙŠØ§Ù‚ Ù…Ø®ÙÙŠ")}),(L=document.getElementById("changeAvatarBtn"))==null||L.addEventListener("click",()=>{const n=document.getElementById("avatarModal");n&&n.classList.remove("hidden")}),(w=document.getElementById("resetAllBtn"))==null||w.addEventListener("click",()=>{C("âš ï¸",a("settings.resetTitle"),a("settings.resetMsg"),()=>{l.save(l.defaults),location.reload()})}),(x=document.getElementById("importFile"))==null||x.addEventListener("change",n=>{var u;const t=(u=n.target.files)==null?void 0:u[0];if(t){const k=new FileReader;k.onload=$=>{var b;try{const B=JSON.parse((b=$.target)==null?void 0:b.result);B.favorites&&localStorage.setItem("favorites",JSON.stringify(B.favorites)),B.progress&&localStorage.setItem("userProgress",JSON.stringify(B.progress)),d("âœ… "+a("settings.dataImported")),setTimeout(()=>location.reload(),1e3)}catch{d("âŒ "+a("settings.importError"),"error")}},k.readAsText(t)}})},setupRecommendations(){const e=l.get(),o=[];e.soundEffects||o.push({icon:"ğŸ”Š",textSv:"Aktivera ljud fÃ¶r bÃ¤ttre inlÃ¤rning",textAr:"ÙØ¹Ù‘Ù„ Ø§Ù„ØµÙˆØª Ù„ØªØ¹Ù„Ù… Ø£ÙØ¶Ù„",actionSv:"Aktivera",actionAr:"ØªÙØ¹ÙŠÙ„"}),e.reminderEnabled||o.push({icon:"â°",textSv:"SÃ¤tt en daglig pÃ¥minnelse",textAr:"Ø¶Ø¨Ø· ØªØ°ÙƒÙŠØ± ÙŠÙˆÙ…ÙŠ",actionSv:"Aktivera",actionAr:"ØªÙØ¹ÙŠÙ„"}),e.dailyGoal<10&&o.push({icon:"ğŸ¯",textSv:"Ã–ka ditt dagliga mÃ¥l fÃ¶r snabbare framsteg",textAr:"Ø²ÙŠØ§Ø¯Ø© Ù‡Ø¯ÙÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„ØªÙ‚Ø¯Ù… Ø£Ø³Ø±Ø¹",actionSv:"Ã„ndra",actionAr:"ØªØºÙŠÙŠØ±"});const i=document.getElementById("recommendationsList"),s=document.getElementById("recommendationsSection");if(o.length===0&&s){s.style.display="none";return}i&&(i.innerHTML="",o.forEach(c=>{const r=document.createElement("div");r.className="recommendation-item";const g=document.createElement("div");g.className="rec-item-icon",g.textContent=c.icon;const m=document.createElement("div");m.className="rec-item-text";const f=document.createElement("span");f.className="sv-text",f.textContent=c.textSv;const y=document.createElement("span");y.className="ar-text",y.textContent=c.textAr,m.appendChild(f),m.appendChild(y);const p=document.createElement("span");p.className="rec-item-action";const E=document.createElement("span");E.className="sv-text",E.textContent=c.actionSv;const v=document.createElement("span");v.className="ar-text",v.textContent=c.actionAr,p.appendChild(E),p.appendChild(v),r.appendChild(g),r.appendChild(m),r.appendChild(p),i.appendChild(r)}))},calculateStorageUsage(){let e=0;for(let g in localStorage)localStorage.hasOwnProperty(g)&&(e+=localStorage[g].length*2);const o=(e/1024).toFixed(1),s=Math.min(100,e/1024/5e3*100),c=document.getElementById("storageUsed"),r=document.getElementById("storageBar");c&&(c.textContent=`${o} KB`),r&&(r.style.width=`${s}%`)},populateAvatarGrid(){const e=["ğŸ‘¤","ğŸ§‘","ğŸ‘©","ğŸ‘¨","ğŸ§‘â€ğŸ¦±","ğŸ‘©â€ğŸ¦°","ğŸ§”","ğŸ‘§","ğŸ‘¦","ğŸ§’","ğŸ˜Š","ğŸ˜","ğŸ¤“","ğŸ¦Š","ğŸ±","ğŸ¶","ğŸ¦","ğŸ»","ğŸ¼","ğŸ¦‰","ğŸŒŸ","â­","ğŸ”¥","ğŸ’","ğŸ¯"],o=document.getElementById("avatarGrid"),i=l.get();o&&(o.innerHTML="",e.forEach(s=>{const c=document.createElement("button");c.className=`avatar-option ${s===i.avatar?"selected":""}`,c.dataset.avatar=s,c.textContent=s,c.addEventListener("click",()=>{const r=c.dataset.avatar||"ğŸ‘¤";l.update("avatar",r);const g=document.querySelector(".avatar-emoji");g&&(g.textContent=r),o.querySelectorAll(".avatar-option").forEach(m=>m.classList.remove("selected")),c.classList.add("selected"),N(),d("âœ… "+a("settings.avatarChanged"))}),o.appendChild(c)}))},updateCompletionProgress(){const e=l.get();let o=0;const i=10;e.darkMode!==void 0&&o++,e.colorTheme!=="default"&&o++,e.soundEffects&&o++,e.reminderEnabled&&o++,e.dailyGoal>5&&o++,e.ttsSpeed!==85&&o++,e.avatar!=="ğŸ‘¤"&&o++,e.showExamples&&o++,e.animations&&o++,o++;const s=Math.round(o/i*100),c=document.getElementById("completionPercent"),r=document.getElementById("completionProgress");c&&(c.textContent=`${s}%`),r&&(r.style.width=`${s}%`)},async updateTrainingWordsCount(){try{const{DictionaryDB:e}=await D(async()=>{const{DictionaryDB:s}=await import("./db-D9nATt-F.js");return{DictionaryDB:s}},__vite__mapDeps([0,1]));await e.init();const o=await e.getTrainingWords(),i=document.getElementById("trainingWordsCount");i&&(i.textContent=String(o.length))}catch(e){console.error("[Settings] Failed to get training words count:",e)}}};function d(e,o="success"){q.show(e,{type:o})}function N(){const e=document.getElementById("avatarModal");e&&e.classList.add("hidden")}function A(){const e=document.getElementById("confirmModal");e&&e.classList.add("hidden")}function C(e,o,i,s){const c=document.getElementById("confirmModal"),r=document.getElementById("confirmIcon"),g=document.getElementById("confirmTitle"),m=document.getElementById("confirmMessage"),f=document.getElementById("confirmBtn");c&&r&&g&&m&&f&&(r.textContent=e,g.textContent=o,m.textContent=i,f.onclick=()=>{A(),s()},c.classList.remove("hidden"))}function _(){const e={favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),progress:JSON.parse(localStorage.getItem("userProgress")||"{}"),settings:JSON.parse(localStorage.getItem("userSettings")||"{}"),exportDate:new Date().toISOString()},o=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=`snabbalexin-backup-${new Date().toISOString().split("T")[0]}.json`,s.click(),URL.revokeObjectURL(i),d("âœ… "+a("settings.dataExported"))}function F(){C("ğŸ—‘ï¸",a("settings.clearFavTitle"),a("settings.clearFavMsg"),()=>{localStorage.removeItem("favorites"),d("âœ… "+a("settings.favoritesCleared"))})}function W(){C("âš ï¸",a("settings.clearAllTitle"),a("settings.clearAllMsg"),()=>{localStorage.clear(),d("âœ… "+a("settings.allDataCleared")),setTimeout(()=>location.reload(),1e3)})}async function j(){C("ğŸ—‘ï¸","Rensa trÃ¤ningslistan / Ù…Ø³Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨","Vill du ta bort alla ord frÃ¥n trÃ¤ningslistan? / Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŸ",async()=>{try{const{DictionaryDB:e}=await D(async()=>{const{DictionaryDB:s}=await import("./db-D9nATt-F.js");return{DictionaryDB:s}},__vite__mapDeps([0,1]));await e.init();const o=await e.getTrainingWords();for(const s of o){const c=Array.isArray(s)?s[0]:s.id;await e.updateTrainingStatus(c,!1)}const i=document.getElementById("trainingWordsCount");i&&(i.textContent="0"),d("âœ… TrÃ¤ningslistan Ã¤r rensad / ØªÙ… Ù…Ø³Ø­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨")}catch(e){console.error("[Settings] Failed to clear training words:",e),d("âŒ Fel vid rensning / Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø³Ø­","error")}})}window.toggleSection=e=>{const o=document.querySelector(`[data-section="${e}"]`);o&&o.classList.toggle("expanded")};window.closeAvatarModal=N;window.closeConfirmModal=A;window.exportData=_;window.clearFavorites=F;window.clearAllData=W;window.clearTrainingWords=j;document.addEventListener("DOMContentLoaded",()=>{V.init();const e=document.querySelector(".settings-section");e&&e.classList.add("expanded"),R()});let T=null;function R(){const e=document.getElementById("installAppItem");if(!e)return;const o=/iPad|iPhone|iPod/.test(navigator.userAgent);if(window.matchMedia("(display-mode: standalone)").matches||navigator.standalone){e.style.display="none";return}if(o){e.style.display="flex",e.addEventListener("click",()=>{O()});return}window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),T=s,e.style.display="flex"}),e.addEventListener("click",async()=>{if(T){T.prompt();const{outcome:s}=await T.userChoice;s==="accepted"&&(d("âœ… Appen installeras! / ÙŠØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚!"),e.style.display="none"),T=null}else o&&O()})}function O(){C("ğŸ“²","Installera SnabbaLexin / ØªØ«Ø¨ÙŠØª Ø³Ù†Ø§Ø¨Ø§ Ù„ÙƒØ³ÙŠÙ†",`1. Tryck pÃ¥ dela-knappen (â–¡â†‘) / Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
2. VÃ¤lj "LÃ¤gg till pÃ¥ hemskÃ¤rmen" / Ø§Ø®ØªØ± "Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"
3. Tryck "LÃ¤gg till" / Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ©"`,()=>{A()})}
