import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./loader-CqI2jdYk.js";import"./pwa-Bn3RWWLO.js";import"./config-CfHoVMbv.js";import"./db-bEbbjtoI.js";const u=10,w=2,I=3;let d=[],o=0,m=0,v="easy",l=!1,c=0;const i={speakerBtn:()=>document.getElementById("speakerBtn"),wordInput:()=>document.getElementById("wordInput"),scoreEl:()=>document.getElementById("score"),currentEl:()=>document.getElementById("current"),progressFill:()=>document.getElementById("progressFill"),translationHint:()=>document.getElementById("translationHint"),resultOverlay:()=>document.getElementById("resultOverlay"),resultEmoji:()=>document.getElementById("resultEmoji"),resultText:()=>document.getElementById("resultText"),resultStats:()=>document.getElementById("resultStats")};function T(){let e=2,t=20;return v==="easy"?(e=2,t=5):v==="medium"?(e=4,t=8):(e=6,t=15),dictionaryData.filter(n=>{const r=n[w];return r&&r.length>=e&&r.length<=t&&/^[a-zA-ZÃ¥Ã¤Ã¶Ã…Ã„Ã– ]+$/.test(r)}).sort(()=>Math.random()-.5).slice(0,u).map(n=>({swedish:n[w].toLowerCase(),arabic:n[I]}))}function f(){if(o>=d.length)return;const e=i.speakerBtn();e==null||e.classList.add("playing"),TTSManager.speak(d[o].swedish,"sv"),setTimeout(()=>e==null?void 0:e.classList.remove("playing"),1500)}function E(){if(l||o>=d.length)return;const e=i.wordInput();if(!e)return;const t=e.value.trim().toLowerCase(),s=d[o].swedish.toLowerCase(),n=i.translationHint();if(t===s){m++;const r=i.scoreEl();r&&(r.textContent=String(m)),e.classList.add("correct"),l=!0,setTimeout(()=>{e.classList.remove("correct"),e.value="",n==null||n.classList.remove("visible"),c=0,o++,l=!1,o>=u?L():(y(),f())},1e3)}else e.classList.add("wrong"),c++,navigator.vibrate&&navigator.vibrate(100),c>=2&&n&&(n.textContent=`ğŸ’¡ ${d[o].arabic}`,n.classList.add("visible")),c>=3&&e?(e.value=s,l=!0,setTimeout(()=>{e.classList.remove("wrong"),e.value="",n==null||n.classList.remove("visible"),c=0,o++,l=!1,o>=u?L():(y(),f())},2e3)):setTimeout(()=>e.classList.remove("wrong"),500)}function y(){const e=i.currentEl(),t=i.progressFill();e&&(e.textContent=String(o+1)),t&&(t.style.width=`${o/u*100}%`)}function h(e,t){v=e,document.querySelectorAll(".diff-btn").forEach(s=>s.classList.remove("active")),t.classList.add("active"),p()}function L(){const e=Math.round(m/u*100),t=i.resultOverlay(),s=i.resultEmoji(),n=i.resultText(),r=i.resultStats();s&&(s.textContent=e>=80?"ğŸ†":e>=50?"ğŸ‘":"ğŸ“š"),n&&(n.textContent=`${e}% rÃ¤tt!`),r&&(r.innerHTML=`âœ… ${m} / ${u}`),t==null||t.classList.add("visible"),typeof ProgressManager<"u"&&ProgressManager.trackGame()}function p(){var n,r;(n=i.resultOverlay())==null||n.classList.remove("visible"),(r=i.translationHint())==null||r.classList.remove("visible"),o=0,m=0,c=0,l=!1;const e=i.scoreEl(),t=i.wordInput(),s=i.progressFill();e&&(e.textContent="0"),t&&(t.value=""),s&&(s.style.width="0%"),d=T(),y(),setTimeout(f,500)}function g(){typeof ThemeManager<"u"&&ThemeManager.init();const e=i.wordInput();e==null||e.addEventListener("keydown",t=>{t.key==="Enter"&&E()}),p()}window.playWord=f;window.checkAnswer=E;window.setDifficulty=h;window.startNewGame=p;let a=!1;function B(){if(a)return;if(typeof dictionaryData<"u"&&dictionaryData.length>0){console.log("[Listening] Data already available, starting game..."),a=!0,g();return}let e=0;const t=50,s=setInterval(()=>{if(a){clearInterval(s);return}e++,typeof dictionaryData<"u"&&dictionaryData.length>0?(console.log("[Listening] Data found via polling, starting game..."),clearInterval(s),a=!0,g()):e>=t&&(console.error("[Listening] Timeout waiting for dictionary data"),clearInterval(s))},100);console.log("[Listening] Waiting for dictionaryLoaded event..."),window.addEventListener("dictionaryLoaded",()=>{a||(console.log("[Listening] dictionaryLoaded event received, starting game..."),clearInterval(s),a=!0,g())},{once:!0})}document.addEventListener("DOMContentLoaded",B);
