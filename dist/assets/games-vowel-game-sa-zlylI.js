import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{s as U}from"./tts-CfZZetlp.js";import{d as re,e as ce}from"./games-utils-BqIcxbKk.js";import"./pwa-Bn3RWWLO.js";import"./config-BpQc0ceR.js";import"./i18n-BpwFYk4h.js";import"./toast-manager-DdtDDR9Z.js";const x=[{pair:["O","√ñ"],w1:"Boll",w2:"B√∂l",d1:"ŸÉÿ±ÿ©",d2:"ÿ¨ÿ∞ÿπ (ÿ¥ÿ¨ÿ±ÿ©)",e1:"‚öΩ",e2:"ü™µ",s1:"Kasta en boll.",s2:"Tr√§dets b√∂l √§r h√•rt.",frame:"B_l"},{pair:["O","√ñ"],w1:"Son",w2:"S√∂n",d1:"ÿßÿ®ŸÜ",d2:"ŸÉŸÜŸäÿ≥ÿ© (ŸÇÿØŸäŸÖ)",e1:"üë¶",e2:"‚õ™",s1:"Min son √§r glad.",s2:"Vi g√•r till s√∂n.",frame:"S_n"}];window.toggleMobileView=re;window.toggleFocusMode=ce;function k(e){const t=[...e];for(let n=t.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[t[n],t[o]]=[t[o],t[n]]}return t}let T=1,h=1,C=0,y=3,m=0,g=!1,G=!1,A=!1,p=1,r=null,u={1:!1,2:!1},I={1:!1,2:!1},E=[],H=null,F=0,L,M;const W=10,S=7,$=document.getElementById("optionsArea"),de=document.getElementById("feedbackOverlay"),me=document.getElementById("progressBar"),J=document.getElementById("levelBadge"),f=document.getElementById("cardFlipper"),X=document.getElementById("speedBadge"),R=document.getElementById("bossBanner"),Z=document.getElementById("livesContainer"),K=document.getElementById("startScreen"),N=document.getElementById("playArea"),b=document.querySelector(".game-container");let w=null;window.addEventListener("resize",()=>{w=null});b&&(b.addEventListener("mouseenter",()=>{w=b.getBoundingClientRect()}),b.addEventListener("mousemove",e=>{if(g||!G||!w)return;const t=e.clientX-w.left,n=e.clientY-w.top;requestAnimationFrame(()=>{const o=w.width/2,s=w.height/2,a=(n-s)/s*-5,l=(t-o)/o*5;f.style.transform=`rotateX(${a}deg) rotateY(${l}deg)`})}),b.addEventListener("mouseleave",()=>{w=null,f.style.transform="rotateX(0) rotateY(0)"}));function Q(){K&&(K.style.display="none"),N&&(N.style.display="block"),G=!0,ue()}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{Q()},100)});function ue(){let e=localStorage.getItem("vowelGameStage");T=e?parseInt(e):1,h=1,C=0,y=3,m=0,D(),fe(),ee()}function fe(){document.querySelectorAll(".drop-zone").forEach(e=>{const t=e;t.addEventListener("dragover",n=>{n.preventDefault(),t.classList.contains("solved")||(t.classList.add("drag-over"),n.dataTransfer&&(n.dataTransfer.dropEffect="move"))}),t.addEventListener("dragleave",()=>{t.classList.remove("drag-over")}),t.addEventListener("drop",n=>{var s;if(n.preventDefault(),t.classList.remove("drag-over"),t.classList.contains("solved"))return;const o=(s=n.dataTransfer)==null?void 0:s.getData("text/plain");if(o){const a=parseInt(t.dataset.slot);a===p&&L(o,null,a)}})})}function D(){Z.innerHTML="";for(let e=0;e<3;e++){const t=document.createElement("span");t.className=`heart ${e<y?"":"lost"}`,t.textContent="‚ù§Ô∏è",Z.appendChild(t)}}function ge(){document.body.classList.remove("skin-neon","skin-gold"),m>5&&document.body.classList.add("skin-neon"),C>2e3&&document.body.classList.add("skin-gold")}function ee(){if(g)return;if(T>W){ne(!0);return}A=h===S,document.body.classList.toggle("boss-mode",A),R.innerHTML=A?"üî• BOSS LEVEL üî•":"",R.style.display=A?"block":"none",J.textContent=`Stage ${T} ‚Ä¢ Level ${h}/${S}`;const e=(T-1)*S+h,t=W*S;if(me.style.width=`${e/t*100}%`,ge(),f.classList.remove("flipped"),f.classList.remove("slide-in"),f.offsetWidth,f.classList.add("slide-in"),X.classList.remove("visible"),de.classList.remove("visible"),document.getElementById("inlineCountdown").classList.remove("visible"),F=Date.now(),r=ye(),!r)return;u={1:!1,2:!1},I={1:!1,2:!1},p=1;const n=r;let o=n.w1.replace(new RegExp(n.pair[0],"i"),'<span class="missing-vowel"></span>'),s=n.w2.replace(new RegExp(n.pair[1],"i"),'<span class="missing-vowel"></span>');document.querySelector(".word-1-text").innerHTML=o,document.querySelector(".word-2-text").innerHTML=s,document.querySelector(".word-1-def").innerText=n.d1,document.querySelector(".word-2-def").innerText=n.d2,document.getElementById("emoji1").textContent=n.e1||"üì¶",document.getElementById("emoji2").textContent=n.e2||"üì¶",document.getElementById("backEmoji1").textContent=n.e1||"",document.getElementById("backEmoji2").textContent=n.e2||"",document.getElementById("sentence1").innerHTML=(n.s1||"").replace(new RegExp(n.w1.substr(0,3),"gi"),v=>`<em>${v}</em>`),document.getElementById("sentence2").innerHTML=(n.s2||"").replace(new RegExp(n.w2.substr(0,3),"gi"),v=>`<em>${v}</em>`),O();const a=["A","E","I","O","U","Y","√Ö","√Ñ","√ñ"],l=n.pair,c=a.filter(v=>!l.includes(v)),d=k(c).slice(0,2),ie=k([...l,...d]);$.innerHTML="",ie.forEach(v=>{const B=document.createElement("button");B.className="vowel-btn slide-in",B.textContent=v,B.draggable=!0,te(B,v),$.appendChild(B)})}function O(){[1,2].forEach(e=>{const t=document.getElementById(`slot${e}`);t.classList.remove("active-target","solved","wrong"),I[e]?t.classList.add("wrong"):u[e]?t.classList.add("solved"):e===p&&t.classList.add("active-target")})}function te(e,t){e.addEventListener("click",()=>he(t,e,p)),e.addEventListener("dragstart",n=>{e.classList.add("dragging"),n.dataTransfer.setData("text/plain",t),n.dataTransfer.effectAllowed="move"}),e.addEventListener("dragend",()=>{e.classList.remove("dragging"),document.querySelectorAll(".word-item").forEach(n=>n.classList.remove("drag-over"))}),e.addEventListener("touchstart",n=>pe(n,e),{passive:!1}),e.addEventListener("touchmove",ve,{passive:!1}),e.addEventListener("touchend",n=>we(n,e,t))}let i=null,q={x:0,y:0};function pe(e,t){if(g)return;const n=e.touches[0],o=t.getBoundingClientRect();q.x=n.clientX-o.left,q.y=n.clientY-o.top,t.classList.add("dragging"),i=t.cloneNode(!0),i.style.position="fixed",i.style.width=o.width+"px",i.style.height=o.height+"px",i.style.left=o.left+"px",i.style.top=o.top+"px",i.style.zIndex="2000",i.style.pointerEvents="none",i.style.opacity="0.9",i.style.transform="scale(1.1)",i.style.boxShadow="0 10px 20px rgba(0,0,0,0.5)",document.body.appendChild(i)}function ye(){let e=x.map((n,o)=>o).filter(n=>!E.includes(n));if(e.length===0){const n=E[E.length-1];E=[],e=x.map((o,s)=>s),e.length>1&&(e=e.filter(o=>o!==n))}const t=e[Math.floor(Math.random()*e.length)];return E.push(t),localStorage.setItem("vowelPlayedIndices",JSON.stringify(E)),x[t]}function ve(e){if(!i)return;e.preventDefault();const t=e.touches[0];i.style.left=t.clientX-q.x+"px",i.style.top=t.clientY-q.y+"px";const n=document.elementFromPoint(t.clientX,t.clientY),o=n?n.closest(".drop-zone"):null;document.querySelectorAll(".word-item").forEach(s=>s.classList.remove("drag-over")),o&&!o.classList.contains("solved")&&o.classList.add("drag-over")}function we(e,t,n){if(!i)return;const o=e.changedTouches[0],s=document.elementFromPoint(o.clientX,o.clientY),a=s?s.closest(".drop-zone"):null;if(document.body.removeChild(i),i=null,t.classList.remove("dragging"),document.querySelectorAll(".word-item").forEach(l=>l.classList.remove("drag-over")),a&&!a.classList.contains("solved")){const l=parseInt(a.dataset.slot);l===p&&L(n,t,l)}}function he(e,t,n){if(g||u[n])return;g=!0;const o=t.cloneNode(!0);o.classList.add("flying-clone");const s=t.getBoundingClientRect();o.style.left=s.left+"px",o.style.top=s.top+"px",document.body.appendChild(o);const l=document.getElementById(`slot${n}`).getBoundingClientRect();setTimeout(()=>{o.style.left=(l.left+l.left+l.width/2-25)/2+"px",o.style.top=(l.top+l.top+l.height/2-25)/2+"px",o.style.transform="scale(0.5)",o.style.opacity="0"},10),setTimeout(()=>{document.body.removeChild(o),g=!1,L(e,t,n)},400)}function Le(e,t,n,o){const s=document.createElement("div");s.className=`particle ${n}`,s.textContent=o,s.style.left=e+"px",s.style.top=t+"px";const a=Math.random()*Math.PI*2,l=50+Math.random()*100;s.style.setProperty("--tx",Math.cos(a)*l+"px"),s.style.setProperty("--ty",Math.sin(a)*l+"px"),document.body.appendChild(s),setTimeout(()=>s.remove(),1e3)}function P(e,t){const n=e.getBoundingClientRect(),o=n.left+n.width/2,s=n.top+n.height/2,a={star:{emojis:["‚≠ê","‚ú®","üåü"],count:8},flame:{emojis:["üî•","üí•","‚ö°"],count:12},sparkle:{emojis:["üíú","üí´","‚ú®"],count:10}},l=a[t]||a.star;for(let c=0;c<l.count;c++)setTimeout(()=>{const d=l.emojis[Math.floor(Math.random()*l.emojis.length)];Le(o,s,t,d)},c*50)}function Ee(e){const t=document.getElementById(`slot${e}`);m>=5?P(t,"flame"):m>=3?P(t,"sparkle"):P(t,"star")}function V(e){const t=e===1?r.w1:r.w2;t&&window.TTSManager&&window.TTSManager.speak(t,"sv-SE")}function Y(e){const t=document.createElement("div");t.className="combo-text",t.textContent=e;const n=document.getElementById("livesContainer").getBoundingClientRect();t.style.left=n.left-50+"px",t.style.top=n.top+20+"px",document.body.appendChild(t),setTimeout(()=>t.remove(),1e3)}L=(e,t,n)=>{var s;if(g)return;const o=n===1?r.pair[0]:r.pair[1];if(e===o){u[n]=!0,I[n]=!1;const a=document.getElementById(`slot${n}`);a.classList.add("solved"),a.classList.remove("wrong");const l=n===1?r.w1:r.w2;n===1?document.querySelector(".word-1-text").innerHTML=l:document.querySelector(".word-2-text").innerHTML=l,t&&t.classList.add("selected-correct"),V(n),Ee(n),m++,C+=100*(m>5?2:1),m%5===0?Y(`${m}x COMBO!`):m===3&&Y("HEATING UP!"),u[1]&&u[2]?M():(p=n===1?2:1,O(),m>3&&V(p))}else{t&&t.classList.add("selected-wrong"),y--,m=0,D(),(s=window.navigator)!=null&&s.vibrate&&window.navigator.vibrate(400),u[n]=!0,I[n]=!0,document.getElementById(`slot${n}`).classList.add("wrong");const c=r.frame.indexOf("_")===0?e.toUpperCase():e.toLowerCase(),d=r.frame.replace("_",c);n===1?document.querySelector(".word-1-text").innerText=d:document.querySelector(".word-2-text").innerText=d,y<=0?ne(!1):u[1]&&u[2]?M():(p=n===1?2:1,O())}};M=()=>{g=!0,Date.now()-F<5e3&&(X.classList.add("visible"),C+=50),R.style.display="none",setTimeout(()=>{f.classList.add("flipped")},600),setTimeout(()=>{Se()},1e3)};function Se(){const e=document.getElementById("inlineCountdown"),n=h===S?"NEXT STAGE":"NEXT LEVEL";e.innerHTML=`<div class="countdown-number" id="cNum">3</div><div class="countdown-text">${n}</div>`,e.classList.add("visible");let o=3;const s=e.querySelector("#cNum"),a=setInterval(()=>{if(o--,o>0)s.textContent=o.toString();else{if(clearInterval(a),e.classList.remove("visible"),h<S)h++;else{T++,h=1,y<5&&(y++,D(),Y("+1 ‚ù§Ô∏è"));try{localStorage.setItem("vowelGameStage",T.toString())}catch(l){console.error("Save failed",l)}xe()}g=!1,ee()}},1e3)}function ne(e){N.style.display="none";const t=document.getElementById("endScreen");t.style.display="block",t.querySelector("#endTitle").textContent=e?"Grattis! üëë":"Game Over üíÄ",t.querySelector("#endMessage").textContent=e?"Du har bem√§strat alla niv√•er!":"Dina liv tog slut.",t.querySelector("#finalScore").textContent=`Po√§ng: ${C}`}function xe(){const e=document.getElementById("celebrationOverlay");e.innerHTML="",e.style.display="block";for(let n=0;n<100;n++){const o=document.createElement("div");o.className="confetti",o.style.left=Math.random()*100+"%",o.style.backgroundColor=["#f00","#0f0","#00f","#ff0","#f0f","#0ff"][Math.floor(Math.random()*6)],o.style.animationDuration=Math.random()*2+1+"s",o.style.animationDelay=Math.random()+"s",e.appendChild(o)}const t=document.createElement("h1");t.textContent="STAGE CLEAR! üéâ",t.style.position="absolute",t.style.top="15%",t.style.left="50%",t.style.transform="translate(-50%, -50%) scale(0)",t.style.color="#fff",t.style.fontSize="3rem",t.style.textShadow="0 0 20px black",t.style.transition="transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)",e.appendChild(t),setTimeout(()=>t.style.transform="translate(-50%, -50%) scale(1)",100),setTimeout(()=>{e.style.display="none",e.innerHTML=""},3500)}let z=!1,_=0;const j=5;function oe(){const e=new Date;return`daily_${e.getFullYear()}_${e.getMonth()}_${e.getDate()}`}function se(){return localStorage.getItem(oe())==="completed"}function Te(){const e=new Date,t=e.getFullYear()*1e4+(e.getMonth()+1)*100+e.getDate();return[...x].sort((o,s)=>{const a=t*x.indexOf(o)%1e3,l=t*x.indexOf(s)%1e3;return a-l}).slice(0,j)}function le(){const e=document.getElementById("dailyBtn");e&&se()&&(e.classList.add("completed"),e.innerHTML="‚úÖ Avklarad idag!")}function Ce(){if(se())return;z=!0,_=Date.now(),document.getElementById("startScreen").style.display="none",document.getElementById("playArea").style.display="block",G=!0;const e=document.getElementById("dailyTimer");e.style.display="block",H=setInterval(()=>{const t=Math.floor((Date.now()-_)/1e3),n=Math.floor(t/60).toString().padStart(2,"0"),o=(t%60).toString().padStart(2,"0");e.textContent=`‚è±Ô∏è ${n}:${o}`},1e3),window.dailyPairs=Te(),window.dailyIndex=0,y=3,m=0,C=0,D(),ae()}function ae(){if(window.dailyIndex>=j){be();return}r=window.dailyPairs[window.dailyIndex],u={1:!1,2:!1},I={1:!1,2:!1},p=1,F=Date.now(),J.textContent=`Daily: ${window.dailyIndex+1}/${j}`,f.classList.remove("flipped"),X.classList.remove("visible");const e=r;let t=e.w1.replace(new RegExp(e.pair[0],"i"),'<span class="missing-vowel"></span>'),n=e.w2.replace(new RegExp(e.pair[1],"i"),'<span class="missing-vowel"></span>');document.querySelector(".word-1-text").innerHTML=t,document.querySelector(".word-2-text").innerHTML=n,document.querySelector(".word-1-def").innerText=e.d1,document.querySelector(".word-2-def").innerText=e.d2,document.getElementById("emoji1").textContent=e.e1||"üì¶",document.getElementById("emoji2").textContent=e.e2||"üì¶",O();const o=["A","E","I","O","U","Y","√Ö","√Ñ","√ñ"],s=e.pair,a=k(o.filter(c=>!s.includes(c))).slice(0,2),l=k([...s,...a]);$.innerHTML="",l.forEach(c=>{const d=document.createElement("button");d.className="vowel-btn slide-in",d.textContent=c,d.draggable=!0,te(d,c),$.appendChild(d)})}function Be(){window.dailyIndex++,setTimeout(()=>{f.classList.add("flipped")},600),setTimeout(()=>{ae()},1500)}function be(){H&&clearInterval(H),document.getElementById("dailyTimer").style.display="none",localStorage.setItem(oe(),"completed"),y=Math.min(y+3,5),D();const e=document.getElementById("dailyBadge");e.classList.add("visible");const t=Math.floor((Date.now()-_)/1e3),n=Math.floor(t/60),o=t%60;e.innerHTML=`üèÜ Dagens Utmaning Avklarad!<br><span style="font-size:1.2rem;">Tid: ${n}:${o.toString().padStart(2,"0")}</span><br><span style="font-size:2rem;">+3 ‚ù§Ô∏è</span>`,setTimeout(()=>{e.classList.remove("visible"),z=!1,document.getElementById("playArea").style.display="none",document.getElementById("startScreen").style.display="flex",le()},2e3)}const Ie=M;M=()=>{z?Be():Ie()};document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("theme")||"dark";if(document.documentElement.setAttribute("data-theme",e),window.toggleMobileView=function(){document.documentElement.classList.toggle("iphone-mode"),document.body.classList.toggle("iphone-view");const t=document.body.classList.contains("iphone-view");localStorage.setItem("mobileView",t?"true":"false");const n=document.getElementById("mobileToggle");n&&n.classList.toggle("active",t)},localStorage.getItem("mobileView")==="true"){document.documentElement.classList.add("iphone-mode"),document.body.classList.add("iphone-view");const t=document.getElementById("mobileToggle");t&&t.classList.add("active")}le()});const Me=L;L=(e,t,n)=>{Me(e,t,n)};console.log("Vowel Game Loaded");window.startGame=Q;window.startDailyChallenge=Ce;window.handleAnswer=L;window.playAudioForSlot=V;function De(e){window.TTSManager?window.TTSManager.speak(e,"sv-SE"):typeof U=="function"&&U(e)}window.playVowelDemo=De;
