import{T as b}from"./toast-manager-DdtDDR9Z.js";const w={recognition:null,isListening:!1,onResult:null,isSupported(){return"webkitSpeechRecognition"in window||"SpeechRecognition"in window},init(e){if(!this.isSupported())return console.warn("Voice search not supported in this browser"),!1;const t=window.SpeechRecognition||window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.recognition.lang="sv-SE",this.onResult=e,this.recognition.onresult=r=>{const s=r.results.length-1,i=r.results[s][0].transcript,a=r.results[s].isFinal;this.onResult&&this.onResult(i,a)},this.recognition.onend=()=>{this.isListening=!1,this.updateUI(!1)},this.recognition.onerror=r=>{console.error("Voice search error:",r.error),this.isListening=!1,this.updateUI(!1),r.error==="not-allowed"?l("Mikrofon nekad / Ø§Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ† Ù…Ø±ÙÙˆØ¶ ðŸŽ¤âŒ"):r.error==="no-speech"&&l("Inget tal detekterat / Ù„Ù… ÙŠØªÙ… Ø§ÙƒØªØ´Ø§Ù ØµÙˆØª ðŸ”‡")},!0},start(e="sv-SE"){if(!(!this.recognition&&!this.init(this.onResult))){this.recognition.lang=e;try{this.recognition.start(),this.isListening=!0,this.updateUI(!0)}catch(t){console.error("Voice start error:",t)}}},stop(){this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1,this.updateUI(!1))},toggle(e="sv-SE"){this.isListening?this.stop():this.start(e)},updateUI(e){const t=document.getElementById("voiceSearchBtn");t&&(t.classList.toggle("listening",e),t.setAttribute("aria-pressed",e.toString()))}};function y(e,t,r,s,i,a){const n=(e||"").trim(),o=(a||"").toLowerCase().replace(".",""),c=i?i.replace(/[\.,]$/g,"").trim():"";if(r&&r.length>10)return{s:r,a:s||t};if(c&&c.length>3&&!c.toLowerCase().startsWith("se "))return{s:`${c.charAt(0).toUpperCase()+c.slice(1)} (${n}).`,a:t};let d="";return o.includes("verb")?d=`Att ${n.toLowerCase()} betyder att man gÃ¶r nÃ¥got.`:o.includes("subst")?d=`En ${n} Ã¤r en sak, person eller plats.`:o.includes("adj")?d=`${n} beskriver hur nÃ¥got Ã¤r eller ser ut.`:d="Ordet anvÃ¤nds i svenskan.",{s:d,a:t}}function v(e){return e?e.replace(/[\u064B-\u065F\u0670]/g,""):""}function l(e,t=1500){let r=1500,s="success";typeof t=="number"?r=t:typeof t=="object"&&(r=t.duration||1500,s=t.type||"success"),b.show(e,{type:s==="default"?"success":s,duration:r})}const h={apply(e,t,r=1,s=1.6){if(!e||!t)return;e.style.fontSize="",e.style.display="inline-block",e.style.width="auto";const i=e.parentElement;if(!i)return;const a=i.offsetWidth||i.clientWidth;if(a===0)return;let n=s;const o=.7,c=.05;if(r===1)for(e.style.whiteSpace="nowrap",e.style.fontSize=`${n}rem`;e.offsetWidth>a&&n>o;)n-=c,e.style.fontSize=`${n}rem`;else for(e.style.whiteSpace="normal",e.style.width="100%",e.style.display="block",e.style.fontSize=`${n}rem`,e.style.lineHeight="1.4";n>o;){const f=n*16*1.4*r+5;if(e.offsetHeight<=f)break;n-=c,e.style.fontSize=`${n}rem`}r===1&&(e.style.whiteSpace="",e.style.display="",e.style.width=""),e.style.lineHeight=n<1.1?"1.2":"1.4"},autoApply(){document.querySelectorAll("[data-auto-size]").forEach(e=>{const t=parseInt(e.dataset.maxLines||"1");this.apply(e,e.textContent||"",t)})},applyToContainer(e){if(!e)return;(e instanceof DocumentFragment?Array.from(e.querySelectorAll("[data-auto-size]")):e.querySelectorAll("[data-auto-size]")).forEach(r=>{const s=parseInt(r.dataset.maxLines||"1");this.apply(r,r.textContent||"",s)})}};if(typeof window<"u"){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>h.autoApply(),200)})}const m={init(){const e=localStorage.getItem("theme")||"dark";e==="auto"?this.applyAutoTheme(!1):(document.documentElement.setAttribute("data-theme",e),e==="dark"?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"));const t=localStorage.getItem("colorTheme")||"default";this.setColorTheme(t,!1)},isNightTime(){const e=new Date().getHours();return e>=18||e<7},applyAutoTheme(e=!0){const t=this.isNightTime(),r=t?"dark":"light";return document.documentElement.setAttribute("data-theme",r),t?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),e&&l(t?"Automatiskt mÃ¶rkt lÃ¤ge ðŸŒ™":"Automatiskt ljust lÃ¤ge â˜€ï¸"),r},toggle(){const t=document.documentElement.getAttribute("data-theme")==="light"?"dark":"light";return document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),t==="dark"?(document.body.classList.add("dark-mode"),l("MÃ¶rkt lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ ðŸŒ™")):(document.body.classList.remove("dark-mode"),l("Ljust lÃ¤ge aktiverat / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ â˜€ï¸")),t},setColorTheme(e,t=!0){e==="default"?document.documentElement.removeAttribute("data-color-theme"):document.documentElement.setAttribute("data-color-theme",e),localStorage.setItem("colorTheme",e),t&&l(e)}},u={init(){const e=localStorage.getItem("mobileView"),t=e===null?!0:e==="true";this.apply(t)},apply(e){e?(document.documentElement.classList.add("iphone-mode"),document.body.classList.add("iphone-view")):(document.documentElement.classList.remove("iphone-mode"),document.body.classList.remove("iphone-view"));const t=document.getElementById("mobileToggle")||document.getElementById("mobileViewToggle");t&&t.classList.toggle("active",e),localStorage.setItem("mobileView",e?"true":"false")},toggle(){const e=!document.body.classList.contains("iphone-view");return this.apply(e),l(e?"Mobilvy aktiverad / ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ðŸ“±":"Standardvy aktiverad / Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ ðŸ’»"),e}},g={ett:["rum","kar","hus","tak","golv","bord","berg","land","ljus","block","kort","slag","spel","verk","djur","krig","krÃ¶n","prov","test","tryck","vatten","fÃ¶nster","papper","system","arbete","centrum","museum","program","dokument","drÃ¥p","brott","mord","skap","Ã¤ktenskap","partnerskap"],en:["gÃ¥rd","vÃ¤g","gata","plats","dÃ¶rr","bil","maskin","station","ventil","motor","pump","kabel","tid","dag","natt","stad","ning","tion","sion","het","else","ande","ende","ment","itet","dom","ism","ist","are","ler","rer","nar","mark","feber","handel","misshandel","konvention","habilitering","akut","queen","plikt","hiss","nad","sjukdom"]},S={getBadge(e,t,r){const s=(t||"").toLowerCase(),i=(r||"").toLowerCase(),a=(e||"").toLowerCase().replace(".","").replace(" ","");if(s.match(/\w+ar[,\s]/)&&s.match(/\w+ade[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 1</span>';if(s.match(/\w+er[,\s]/)&&(s.match(/\w+de[,\s]/)||s.match(/\w+te[,\s]/)))return'<span class="grammar-badge grammar-verb">Gr. 2</span>';if(s.match(/\w+dde[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 3</span>';if(s.match(/\w+(it|its|ats|ett)[,\s]/)||s.match(/\w+(it|its|ats|ett)$/)||i.endsWith("as")&&s.match(/\w+ades[,\s]|\w+des[,\s]/))return'<span class="grammar-badge grammar-verb">Gr. 4</span>';if(a.includes("adj"))return'<span class="grammar-badge grammar-adj">Adj</span>';if(a.includes("adverb")||a==="adv")return'<span class="grammar-badge grammar-adv">Adv</span>';const n=s.split(",").map(o=>o.trim());if(n.length>=2){const o=n[1];if((o.endsWith("en")||o.endsWith("an"))&&!o.endsWith("et"))return'<span class="grammar-badge grammar-en">En</span>';if(o.endsWith("et"))return'<span class="grammar-badge grammar-ett">Ett</span>'}return s.startsWith("en ")||s.match(/\ben\s+/)?'<span class="grammar-badge grammar-en">En</span>':s.startsWith("ett ")||s.match(/\bett\s+/)?'<span class="grammar-badge grammar-ett">Ett</span>':a.includes("verb")?'<span class="grammar-badge grammar-verb">Verb</span>':a.includes("subst")?'<span class="grammar-badge grammar-en">Subst</span>':a.includes("prep")?'<span class="grammar-badge">Prep</span>':a.includes("konj")?'<span class="grammar-badge">Konj</span>':a.includes("pron")?'<span class="grammar-badge">Pron</span>':e&&e.length>0&&e.length<10?`<span class="grammar-badge">${e}</span>`:""}},L={getCategory(e,t="",r=""){const s=(e||"").toLowerCase().replace(".",""),i=(t||"").toLowerCase(),a=(r||"").toLowerCase();return a.match(/\w+ar[,\s]/)&&a.match(/\w+ade[,\s]/)||a.match(/\w+er[,\s]/)&&(a.match(/\w+de[,\s]/)||a.match(/\w+te[,\s]/))||a.match(/\w+dde[,\s]/)||a.match(/\w+(it|its|ats|ett)[,\s]/)||a.match(/\w+(it|its|ats|ett)$/)||i.endsWith("as")&&a.match(/\w+ades[,\s]|\w+des[,\s]/)?"verb":s.includes("verbmn")||s.includes("verb")&&t.includes(" ")?"phrasal":s==="verb"||s.includes("verb")?"verb":s.includes("subst")?"noun":s==="adj"||s.includes("adjektiv")?"adj":s==="adv"||s.includes("adverb")?"adv":s.includes("prep")?"prep":s.includes("konj")?"conj":s.includes("pron")?"pronoun":g.ett.some(n=>i.endsWith(n))||g.en.some(n=>i.endsWith(n))?"noun":"other"}};typeof window<"u"&&(window.VoiceSearchManager=w,window.showToast=l,window.TextSizeManager=h,window.ThemeManager=m,window.MobileViewManager=u,window.generateEducationalSentence=y,m.init(),u.init());export{L as CategoryHelper,S as GrammarHelper,u as MobileViewManager,h as TextSizeManager,m as ThemeManager,w as VoiceSearchManager,y as generateEducationalSentence,g as learnedSuffixes,v as normalizeArabic,l as showToast};
