import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{s as z}from"./tts-CfZZetlp.js";import{d as ie,e as re}from"./games-utils-CEOlpawa.js";import"./pwa-Bn3RWWLO.js";import"./config-CfHoVMbv.js";import"./i18n-BpwFYk4h.js";import"./toast-manager-DdtDDR9Z.js";const S=[{pair:["O","√ñ"],w1:"Boll",w2:"B√∂l",d1:"ŸÉÿ±ÿ©",d2:"ÿ¨ÿ∞ÿπ (ÿ¥ÿ¨ÿ±ÿ©)",e1:"‚öΩ",e2:"ü™µ",s1:"Kasta en boll.",s2:"Tr√§dets b√∂l √§r h√•rt.",frame:"B_l"},{pair:["O","√ñ"],w1:"Son",w2:"S√∂n",d1:"ÿßÿ®ŸÜ",d2:"ŸÉŸÜŸäÿ≥ÿ© (ŸÇÿØŸäŸÖ)",e1:"üë¶",e2:"‚õ™",s1:"Min son √§r glad.",s2:"Vi g√•r till s√∂n.",frame:"S_n"}];window.toggleMobileView=ie;window.toggleFocusMode=re;function A(t){const e=[...t];for(let n=e.length-1;n>0;n--){const o=Math.floor(Math.random()*(n+1));[e[n],e[o]]=[e[o],e[n]]}return e}let x=1,w=1,T=0,y=3,m=0,g=!1,j=!1,M=!1,p=1,c=null,u={1:!1,2:!1},B={1:!1,2:!1},L=[],P=null,G=0,h,b;const U=10,E=7,k=document.getElementById("optionsArea"),ce=document.getElementById("feedbackOverlay"),de=document.getElementById("progressBar"),K=document.getElementById("levelBadge"),f=document.getElementById("cardFlipper"),X=document.getElementById("speedBadge"),H=document.getElementById("bossBanner"),W=document.getElementById("livesContainer"),Z=document.getElementById("startScreen"),N=document.getElementById("playArea"),D=document.querySelector(".game-container");D&&(D.addEventListener("mousemove",t=>{if(g||!j)return;const e=D.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top,s=e.width/2,a=e.height/2,l=(o-a)/a*-5,r=(n-s)/s*5;f.style.transform=`rotateX(${l}deg) rotateY(${r}deg)`}),D.addEventListener("mouseleave",()=>{f.style.transform="rotateX(0) rotateY(0)"}));function J(){Z&&(Z.style.display="none"),N&&(N.style.display="block"),j=!0,me()}document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{J()},100)});function me(){let t=localStorage.getItem("vowelGameStage");x=t?parseInt(t):1,w=1,T=0,y=3,m=0,I(),ue(),Q()}function ue(){document.querySelectorAll(".drop-zone").forEach(t=>{const e=t;e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.contains("solved")||(e.classList.add("drag-over"),n.dataTransfer&&(n.dataTransfer.dropEffect="move"))}),e.addEventListener("dragleave",()=>{e.classList.remove("drag-over")}),e.addEventListener("drop",n=>{var s;if(n.preventDefault(),e.classList.remove("drag-over"),e.classList.contains("solved"))return;const o=(s=n.dataTransfer)==null?void 0:s.getData("text/plain");if(o){const a=parseInt(e.dataset.slot);a===p&&h(o,null,a)}})})}function I(){W.innerHTML="";for(let t=0;t<3;t++){const e=document.createElement("span");e.className=`heart ${t<y?"":"lost"}`,e.textContent="‚ù§Ô∏è",W.appendChild(e)}}function fe(){document.body.classList.remove("skin-neon","skin-gold"),m>5&&document.body.classList.add("skin-neon"),T>2e3&&document.body.classList.add("skin-gold")}function Q(){if(g)return;if(x>U){te(!0);return}M=w===E,document.body.classList.toggle("boss-mode",M),H.innerHTML=M?"üî• BOSS LEVEL üî•":"",H.style.display=M?"block":"none",K.textContent=`Stage ${x} ‚Ä¢ Level ${w}/${E}`;const t=(x-1)*E+w,e=U*E;if(de.style.width=`${t/e*100}%`,fe(),f.classList.remove("flipped"),f.classList.remove("slide-in"),f.offsetWidth,f.classList.add("slide-in"),X.classList.remove("visible"),ce.classList.remove("visible"),document.getElementById("inlineCountdown").classList.remove("visible"),G=Date.now(),c=pe(),!c)return;u={1:!1,2:!1},B={1:!1,2:!1},p=1;const n=c;let o=n.w1.replace(new RegExp(n.pair[0],"i"),'<span class="missing-vowel"></span>'),s=n.w2.replace(new RegExp(n.pair[1],"i"),'<span class="missing-vowel"></span>');document.querySelector(".word-1-text").innerHTML=o,document.querySelector(".word-2-text").innerHTML=s,document.querySelector(".word-1-def").innerText=n.d1,document.querySelector(".word-2-def").innerText=n.d2,document.getElementById("emoji1").textContent=n.e1||"üì¶",document.getElementById("emoji2").textContent=n.e2||"üì¶",document.getElementById("backEmoji1").textContent=n.e1||"",document.getElementById("backEmoji2").textContent=n.e2||"",document.getElementById("sentence1").innerHTML=(n.s1||"").replace(new RegExp(n.w1.substr(0,3),"gi"),v=>`<em>${v}</em>`),document.getElementById("sentence2").innerHTML=(n.s2||"").replace(new RegExp(n.w2.substr(0,3),"gi"),v=>`<em>${v}</em>`),$();const a=["A","E","I","O","U","Y","√Ö","√Ñ","√ñ"],l=n.pair,r=a.filter(v=>!l.includes(v)),d=A(r).slice(0,2),ae=A([...l,...d]);k.innerHTML="",ae.forEach(v=>{const C=document.createElement("button");C.className="vowel-btn slide-in",C.textContent=v,C.draggable=!0,ee(C,v),k.appendChild(C)})}function $(){[1,2].forEach(t=>{const e=document.getElementById(`slot${t}`);e.classList.remove("active-target","solved","wrong"),B[t]?e.classList.add("wrong"):u[t]?e.classList.add("solved"):t===p&&e.classList.add("active-target")})}function ee(t,e){t.addEventListener("click",()=>we(e,t,p)),t.addEventListener("dragstart",n=>{t.classList.add("dragging"),n.dataTransfer.setData("text/plain",e),n.dataTransfer.effectAllowed="move"}),t.addEventListener("dragend",()=>{t.classList.remove("dragging"),document.querySelectorAll(".word-item").forEach(n=>n.classList.remove("drag-over"))}),t.addEventListener("touchstart",n=>ge(n,t),{passive:!1}),t.addEventListener("touchmove",ye,{passive:!1}),t.addEventListener("touchend",n=>ve(n,t,e))}let i=null,O={x:0,y:0};function ge(t,e){if(g)return;const n=t.touches[0],o=e.getBoundingClientRect();O.x=n.clientX-o.left,O.y=n.clientY-o.top,e.classList.add("dragging"),i=e.cloneNode(!0),i.style.position="fixed",i.style.width=o.width+"px",i.style.height=o.height+"px",i.style.left=o.left+"px",i.style.top=o.top+"px",i.style.zIndex="2000",i.style.pointerEvents="none",i.style.opacity="0.9",i.style.transform="scale(1.1)",i.style.boxShadow="0 10px 20px rgba(0,0,0,0.5)",document.body.appendChild(i)}function pe(){let t=S.map((n,o)=>o).filter(n=>!L.includes(n));if(t.length===0){const n=L[L.length-1];L=[],t=S.map((o,s)=>s),t.length>1&&(t=t.filter(o=>o!==n))}const e=t[Math.floor(Math.random()*t.length)];return L.push(e),localStorage.setItem("vowelPlayedIndices",JSON.stringify(L)),S[e]}function ye(t){if(!i)return;t.preventDefault();const e=t.touches[0];i.style.left=e.clientX-O.x+"px",i.style.top=e.clientY-O.y+"px";const n=document.elementFromPoint(e.clientX,e.clientY),o=n?n.closest(".drop-zone"):null;document.querySelectorAll(".word-item").forEach(s=>s.classList.remove("drag-over")),o&&!o.classList.contains("solved")&&o.classList.add("drag-over")}function ve(t,e,n){if(!i)return;const o=t.changedTouches[0],s=document.elementFromPoint(o.clientX,o.clientY),a=s?s.closest(".drop-zone"):null;if(document.body.removeChild(i),i=null,e.classList.remove("dragging"),document.querySelectorAll(".word-item").forEach(l=>l.classList.remove("drag-over")),a&&!a.classList.contains("solved")){const l=parseInt(a.dataset.slot);l===p&&h(n,e,l)}}function we(t,e,n){if(g||u[n])return;g=!0;const o=e.cloneNode(!0);o.classList.add("flying-clone");const s=e.getBoundingClientRect();o.style.left=s.left+"px",o.style.top=s.top+"px",document.body.appendChild(o);const l=document.getElementById(`slot${n}`).getBoundingClientRect();setTimeout(()=>{o.style.left=(l.left+l.left+l.width/2-25)/2+"px",o.style.top=(l.top+l.top+l.height/2-25)/2+"px",o.style.transform="scale(0.5)",o.style.opacity="0"},10),setTimeout(()=>{document.body.removeChild(o),g=!1,h(t,e,n)},400)}function he(t,e,n,o){const s=document.createElement("div");s.className=`particle ${n}`,s.textContent=o,s.style.left=t+"px",s.style.top=e+"px";const a=Math.random()*Math.PI*2,l=50+Math.random()*100;s.style.setProperty("--tx",Math.cos(a)*l+"px"),s.style.setProperty("--ty",Math.sin(a)*l+"px"),document.body.appendChild(s),setTimeout(()=>s.remove(),1e3)}function q(t,e){const n=t.getBoundingClientRect(),o=n.left+n.width/2,s=n.top+n.height/2,a={star:{emojis:["‚≠ê","‚ú®","üåü"],count:8},flame:{emojis:["üî•","üí•","‚ö°"],count:12},sparkle:{emojis:["üíú","üí´","‚ú®"],count:10}},l=a[e]||a.star;for(let r=0;r<l.count;r++)setTimeout(()=>{const d=l.emojis[Math.floor(Math.random()*l.emojis.length)];he(o,s,e,d)},r*50)}function Le(t){const e=document.getElementById(`slot${t}`);m>=5?q(e,"flame"):m>=3?q(e,"sparkle"):q(e,"star")}function R(t){const e=t===1?c.w1:c.w2;e&&window.TTSManager&&window.TTSManager.speak(e,"sv-SE")}function V(t){const e=document.createElement("div");e.className="combo-text",e.textContent=t;const n=document.getElementById("livesContainer").getBoundingClientRect();e.style.left=n.left-50+"px",e.style.top=n.top+20+"px",document.body.appendChild(e),setTimeout(()=>e.remove(),1e3)}h=(t,e,n)=>{var s;if(g)return;const o=n===1?c.pair[0]:c.pair[1];if(t===o){u[n]=!0,B[n]=!1;const a=document.getElementById(`slot${n}`);a.classList.add("solved"),a.classList.remove("wrong");const l=n===1?c.w1:c.w2;n===1?document.querySelector(".word-1-text").innerHTML=l:document.querySelector(".word-2-text").innerHTML=l,e&&e.classList.add("selected-correct"),R(n),Le(n),m++,T+=100*(m>5?2:1),m%5===0?V(`${m}x COMBO!`):m===3&&V("HEATING UP!"),u[1]&&u[2]?b():(p=n===1?2:1,$(),m>3&&R(p))}else{e&&e.classList.add("selected-wrong"),y--,m=0,I(),(s=window.navigator)!=null&&s.vibrate&&window.navigator.vibrate(400),u[n]=!0,B[n]=!0,document.getElementById(`slot${n}`).classList.add("wrong");const r=c.frame.indexOf("_")===0?t.toUpperCase():t.toLowerCase(),d=c.frame.replace("_",r);n===1?document.querySelector(".word-1-text").innerText=d:document.querySelector(".word-2-text").innerText=d,y<=0?te(!1):u[1]&&u[2]?b():(p=n===1?2:1,$())}};b=()=>{g=!0,Date.now()-G<5e3&&(X.classList.add("visible"),T+=50),H.style.display="none",setTimeout(()=>{f.classList.add("flipped")},600),setTimeout(()=>{Ee()},1e3)};function Ee(){const t=document.getElementById("inlineCountdown"),n=w===E?"NEXT STAGE":"NEXT LEVEL";t.innerHTML=`<div class="countdown-number" id="cNum">3</div><div class="countdown-text">${n}</div>`,t.classList.add("visible");let o=3;const s=t.querySelector("#cNum"),a=setInterval(()=>{if(o--,o>0)s.textContent=o.toString();else{if(clearInterval(a),t.classList.remove("visible"),w<E)w++;else{x++,w=1,y<5&&(y++,I(),V("+1 ‚ù§Ô∏è"));try{localStorage.setItem("vowelGameStage",x.toString())}catch(l){console.error("Save failed",l)}Se()}g=!1,Q()}},1e3)}function te(t){N.style.display="none";const e=document.getElementById("endScreen");e.style.display="block",e.querySelector("#endTitle").textContent=t?"Grattis! üëë":"Game Over üíÄ",e.querySelector("#endMessage").textContent=t?"Du har bem√§strat alla niv√•er!":"Dina liv tog slut.",e.querySelector("#finalScore").textContent=`Po√§ng: ${T}`}function Se(){const t=document.getElementById("celebrationOverlay");t.innerHTML="",t.style.display="block";for(let n=0;n<100;n++){const o=document.createElement("div");o.className="confetti",o.style.left=Math.random()*100+"%",o.style.backgroundColor=["#f00","#0f0","#00f","#ff0","#f0f","#0ff"][Math.floor(Math.random()*6)],o.style.animationDuration=Math.random()*2+1+"s",o.style.animationDelay=Math.random()+"s",t.appendChild(o)}const e=document.createElement("h1");e.textContent="STAGE CLEAR! üéâ",e.style.position="absolute",e.style.top="15%",e.style.left="50%",e.style.transform="translate(-50%, -50%) scale(0)",e.style.color="#fff",e.style.fontSize="3rem",e.style.textShadow="0 0 20px black",e.style.transition="transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)",t.appendChild(e),setTimeout(()=>e.style.transform="translate(-50%, -50%) scale(1)",100),setTimeout(()=>{t.style.display="none",t.innerHTML=""},3500)}let F=!1,Y=0;const _=5;function ne(){const t=new Date;return`daily_${t.getFullYear()}_${t.getMonth()}_${t.getDate()}`}function oe(){return localStorage.getItem(ne())==="completed"}function xe(){const t=new Date,e=t.getFullYear()*1e4+(t.getMonth()+1)*100+t.getDate();return[...S].sort((o,s)=>{const a=e*S.indexOf(o)%1e3,l=e*S.indexOf(s)%1e3;return a-l}).slice(0,_)}function se(){const t=document.getElementById("dailyBtn");t&&oe()&&(t.classList.add("completed"),t.innerHTML="‚úÖ Avklarad idag!")}function Te(){if(oe())return;F=!0,Y=Date.now(),document.getElementById("startScreen").style.display="none",document.getElementById("playArea").style.display="block",j=!0;const t=document.getElementById("dailyTimer");t.style.display="block",P=setInterval(()=>{const e=Math.floor((Date.now()-Y)/1e3),n=Math.floor(e/60).toString().padStart(2,"0"),o=(e%60).toString().padStart(2,"0");t.textContent=`‚è±Ô∏è ${n}:${o}`},1e3),window.dailyPairs=xe(),window.dailyIndex=0,y=3,m=0,T=0,I(),le()}function le(){if(window.dailyIndex>=_){Be();return}c=window.dailyPairs[window.dailyIndex],u={1:!1,2:!1},B={1:!1,2:!1},p=1,G=Date.now(),K.textContent=`Daily: ${window.dailyIndex+1}/${_}`,f.classList.remove("flipped"),X.classList.remove("visible");const t=c;let e=t.w1.replace(new RegExp(t.pair[0],"i"),'<span class="missing-vowel"></span>'),n=t.w2.replace(new RegExp(t.pair[1],"i"),'<span class="missing-vowel"></span>');document.querySelector(".word-1-text").innerHTML=e,document.querySelector(".word-2-text").innerHTML=n,document.querySelector(".word-1-def").innerText=t.d1,document.querySelector(".word-2-def").innerText=t.d2,document.getElementById("emoji1").textContent=t.e1||"üì¶",document.getElementById("emoji2").textContent=t.e2||"üì¶",$();const o=["A","E","I","O","U","Y","√Ö","√Ñ","√ñ"],s=t.pair,a=A(o.filter(r=>!s.includes(r))).slice(0,2),l=A([...s,...a]);k.innerHTML="",l.forEach(r=>{const d=document.createElement("button");d.className="vowel-btn slide-in",d.textContent=r,d.draggable=!0,ee(d,r),k.appendChild(d)})}function Ce(){window.dailyIndex++,setTimeout(()=>{f.classList.add("flipped")},600),setTimeout(()=>{le()},1500)}function Be(){P&&clearInterval(P),document.getElementById("dailyTimer").style.display="none",localStorage.setItem(ne(),"completed"),y=Math.min(y+3,5),I();const t=document.getElementById("dailyBadge");t.classList.add("visible");const e=Math.floor((Date.now()-Y)/1e3),n=Math.floor(e/60),o=e%60;t.innerHTML=`üèÜ Dagens Utmaning Avklarad!<br><span style="font-size:1.2rem;">Tid: ${n}:${o.toString().padStart(2,"0")}</span><br><span style="font-size:2rem;">+3 ‚ù§Ô∏è</span>`,setTimeout(()=>{t.classList.remove("visible"),F=!1,document.getElementById("playArea").style.display="none",document.getElementById("startScreen").style.display="flex",se()},2e3)}const be=b;b=()=>{F?Ce():be()};document.addEventListener("DOMContentLoaded",()=>{const t=localStorage.getItem("theme")||"dark";if(document.documentElement.setAttribute("data-theme",t),window.toggleMobileView=function(){document.documentElement.classList.toggle("iphone-mode"),document.body.classList.toggle("iphone-view");const e=document.body.classList.contains("iphone-view");localStorage.setItem("mobileView",e?"true":"false");const n=document.getElementById("mobileToggle");n&&n.classList.toggle("active",e)},localStorage.getItem("mobileView")==="true"){document.documentElement.classList.add("iphone-mode"),document.body.classList.add("iphone-view");const e=document.getElementById("mobileToggle");e&&e.classList.add("active")}se()});const Ie=h;h=(t,e,n)=>{Ie(t,e,n)};console.log("Vowel Game Loaded");window.startGame=J;window.startDailyChallenge=Te;window.handleAnswer=h;window.playAudioForSlot=R;function Me(t){window.TTSManager?window.TTSManager.speak(t,"sv-SE"):typeof z=="function"&&z(t)}window.playVowelDemo=Me;
