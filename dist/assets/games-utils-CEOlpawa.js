import{A as a}from"./config-CfHoVMbv.js";import"./i18n-BpwFYk4h.js";import{T as m}from"./toast-manager-DdtDDR9Z.js";console.log("games-utils.ts LOADED and EXECUTING");function g(){const e=localStorage.getItem("theme")||"light",o=localStorage.getItem("colorTheme")||"default";document.documentElement.setAttribute("data-theme",e),document.body.setAttribute("data-theme",e),o!=="default"&&(document.documentElement.setAttribute("data-color-theme",o),document.body.setAttribute("data-color-theme",o)),e==="dark"?(document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode")):(document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode")),console.log(`[Games] Theme initialized: ${e}, color: ${o}`)}g();const u=a.COLUMNS.ID,w=a.COLUMNS.TYPE,h=a.COLUMNS.SWEDISH,f=a.COLUMNS.ARABIC,y=a.COLUMNS.ARABIC_EXT,M=a.COLUMNS.DEFINITION,S=a.COLUMNS.FORMS,E=a.COLUMNS.EXAMPLE_SWE,O=a.COLUMNS.EXAMPLE_ARB,b=a.COLUMNS.IDIOM_SWE,C=a.COLUMNS.IDIOM_ARB;window.COL_ID=u;window.COL_TYPE=w;window.COL_SWE=h;window.COL_ARB=f;window.COL_ARB_DEF=y;window.COL_DEF=M;window.COL_FORMS=S;window.COL_EX=E;window.COL_EX_ARB=O;window.COL_IDIOM=b;window.COL_IDIOM_ARB=C;function i(e,o="default"){m.show(e,{type:o==="default"?"success":o})}function L(e){try{console.log("startGame called with:",e);const o=document.getElementById("gameMenu");document.querySelectorAll(".active-game-container").forEach(n=>n.style.display="none"),o&&(o.style.display="none"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(n=>n.style.display="none"),window.scrollTo(0,0),I();const t={"missing-word":"missing_word.html",flashcards:"flashcards.html",pronunciation:"pronunciation.html",spelling:"spelling.html","word-wheel":"word_wheel.html","sentence-builder":"sentence_builder.html","word-rain":"word_rain.html",wordle:"wordle.html",grammar:"grammar.html","word-connect":"word_connect.html"};if(t[e]){window.location.href=t[e];return}}catch(o){console.error("âŒ Game Error:",o),i("Spelet kunde inte laddas. FÃ¶rsÃ¶k igen! / Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù… ØªØ­Ù…Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ù‹Ø§","error"),setTimeout(()=>{try{d()}catch{window.location.reload()}},2e3)}}function d(){try{const e=document.getElementById("gameMenu"),o=["missingWordGame","flashcardsGame","pronunciationGame","spellingGame","wordWheelGame","sentenceGame","rainGame","wordleGame","grammarGame","word-game-module"];e&&(e.style.display="block"),document.querySelectorAll(".stats-hero, .daily-banner, .category-filter-container").forEach(t=>t.style.display=""),window.scrollTo(0,0),o.forEach(t=>{const n=document.getElementById(t);n&&(n.style.display="none")}),l()}catch(e){console.error("âŒ Error showing game menu:",e),window.location.href="games.html"}}function I(){["gameScore","pronunciationScore","spellingScore","wordWheelScore","sentenceScore","rainScore"].forEach(o=>{const t=document.getElementById(o);t&&(t.textContent="0")})}function p(){const e=document.createElement("canvas");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e);const o=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const t=[],n=["#F59E0B","#EF4444","#10B981","#3B82F6","#0EA5E9"];for(let r=0;r<100;r++)t.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,color:n[Math.floor(Math.random()*n.length)],size:Math.random()*10+5,speed:Math.random()*5+2,angle:Math.random()*6.2});function s(){o.clearRect(0,0,e.width,e.height);let r=!1;t.forEach(c=>{c.y+=c.speed,c.x+=Math.sin(c.angle)*2,c.angle+=.1,c.y<e.height&&(o.fillStyle=c.color,o.fillRect(c.x,c.y,c.size,c.size),r=!0)}),r?requestAnimationFrame(s):e.remove()}s()}function l(){const e=JSON.parse(localStorage.getItem("gameScores")||"{}");Object.entries({"missing-word":"score-missing-word",flashcards:"score-flashcards",pronunciation:"score-pronunciation",spelling:"score-spelling","word-wheel":"score-word-wheel",sentence:"score-sentence",rain:"score-rain",wordle:"score-wordle",grammar:"score-grammar","word-connect":"score-word-connect"}).forEach(([t,n])=>{const s=document.getElementById(n);s&&(s.textContent=String(e[t]||0))})}function _(e,o){const t=JSON.parse(localStorage.getItem("gameScores")||"{}"),n=t[e]||0;o>n&&(t[e]=o,localStorage.setItem("gameScores",JSON.stringify(t)),l(),i("Nytt rekord! ðŸ† / Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯!"))}function A(){const e=document.getElementById("darkModeToggle");if(!e)return;const o=e.querySelector(".moon-icon"),t=e.querySelector(".sun-icon");localStorage.getItem("darkMode")==="true"&&(document.body.classList.add("dark-mode"),o&&(o.style.display="none"),t&&(t.style.display="block")),e.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");const s=document.body.classList.contains("dark-mode");localStorage.setItem("darkMode",String(s)),s?(o&&(o.style.display="none"),t&&(t.style.display="block")):(o&&(o.style.display="block"),t&&(t.style.display="none"))})}function k(){const o=document.body.classList.toggle("mobile-view-mode");localStorage.setItem("mobileViewMode",String(o));const t=document.getElementById("mobileToggle");t&&(t.textContent=o?"ðŸ–¥ï¸":"ðŸ“±",t.title=o?"Desktop View":"Mobile View"),i(o?"ðŸ“± Mobile View":"ðŸ–¥ï¸ Desktop View","success")}function v(){const e=localStorage.getItem("mobileViewMode");if(e===null?!0:e==="true"){document.body.classList.add("mobile-view-mode");const t=document.getElementById("mobileToggle");t&&(t.textContent="ðŸ–¥ï¸",t.title="Desktop View")}}function D(){const o=document.body.classList.toggle("focus-mode");localStorage.setItem("focusMode",String(o));const t=document.getElementById("focusModeToggle");t&&(t.textContent=o?"ðŸŽ¯":"ðŸ‘ï¸",t.title=o?"ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ù…ÙØ¹Ù‘Ù„ / Focus Mode On":"ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² / Focus Mode"),i(o?"ðŸŽ¯ ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ù…ÙØ¹Ù‘Ù„ / Focus Mode On":"ðŸ‘ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø§Ø¯ÙŠ / Normal Mode","success")}function B(){if(localStorage.getItem("focusMode")==="true"){document.body.classList.add("focus-mode");const o=document.getElementById("focusModeToggle");o&&(o.textContent="ðŸŽ¯",o.title="ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ù…ÙØ¹Ù‘Ù„ / Focus Mode On")}}function N(e){if(e)try{const o=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}");o[e]=(o[e]||0)+1,localStorage.setItem("gameUsageCounts",JSON.stringify(o)),console.log(`Tracked usage for ${e}: ${o[e]}`)}catch(o){console.error("Error tracking game usage:",o)}}function G(){try{const e=JSON.parse(localStorage.getItem("gameUsageCounts")||"{}"),o=3,t=Object.entries(e).filter(([,s])=>s>o).sort((s,r)=>r[1]-s[1]);if(t.length===0)return;const n=document.querySelector(".game-cards-grid");if(!n)return;[...t].reverse().forEach(([s])=>{const r=document.querySelector(`.game-card-item[data-game-id="${s}"]`);r&&(n.prepend(r),r.classList.add("popular-game-highlight"))})}catch(e){console.error("Error prioritizing games:",e)}}function T(){const e={root:null,rootMargin:"0px",threshold:.1},o=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&(s.target.classList.add("scroll-in-view"),o.unobserve(s.target))})},e);document.querySelectorAll(".game-card-item, .stats-hero, .daily-banner, .category-filter-container, .wc-header-compact").forEach(n=>o.observe(n))}document.addEventListener("DOMContentLoaded",()=>{G(),document.querySelectorAll(".game-card-item").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-game-id");o&&N(o)})}),l(),A(),v(),B(),T()});window.startGame=L;window.showGameMenu=d;window.toggleMobileView=k;window.toggleFocusMode=D;window.showToast=i;window.saveScore=_;window.triggerConfetti=p;export{E as C,_ as a,h as b,f as c,k as d,D as e,i as s,p as t};
