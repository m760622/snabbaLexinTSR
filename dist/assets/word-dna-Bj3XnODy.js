import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{j as e,r as n,c as B}from"./client-Chk-tuEE.js";import{DictionaryDB as A}from"./db-CUAitF01.js";import{T as _}from"./tts-D1JXvOqA.js";import{L as V}from"./i18n-Dq4jSOyT.js";import"./pwa-_2RHpQR3.js";import"./config-8gd_ljfe.js";const T="wod_state";function U(t,s,a,r){return function(){t>>>=0,s>>>=0,a>>>=0,r>>>=0;var i=t+s|0;return t=s^s>>>9,s=a+(a<<3)|0,a=a<<21|a>>>11,r=r+1|0,i=i+r|0,a=a+i|0,(i>>>0)/4294967296}}const C={getTodayString(){const t=new Date,s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${s}-${a}-${r}`},getStoredState(){const t=this.getTodayString();try{const s=localStorage.getItem(T);if(s){const a=JSON.parse(s);if(a.date===t)return a}}catch(s){console.error("Failed to parse WOD state",s)}return{date:t,wordId:null,isCompleted:!1,lastSegmentIndex:0}},saveState(t){const a={...this.getStoredState(),...t};localStorage.setItem(T,JSON.stringify(a))},async getDailyWord(t=!1){var p;const s=this.getTodayString(),a=this.getStoredState();if(!t&&a.wordId){const u=window.dictionaryData;let x=null;if(u&&(x=u.find(f=>{var v;return(Array.isArray(f)?f[0].toString():(v=f.id)==null?void 0:v.toString())===a.wordId})),x)return this.normalizeWord(x);await A.init();const w=await A.getWordById(a.wordId);if(w)return this.normalizeWord(w)}let r=window.dictionaryData;if((!r||r.length===0)&&(await A.init(),r=await A.getAllWords()),!r||r.length===0)return null;let i=0;const h=t?s+Date.now():s;for(let u=0;u<h.length;u++)i=(i<<5)-i+h.charCodeAt(u),i|=0;const c=Math.abs(i),l=U(c,c*2,c*3,c*4),d=Math.floor(l()*r.length),o=r[d],g=Array.isArray(o)?o[0].toString():((p=o==null?void 0:o.id)==null?void 0:p.toString())||"";return g&&this.saveState({date:s,wordId:g,isCompleted:!1}),this.normalizeWord(o)},normalizeWord(t){if(!t)return null;let s={};if(Array.isArray(t)?s={id:t[0],type:t[1],swe:t[2],arb:t[3],arbExt:t[4],sweDef:t[5],sweEx:t[7],arbEx:t[8]}:s={...t},!s.forms){const a=s.swe.endsWith("a")?s.swe.slice(0,-1):s.swe;s.forms=[{label:"Singular",swe:s.swe,arb:"Ø§Ù„Ù…ÙØ±Ø¯"},{label:"Plural",swe:a+"or",arb:"Ø§Ù„Ø¬Ù…Ø¹"},{label:"Past",swe:a+"ade",arb:"Ø§Ù„Ù…Ø§Ø¶ÙŠ"},{label:"Present",swe:a+"ar",arb:"Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹"}]}return s.related||(s.related=[{word:"Viktig",type:"synonym",arb:"Ù…Ù‡Ù…"},{word:"HÃ¤rlig",type:"synonym",arb:"Ø±Ø§Ø¦Ø¹"},{word:"Liten",type:"antonym",arb:"ØµØºÙŠØ±"},{word:"Snabb",type:"related",arb:"Ø³Ø±ÙŠØ¹"}]),s.history||(s.history={origin:"Fornnordiska (Old Norse)",note:`Ordet "${s.swe}" har sina rÃ¶tter i germanska sprÃ¥k. Det anvÃ¤ndes ursprungligen fÃ¶r att beskriva handlingar i vardagslivet.`,arabicNote:"ØªØ¹ÙˆØ¯ Ø¬Ø°ÙˆØ± Ù‡Ø°Ù‡ Ø§Ù„ÙƒÙ„Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø¬Ø±Ù…Ø§Ù†ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ ÙˆÙƒØ§Ù†Øª ØªØ³ØªØ®Ø¯Ù… Ù„ÙˆØµÙ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©."}),s},markComplete(){this.saveState({isCompleted:!0,lastSegmentIndex:3});const t=parseInt(localStorage.getItem("userPoints")||"0");localStorage.setItem("userPoints",(t+10).toString()),window.dispatchEvent(new CustomEvent("pointsUpdated",{detail:{points:t+10}}))}},Q=({related:t})=>e.jsxs("div",{className:"semantic-map-view fade-in",children:[e.jsx("h2",{className:"module-title",children:"Ordets Karta â˜ï¸"}),e.jsxs("div",{className:"bubble-container",children:[t.map((s,a)=>e.jsxs("div",{className:`bubble-item ${s.type}`,style:{"--delay":`${a*.1}s`,"--x":a===0?"-60px":a===1?"70px":a===2?"-50px":"60px","--y":a===0?"-50px":a===1?"-40px":a===2?"60px":"50px"},children:[e.jsx("div",{className:"bubble-type",children:s.type}),e.jsx("div",{className:"bubble-word",children:s.word}),e.jsx("div",{className:"bubble-arb",dir:"rtl",children:s.arb})]},a)),e.jsx("div",{className:"center-pulse"})]})]}),J=({forms:t,base:s})=>e.jsxs("div",{className:"morphology-lab fade-in",children:[e.jsx("h2",{className:"module-title",children:"Ordets Lab ðŸ§ª"}),e.jsx("div",{className:"morph-table",children:t.map((a,r)=>e.jsxs("div",{className:"morph-row",children:[e.jsx("div",{className:"morph-label",children:a.label}),e.jsx("div",{className:"morph-value",children:a.swe}),e.jsx("div",{className:"morph-arb",dir:"rtl",children:a.arb})]},r))}),e.jsxs("div",{className:"morph-hint",children:["Observera hur stammen ",e.jsx("strong",{children:s.endsWith("a")?s.slice(0,-1):s})," fÃ¶rÃ¤ndras"]})]}),H=({history:t})=>e.jsxs("div",{className:"etymology-dna fade-in",children:[e.jsx("h2",{className:"module-title",children:"Ordets DNA ðŸ“œ"}),e.jsxs("div",{className:"dna-card",children:[e.jsxs("div",{className:"dna-origin",children:[e.jsx("span",{className:"origin-badge",children:"Ursprung"}),e.jsx("span",{className:"origin-text",children:t.origin})]}),e.jsxs("div",{className:"dna-note",children:[e.jsx("p",{children:t.note}),e.jsx("hr",{className:"dna-divider"}),e.jsx("p",{className:"dna-arb",dir:"rtl",children:t.arabicNote})]}),e.jsx("div",{className:"dna-icon-bg",children:"ðŸ§¬"})]})]}),K=({isActive:t})=>{const[s,a]=n.useState(Array(10).fill(5)),r=n.useRef(null),i=n.useRef(null),h=n.useRef(null);return n.useEffect(()=>{t?(async()=>{try{const l=await navigator.mediaDevices.getUserMedia({audio:!0}),d=new AudioContext,o=d.createAnalyser();d.createMediaStreamSource(l).connect(o),o.fftSize=64,r.current=d,i.current=o;const p=new Uint8Array(o.frequencyBinCount),u=()=>{o.getByteFrequencyData(p);const x=Array.from({length:10}).map((w,f)=>{const v=p[f+2]||0;return Math.max(5,v/255*40)});a(x),h.current=requestAnimationFrame(u)};u()}catch(l){console.error("Audio fail",l)}})():(r.current&&r.current.close(),h.current&&cancelAnimationFrame(h.current),a(Array(10).fill(5)))},[t]),e.jsx("div",{className:"live-waves",children:s.map((c,l)=>e.jsx("div",{className:"wave-bar",style:{height:`${c}px`,background:t?"var(--story-cyan)":"white"}},l))})},G=({streak:t,onClose:s,word:a})=>{const[r,i]=n.useState(0);return n.useEffect(()=>{const h=setTimeout(()=>{let c=0;const l=setInterval(()=>{c+=1,i(c),c>=10&&clearInterval(l)},60)},800);return()=>clearTimeout(h)},[]),e.jsx("div",{className:"reward-overlay fade-in",children:e.jsxs("div",{className:"glass-reward-card",children:[e.jsx("div",{className:"reward-glow"}),e.jsx("h2",{className:"reward-title",children:"Dagens MÃ¥l NÃ¥tt! ðŸŽ¯"}),e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"stat-label",children:"Streak"}),e.jsxs("div",{className:"stat-value",children:["ðŸ”¥ ",t]})]}),e.jsxs("div",{className:"stat-box",children:[e.jsx("div",{className:"stat-label",children:"Reward"}),e.jsxs("div",{className:"stat-value xp-gain",children:["+",r," XP"]})]})]}),e.jsxs("div",{className:"reward-message",children:["Du har lÃ¤rt dig ",e.jsxs("strong",{children:['"',a,'"']})," idag. Bra jobbat!"]}),e.jsxs("div",{className:"reward-actions",children:[e.jsxs("button",{className:"share-btn-premium",children:[e.jsx("span",{className:"icon",children:"ðŸ“¤"})," Share Story"]}),e.jsx("button",{className:"continue-btn",onClick:s,children:"FortsÃ¤tt"})]})]})})},X=({correctAnswer:t,onAnswer:s,state:a})=>{const[r,i]=n.useState([]),[h,c]=n.useState(null);return n.useEffect(()=>{const l=["Ø³Ø¹ÙŠØ¯","ÙƒØ¨ÙŠØ±","Ø¨ÙŠØª","Ø³ÙŠØ§Ø±Ø©","Ø´Ø¬Ø±Ø©","Ø¬Ù…ÙŠÙ„","Ø³Ø±ÙŠØ¹","Ø¨Ø³ÙŠØ·","Ù…Ù‡Ù…"];let d=[t];for(;d.length<3;){const o=l[Math.floor(Math.random()*l.length)];d.includes(o)||d.push(o)}i(d.sort(()=>Math.random()-.5)),c(null)},[t]),e.jsx("div",{className:"quiz-options-container",children:r.map((l,d)=>{const o=l===t,g=a==="wrong"&&l===h;return e.jsx("button",{className:`quiz-option ${a==="correct"&&o?"correct":""} ${g?"wrong":""}`,onClick:()=>{c(l),s(o)},disabled:a!=="unanswered",children:l},d)})})},Y=6e3,Z=({onClose:t})=>{const[s,a]=n.useState(null),[r,i]=n.useState("word"),[h,c]=n.useState(0),[l,d]=n.useState(!1),[o,g]=n.useState(!1),[p,u]=n.useState(null),[x,w]=n.useState("unanswered"),[f,v]=n.useState(null),[N,$]=n.useState(!1),[S,F]=n.useState(!1),[O,E]=n.useState(0),z=n.useRef(Date.now()),j=n.useRef(null),L="/Users/mohammedabunada/.gemini/antigravity/brain/e9a02675-4ebd-4e68-8992-566b2e6d763e/misty_forest_background_1769253249113.png",D=n.useCallback(()=>{F(!0),C.markComplete()},[]),R=n.useCallback(()=>{r==="word"?i("related"):r==="related"?i("forms"):r==="forms"?i("example"):r==="example"?i("history"):r==="history"?i("quiz"):D(),c(0)},[r,D]);n.useEffect(()=>((async()=>{const b=await C.getDailyWord();b?a(b):t==null||t();const y=localStorage.getItem("userStats");E(y&&JSON.parse(y).streak||3)})(),()=>{j.current&&cancelAnimationFrame(j.current)}),[t]),n.useEffect(()=>{if(!s||l||x!=="unanswered"||r==="quiz"||S){c(0);return}const m=()=>{const b=Date.now(),y=b-z.current;z.current=b,l||c(W=>{const k=W+y/Y*100;return k>=100?(R(),0):k}),j.current=requestAnimationFrame(m)};return z.current=Date.now(),j.current=requestAnimationFrame(m),()=>{j.current&&cancelAnimationFrame(j.current)}},[r,l,s,x,S,R]);const q=()=>{o?(g(!1),u("Bra uttal! â€¢ Ù†Ø·Ù‚ Ù…Ù…ØªØ§Ø²"),window.navigator.vibrate&&window.navigator.vibrate([30,30]),setTimeout(()=>u(null),3e3)):(g(!0),u(null),window.navigator.vibrate&&window.navigator.vibrate(40))},P=m=>{m?(w("correct"),window.navigator.vibrate&&window.navigator.vibrate(50),setTimeout(()=>D(),1e3)):(w("wrong"),v("Fel! FÃ¶rsÃ¶k igen â€¢ Ø®Ø·Ø£ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰"),window.navigator.vibrate&&window.navigator.vibrate([40,40,40]),setTimeout(()=>{w("unanswered"),v(null)},1500))};if(!s)return null;const I=[{id:"word",label:"Ord",icon:"ðŸ“"},{id:"related",label:"Karta",icon:"â˜ï¸"},{id:"forms",label:"Lab",icon:"ðŸ§ª"},{id:"example",label:"Exempel",icon:"âœï¸"},{id:"history",label:"DNA",icon:"ðŸ“œ"},{id:"quiz",label:"Quiz",icon:"â“"}];return S?e.jsx(G,{streak:O,onClose:t||(()=>{}),word:s.swe}):e.jsxs("div",{className:"wod-overlay",children:[e.jsx("div",{className:"story-bg-layer",style:{backgroundImage:`url(${L})`}}),e.jsx("div",{className:"story-bg-overlay"}),e.jsxs("header",{className:"story-header",style:{opacity:S?0:1},children:[e.jsx("div",{className:"story-progress-container",children:I.map((m,b)=>{const y=I.findIndex(k=>k.id===r);let W=b<y?100:b===y?h:0;return e.jsx("div",{className:"progress-bar-segment",children:e.jsx("div",{className:"progress-bar-fill",style:{width:`${W}%`}})},m.id)})}),e.jsxs("nav",{className:"story-tabs",children:[I.map(m=>e.jsxs("button",{className:`story-tab ${r===m.id?"active":""}`,onClick:()=>{i(m.id),c(0)},children:[e.jsx("span",{className:"tab-icon",children:m.icon}),e.jsx("span",{className:"tab-label-text",children:m.label})]},m.id)),e.jsx("button",{className:"story-tab shuffle-btn",onClick:async()=>{d(!0);const m=await C.getDailyWord(!0);a(m),i("word"),c(0),d(!1)},title:"New Word",children:e.jsx("span",{className:"tab-icon",children:"ðŸ”„"})})]})]}),e.jsxs("main",{className:"story-main-content",children:[r==="word"&&e.jsxs("div",{className:"fade-in",children:[e.jsx("h1",{className:"premium-word-title",children:s.swe||s.swedish}),e.jsxs("div",{className:"word-phonetic",children:["[",s.phonetic||"tak-sam","]"]}),e.jsxs("div",{className:"word-translation",dir:"rtl",children:["(",s.arb||s.arabic,")"]})]}),r==="related"&&e.jsx(Q,{related:s.related}),r==="forms"&&e.jsx(J,{forms:s.forms,base:s.swe}),r==="example"&&e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"example-text",dangerouslySetInnerHTML:{__html:(s.sweEx||`Jag lÃ¤r mig ${s.swe} idag.`).replace(s.swe,`<strong>${s.swe}</strong>`)}}),e.jsx("div",{className:"word-translation",dir:"rtl",style:{marginTop:"20px",opacity:.8},children:s.arbEx||"Ù…Ø«Ø§Ù„ ØªÙˆØ¶ÙŠØ­ÙŠ Ù„Ù„ÙƒÙ„Ù…Ø©."}),p&&e.jsx("div",{className:"record-feedback-pop",children:p})]}),r==="history"&&e.jsx(H,{history:s.history}),r==="quiz"&&e.jsxs("div",{className:"fade-in",style:{width:"100%",maxWidth:"400px"},children:[e.jsx("h2",{style:{fontSize:"1.8rem",marginBottom:"10px"},children:"Vad betyder det?"}),e.jsx("div",{style:{color:"var(--story-cyan)",marginBottom:"30px",fontWeight:600},children:s.swe}),e.jsx(X,{correctAnswer:s.arb,onAnswer:P,state:x}),f&&e.jsx("div",{className:"record-feedback-pop",style:{background:"var(--story-rose)",marginTop:"20px"},children:f})]})]}),e.jsx("footer",{className:"story-bottom-shelf",children:e.jsxs("div",{className:"glass-card",children:[e.jsx("div",{className:"card-handle"}),r==="example"?e.jsxs("div",{className:"record-container",children:[e.jsxs("div",{className:"record-btn-wrapper",children:[e.jsx(K,{isActive:o}),e.jsx("button",{className:`record-btn ${o?"recording":""}`,onClick:q,children:e.jsx("svg",{className:"record-icon",fill:"currentColor",viewBox:"0 0 24 24",children:o?e.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"}):e.jsx("path",{d:"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zM17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"})})})]}),e.jsx("span",{style:{fontSize:"0.9rem",opacity:.8},children:o?"Listening...":"Try Pronouncing"})]}):e.jsx("div",{style:{height:"110px",display:"flex",alignItems:"center",justifyContent:"center"},children:r==="word"?e.jsxs("button",{className:"social-btn",onClick:()=>_.speak(s.swe),children:[e.jsx("div",{className:"big-audio-btn",children:e.jsx("span",{style:{fontSize:"1.5rem"},children:"ðŸ”Š"})}),e.jsx("span",{children:"Lyssna"})]}):e.jsx("div",{style:{opacity:.5,fontStyle:"italic"},children:"Swipe or choose answer"})}),e.jsxs("div",{className:"social-actions",children:[e.jsxs("button",{className:"social-btn",onClick:()=>window.location.href="profile.html",children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:"ðŸ‘¤"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("button",{className:`social-btn ${N?"liked":""}`,onClick:()=>{$(!N),!N&&window.navigator.vibrate&&window.navigator.vibrate(30)},children:[e.jsx("span",{style:{fontSize:"1.4rem",color:N?"var(--story-rose)":"inherit"},children:N?"â¤ï¸":"ðŸ¤"}),e.jsx("span",{children:"Like"})]}),e.jsxs("button",{className:"social-btn",onClick:()=>{navigator.share?navigator.share({title:"SnabbaLexin - WordDNA",text:`Check out this word: ${s.swe}`,url:window.location.href}):alert("Sharing not supported on this browser")},children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:"ðŸ“¤"}),e.jsx("span",{children:"Share"})]}),e.jsxs("button",{className:"social-btn",onClick:()=>alert("Comments coming soon! â€¢ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù‚Ø§Ø¯Ù…Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹"),children:[e.jsx("span",{style:{fontSize:"1.4rem"},children:"ðŸ’¬"}),e.jsx("span",{children:"Comment"})]})]})]})})]})};V.init();const M=document.getElementById("word-dna-root");M&&B.createRoot(M).render(e.jsx(Z,{onClose:()=>window.history.back()}));
